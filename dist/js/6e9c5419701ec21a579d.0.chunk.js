var _Mathabs=Math.abs,_Mathceil=Math.ceil,_StringfromCharCode=String.fromCharCode,_Mathmin=Math.min,_Mathfloor=Math.floor,_Mathround=Math.round,_Mathmax=Math.max;webpackJsonp([0],{161:function(o,$,z){'use strict';var W=z(17),Y=z(307),Z=z(310),ee=z(316),te=z(314),ne=z(164),ae='undefined'!=typeof window&&window.btoa&&window.btoa.bind(window)||z(309);o.exports=function(re){return new Promise(function(se,de){var ce=re.data,ue=re.headers;W.isFormData(ce)&&delete ue['Content-Type'];var ge=new XMLHttpRequest,he='onreadystatechange',fe=!1;if('undefined'==typeof window||!window.XDomainRequest||'withCredentials'in ge||te(re.url)||(ge=new window.XDomainRequest,he='onload',fe=!0,ge.onprogress=function(){},ge.ontimeout=function(){}),re.auth){var ye=re.auth.username||'',be=re.auth.password||'';ue.Authorization='Basic '+ae(ye+':'+be)}if(ge.open(re.method.toUpperCase(),Z(re.url,re.params,re.paramsSerializer),!0),ge.timeout=re.timeout,ge[he]=function(){if(ge&&(4===ge.readyState||fe)&&(0!==ge.status||ge.responseURL&&0===ge.responseURL.indexOf('file:'))){var Ne='getAllResponseHeaders'in ge?ee(ge.getAllResponseHeaders()):null,we=re.responseType&&'text'!==re.responseType?ge.response:ge.responseText,Se={data:we,status:1223===ge.status?204:ge.status,statusText:1223===ge.status?'No Content':ge.statusText,headers:Ne,config:re,request:ge};Y(se,de,Se),ge=null}},ge.onerror=function(){de(ne('Network Error',re)),ge=null},ge.ontimeout=function(){de(ne('timeout of '+re.timeout+'ms exceeded',re,'ECONNABORTED')),ge=null},W.isStandardBrowserEnv()){var Ce=z(312),xe=(re.withCredentials||te(re.url))&&re.xsrfCookieName?Ce.read(re.xsrfCookieName):void 0;xe&&(ue[re.xsrfHeaderName]=xe)}if('setRequestHeader'in ge&&W.forEach(ue,function(Ne,we){'undefined'==typeof ce&&'content-type'===we.toLowerCase()?delete ue[we]:ge.setRequestHeader(we,Ne)}),re.withCredentials&&(ge.withCredentials=!0),re.responseType)try{ge.responseType=re.responseType}catch(ve){if('json'!==ge.responseType)throw ve}'function'==typeof re.onDownloadProgress&&ge.addEventListener('progress',re.onDownloadProgress),'function'==typeof re.onUploadProgress&&ge.upload&&ge.upload.addEventListener('progress',re.onUploadProgress),re.cancelToken&&re.cancelToken.promise.then(function(Ne){ge&&(ge.abort(),de(Ne),ge=null)}),void 0===ce&&(ce=null),ge.send(ce)})}},162:function(o){'use strict';function W(Y){this.message=Y}W.prototype.toString=function(){return'Cancel'+(this.message?': '+this.message:'')},W.prototype.__CANCEL__=!0,o.exports=W},163:function(o){'use strict';o.exports=function(Y){return!!(Y&&Y.__CANCEL__)}},164:function(o,$,z){'use strict';var W=z(306);o.exports=function(Z,ee,te,ne){var ae=new Error(Z);return W(ae,ee,te,ne)}},165:function(o){'use strict';o.exports=function(Y,Z){return function(){for(var te=Array(arguments.length),ne=0;ne<te.length;ne++)te[ne]=arguments[ne];return Y.apply(Z,te)}}},166:function(o,$,z){var W=z(27),Y=z(5)('toStringTag'),Z='Arguments'==W(function(){return arguments}()),ee=function(te,ne){try{return te[ne]}catch(ae){}};o.exports=function(te){var ne,ae,oe;return te===void 0?'Undefined':null===te?'Null':'string'==typeof(ae=ee(ne=Object(te),Y))?ae:Z?W(ne):'Object'==(oe=W(ne))&&'function'==typeof ne.callee?'Arguments':oe}},167:function(o){o.exports=function(z){try{return{e:!1,v:z()}}catch(W){return{e:!0,v:W}}}},168:function(o,$,z){var W=z(13),Y=z(14),Z=z(76);o.exports=function(ee,te){if(W(ee),Y(te)&&te.constructor===ee)return te;var ne=Z.f(ee),ae=ne.resolve;return ae(te),ne.promise}},169:function(o,$,z){var W=z(13),Y=z(48),Z=z(5)('species');o.exports=function(ee,te){var ne=W(ee).constructor,ae;return ne===void 0||(ae=W(ne)[Z])==void 0?te:Y(ae)}},17:function(o,$,z){'use strict';function W(ve){return'[object Array]'===xe.call(ve)}function oe(ve){return null!==ve&&'object'==typeof ve}function de(ve){return'[object Function]'===xe.call(ve)}function fe(ve,Ne){if(null!==ve&&'undefined'!=typeof ve)if('object'==typeof ve||W(ve)||(ve=[ve]),W(ve))for(var we=0,Se=ve.length;we<Se;we++)Ne.call(null,ve[we],we,ve);else for(var Te in ve)Object.prototype.hasOwnProperty.call(ve,Te)&&Ne.call(null,ve[Te],Te,ve)}function ye(){function ve(Te,Ee){Ne[Ee]='object'==typeof Ne[Ee]&&'object'==typeof Te?ye(Ne[Ee],Te):Te}for(var Ne={},we=0,Se=arguments.length;we<Se;we++)fe(arguments[we],ve);return Ne}var Ce=z(165),xe=Object.prototype.toString;o.exports={isArray:W,isArrayBuffer:function(ve){return'[object ArrayBuffer]'===xe.call(ve)},isFormData:function(ve){return'undefined'!=typeof FormData&&ve instanceof FormData},isArrayBufferView:function(ve){var Ne;return Ne='undefined'!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ve):ve&&ve.buffer&&ve.buffer instanceof ArrayBuffer,Ne},isString:function(ve){return'string'==typeof ve},isNumber:function(ve){return'number'==typeof ve},isObject:oe,isUndefined:function(ve){return'undefined'==typeof ve},isDate:function(ve){return'[object Date]'===xe.call(ve)},isFile:function(ve){return'[object File]'===xe.call(ve)},isBlob:function(ve){return'[object Blob]'===xe.call(ve)},isFunction:de,isStream:function(ve){return oe(ve)&&de(ve.pipe)},isURLSearchParams:function(ve){return'undefined'!=typeof URLSearchParams&&ve instanceof URLSearchParams},isStandardBrowserEnv:function(){return'undefined'!=typeof window&&'undefined'!=typeof document&&'function'==typeof document.createElement},forEach:fe,merge:ye,extend:function(ve,Ne,we){return fe(Ne,function(Te,Ee){ve[Ee]=we&&'function'==typeof Te?Ce(Te,we):Te}),ve},trim:function(ve){return ve.replace(/^\s*/,'').replace(/\s*$/,'')}}},170:function(o,$,z){var W=z(49),Y=z(324),Z=z(70),ee=z(50),te=z(4),ne=te.process,ae=te.setImmediate,oe=te.clearImmediate,re=te.MessageChannel,le=te.Dispatch,se=0,de={},ce='onreadystatechange',fe=function(){var be=+this;if(de.hasOwnProperty(be)){var Ce=de[be];delete de[be],Ce()}},ye=function(be){fe.call(be.data)},ue,ge,he;ae&&oe||(ae=function(Ce){for(var xe=[],ve=1;arguments.length>ve;)xe.push(arguments[ve++]);return de[++se]=function(){Y('function'==typeof Ce?Ce:Function(Ce),xe)},ue(se),se},oe=function(Ce){delete de[Ce]},'process'==z(27)(ne)?ue=function(be){ne.nextTick(W(fe,be,1))}:le&&le.now?ue=function(be){le.now(W(fe,be,1))}:re?(ge=new re,he=ge.port2,ge.port1.onmessage=ye,ue=W(he.postMessage,he,1)):te.addEventListener&&'function'==typeof postMessage&&!te.importScripts?(ue=function(be){te.postMessage(be+'','*')},te.addEventListener('message',ye,!1)):ce in ee('script')?ue=function(be){Z.appendChild(ee('script'))[ce]=function(){Z.removeChild(this),fe.call(be)}}:ue=function(be){setTimeout(W(fe,be,1),0)}),o.exports={set:ae,clear:oe}},300:function(o,$,z){o.exports=z(301)},301:function(o,$,z){'use strict';function W(ae){var oe=new ee(ae),re=Z(ee.prototype.request,oe);return Y.extend(re,ee.prototype,oe),Y.extend(re,oe),re}var Y=z(17),Z=z(165),ee=z(303),te=z(75),ne=W(te);ne.Axios=ee,ne.create=function(oe){return W(Y.merge(te,oe))},ne.Cancel=z(162),ne.CancelToken=z(302),ne.isCancel=z(163),ne.all=function(oe){return Promise.all(oe)},ne.spread=z(317),o.exports=ne,o.exports.default=ne},302:function(o,$,z){'use strict';function W(Z){if('function'!=typeof Z)throw new TypeError('executor must be a function.');var ee;this.promise=new Promise(function(ae){ee=ae});var te=this;Z(function(ae){te.reason||(te.reason=new Y(ae),ee(te.reason))})}var Y=z(162);W.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},W.source=function(){var te=new W(function(ae){ee=ae}),ee;return{token:te,cancel:ee}},o.exports=W},303:function(o,$,z){'use strict';function W(oe){this.defaults=oe,this.interceptors={request:new ee,response:new ee}}var Y=z(75),Z=z(17),ee=z(304),te=z(305),ne=z(313),ae=z(311);W.prototype.request=function(re){'string'==typeof re&&(re=Z.merge({url:arguments[0]},arguments[1])),re=Z.merge(Y,this.defaults,{method:'get'},re),re.baseURL&&!ne(re.url)&&(re.url=ae(re.baseURL,re.url));var le=[te,void 0],se=Promise.resolve(re);for(this.interceptors.request.forEach(function(ce){le.unshift(ce.fulfilled,ce.rejected)}),this.interceptors.response.forEach(function(ce){le.push(ce.fulfilled,ce.rejected)});le.length;)se=se.then(le.shift(),le.shift());return se},Z.forEach(['delete','get','head'],function(re){W.prototype[re]=function(le,se){return this.request(Z.merge(se||{},{method:re,url:le}))}}),Z.forEach(['post','put','patch'],function(re){W.prototype[re]=function(le,se,de){return this.request(Z.merge(de||{},{method:re,url:le,data:se}))}}),o.exports=W},304:function(o,$,z){'use strict';function W(){this.handlers=[]}var Y=z(17);W.prototype.use=function(ee,te){return this.handlers.push({fulfilled:ee,rejected:te}),this.handlers.length-1},W.prototype.eject=function(ee){this.handlers[ee]&&(this.handlers[ee]=null)},W.prototype.forEach=function(ee){Y.forEach(this.handlers,function(ne){null!==ne&&ee(ne)})},o.exports=W},305:function(o,$,z){'use strict';function W(ne){ne.cancelToken&&ne.cancelToken.throwIfRequested()}var Y=z(17),Z=z(308),ee=z(163),te=z(75);o.exports=function(ae){W(ae),ae.headers=ae.headers||{},ae.data=Z(ae.data,ae.headers,ae.transformRequest),ae.headers=Y.merge(ae.headers.common||{},ae.headers[ae.method]||{},ae.headers||{}),Y.forEach(['delete','get','head','post','put','patch','common'],function(le){delete ae.headers[le]});var oe=ae.adapter||te.adapter;return oe(ae).then(function(le){return W(ae),le.data=Z(le.data,le.headers,ae.transformResponse),le},function(le){return ee(le)||(W(ae),le&&le.response&&(le.response.data=Z(le.response.data,le.response.headers,ae.transformResponse))),Promise.reject(le)})}},306:function(o){'use strict';o.exports=function(Y,Z,ee,te){return Y.config=Z,ee&&(Y.code=ee),Y.response=te,Y}},307:function(o,$,z){'use strict';var W=z(164);o.exports=function(Z,ee,te){var ne=te.config.validateStatus;te.status&&ne&&!ne(te.status)?ee(W('Request failed with status code '+te.status,te.config,null,te)):Z(te)}},308:function(o,$,z){'use strict';var W=z(17);o.exports=function(Z,ee,te){return W.forEach(te,function(ae){Z=ae(Z,ee)}),Z}},309:function(o){'use strict';function W(){this.message='String contains an invalid character'}W.prototype=new Error,W.prototype.code=5,W.prototype.name='InvalidCharacterError',o.exports=function(ee){for(var te=ee+'',ne='',re=0,le='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',ae,oe;te.charAt(0|re)||(le='=',re%1);ne+=le.charAt(63&ae>>8-8*(re%1))){if(oe=te.charCodeAt(re+=3/4),255<oe)throw new W;ae=ae<<8|oe}return ne}},310:function(o,$,z){'use strict';function W(Z){return encodeURIComponent(Z).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']')}var Y=z(17);o.exports=function(ee,te,ne){if(!te)return ee;var ae;if(ne)ae=ne(te);else if(Y.isURLSearchParams(te))ae=te.toString();else{var oe=[];Y.forEach(te,function(le,se){null===le||'undefined'==typeof le||(Y.isArray(le)&&(se+='[]'),!Y.isArray(le)&&(le=[le]),Y.forEach(le,function(ce){Y.isDate(ce)?ce=ce.toISOString():Y.isObject(ce)&&(ce=JSON.stringify(ce)),oe.push(W(se)+'='+W(ce))}))}),ae=oe.join('&')}return ae&&(ee+=(-1===ee.indexOf('?')?'?':'&')+ae),ee}},311:function(o){'use strict';o.exports=function(Y,Z){return Y.replace(/\/+$/,'')+'/'+Z.replace(/^\/+/,'')}},312:function(o,$,z){'use strict';var W=z(17);o.exports=W.isStandardBrowserEnv()?function(){return{write:function(ee,te,ne,ae,oe,re){var le=[];le.push(ee+'='+encodeURIComponent(te)),W.isNumber(ne)&&le.push('expires='+new Date(ne).toGMTString()),W.isString(ae)&&le.push('path='+ae),W.isString(oe)&&le.push('domain='+oe),!0===re&&le.push('secure'),document.cookie=le.join('; ')},read:function(ee){var te=document.cookie.match(new RegExp('(^|;\\s*)('+ee+')=([^;]*)'));return te?decodeURIComponent(te[3]):null},remove:function(ee){this.write(ee,'',Date.now()-8.64e7)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},313:function(o){'use strict';o.exports=function(Y){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(Y)}},314:function(o,$,z){'use strict';var W=z(17);o.exports=W.isStandardBrowserEnv()?function(){function Z(ae){var oe=ae;return ee&&(te.setAttribute('href',oe),oe=te.href),te.setAttribute('href',oe),{href:te.href,protocol:te.protocol?te.protocol.replace(/:$/,''):'',host:te.host,search:te.search?te.search.replace(/^\?/,''):'',hash:te.hash?te.hash.replace(/^#/,''):'',hostname:te.hostname,port:te.port,pathname:'/'===te.pathname.charAt(0)?te.pathname:'/'+te.pathname}}var ee=/(msie|trident)/i.test(navigator.userAgent),te=document.createElement('a'),ne;return ne=Z(window.location.href),function(oe){var re=W.isString(oe)?Z(oe):oe;return re.protocol===ne.protocol&&re.host===ne.host}}():function(){return function(){return!0}}()},315:function(o,$,z){'use strict';var W=z(17);o.exports=function(Z,ee){W.forEach(Z,function(ne,ae){ae!==ee&&ae.toUpperCase()===ee.toUpperCase()&&(Z[ee]=ne,delete Z[ae])})}},316:function(o,$,z){'use strict';var W=z(17);o.exports=function(Z){var ee={},te,ne,ae;return Z?(W.forEach(Z.split('\n'),function(re){ae=re.indexOf(':'),te=W.trim(re.substr(0,ae)).toLowerCase(),ne=W.trim(re.substr(ae+1)),te&&(ee[te]=ee[te]?ee[te]+', '+ne:ne)}),ee):ee}},317:function(o){'use strict';o.exports=function(Y){return function(ee){return Y.apply(null,ee)}}},318:function(o,$,z){o.exports={default:z(321),__esModule:!0}},319:function(o,$,z){'use strict';$.__esModule=!0;var Y=z(318),Z=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(Y);$.default=function(ee){return function(){var te=ee.apply(this,arguments);return new Z.default(function(ne,ae){function oe(re,le){try{var se=te[re](le),de=se.value}catch(ce){return void ae(ce)}return se.done?void ne(de):Z.default.resolve(de).then(function(ce){oe('next',ce)},function(ce){oe('throw',ce)})}return oe('next')})}}},320:function(o,$,z){o.exports=z(336)},321:function(o,$,z){z(72),z(73),z(74),z(333),z(334),z(335),o.exports=z(7).Promise},322:function(o){o.exports=function(z,W,Y,Z){if(!(z instanceof W)||Z!==void 0&&Z in z)throw TypeError(Y+': incorrect invocation!');return z}},323:function(o,$,z){var W=z(49),Y=z(326),Z=z(325),ee=z(13),te=z(71),ne=z(332),ae={},oe={},$=o.exports=function(re,le,se,de,ce){var ue=ce?function(){return re}:ne(re),ge=W(se,de,le?2:1),he=0,fe,ye,be,Ce;if('function'!=typeof ue)throw TypeError(re+' is not iterable!');if(Z(ue)){for(fe=te(re.length);fe>he;he++)if(Ce=le?ge(ee(ye=re[he])[0],ye[1]):ge(re[he]),Ce===ae||Ce===oe)return Ce;}else for(be=ue.call(re);!(ye=be.next()).done;)if(Ce=Y(be,ge,ye.value,le),Ce===ae||Ce===oe)return Ce};$.BREAK=ae,$.RETURN=oe},324:function(o){o.exports=function(z,W,Y){var Z=Y===void 0;switch(W.length){case 0:return Z?z():z.call(Y);case 1:return Z?z(W[0]):z.call(Y,W[0]);case 2:return Z?z(W[0],W[1]):z.call(Y,W[0],W[1]);case 3:return Z?z(W[0],W[1],W[2]):z.call(Y,W[0],W[1],W[2]);case 4:return Z?z(W[0],W[1],W[2],W[3]):z.call(Y,W[0],W[1],W[2],W[3]);}return z.apply(Y,W)}},325:function(o,$,z){var W=z(21),Y=z(5)('iterator'),Z=Array.prototype;o.exports=function(ee){return ee!==void 0&&(W.Array===ee||Z[Y]===ee)}},326:function(o,$,z){var W=z(13);o.exports=function(Y,Z,ee,te){try{return te?Z(W(ee)[0],ee[1]):Z(ee)}catch(ae){var ne=Y['return'];throw void 0!==ne&&W(ne.call(Y)),ae}}},327:function(o,$,z){var W=z(5)('iterator'),Y=!1;try{var Z=[7][W]();Z['return']=function(){Y=!0},Array.from(Z,function(){throw 2})}catch(ee){}o.exports=function(ee,te){if(!te&&!Y)return!1;var ne=!1;try{var ae=[7],oe=ae[W]();oe.next=function(){return{done:ne=!0}},ae[W]=function(){return oe},ee(ae)}catch(re){}return ne}},328:function(o,$,z){var W=z(4),Y=z(170).set,Z=W.MutationObserver||W.WebKitMutationObserver,ee=W.process,te=W.Promise,ne='process'==z(27)(ee);o.exports=function(){var le=function(){var ue,ge;for(ne&&(ue=ee.domain)&&ue.exit();ae;){ge=ae.fn,ae=ae.next;try{ge()}catch(he){throw ae?re():oe=void 0,he}}oe=void 0,ue&&ue.enter()},ae,oe,re;if(ne)re=function(){ee.nextTick(le)};else if(Z&&!(W.navigator&&W.navigator.standalone)){var se=!0,de=document.createTextNode('');new Z(le).observe(de,{characterData:!0}),re=function(){de.data=se=!se}}else if(te&&te.resolve){var ce=te.resolve(void 0);re=function(){ce.then(le)}}else re=function(){Y.call(W,le)};return function(ue){var ge={fn:ue,next:void 0};oe&&(oe.next=ge),ae||(ae=ge,re()),oe=ge}}},329:function(o,$,z){var W=z(11);o.exports=function(Y,Z,ee){for(var te in Z)ee&&Y[te]?Y[te]=Z[te]:W(Y,te,Z[te]);return Y}},330:function(o,$,z){'use strict';var W=z(4),Y=z(7),Z=z(12),ee=z(10),te=z(5)('species');o.exports=function(ne){var ae='function'==typeof Y[ne]?Y[ne]:W[ne];ee&&ae&&!ae[te]&&Z.f(ae,te,{configurable:!0,get:function(){return this}})}},331:function(o,$,z){var W=z(4),Y=W.navigator;o.exports=Y&&Y.userAgent||''},332:function(o,$,z){var W=z(166),Y=z(5)('iterator'),Z=z(21);o.exports=z(7).getIteratorMethod=function(ee){if(ee!=void 0)return ee[Y]||ee['@@iterator']||Z[W(ee)]}},333:function(o,$,z){'use strict';var W=z(20),Y=z(4),Z=z(49),ee=z(166),te=z(19),ne=z(14),ae=z(48),oe=z(322),re=z(323),le=z(169),se=z(170).set,de=z(328)(),ce=z(76),ue=z(167),ge=z(331),he=z(168),fe='Promise',ye=Y.TypeError,be=Y.process,Ce=be&&be.versions,xe=Ce&&Ce.v8||'',ve=Y[fe],Ne='process'==ee(be),we=function(){},_e=Te=ce.f,Be=!!function(){try{var Me=ve.resolve(1),He=(Me.constructor={})[z(5)('species')]=function(Fe){Fe(we,we)};return(Ne||'function'==typeof PromiseRejectionEvent)&&Me.then(we)instanceof He&&0!==xe.indexOf('6.6')&&-1===ge.indexOf('Chrome/66')}catch(Fe){}}(),Ie=function(Me){var He;return ne(Me)&&'function'==typeof(He=Me.then)&&He},Ae=function(Me,He){if(!Me._n){Me._n=!0;var Fe=Me._c;de(function(){for(var Ue=Me._v,qe=1==Me._s,je=0,$e=function(Ve){var ze=qe?Ve.ok:Ve.fail,We=Ve.resolve,Xe=Ve.reject,Ye=Ve.domain,Ke,Ge,Je;try{ze?(!qe&&(2==Me._h&&Oe(Me),Me._h=1),!0===ze?Ke=Ue:(Ye&&Ye.enter(),Ke=ze(Ue),Ye&&(Ye.exit(),Je=!0)),Ke===Ve.promise?Xe(ye('Promise-chain cycle')):(Ge=Ie(Ke))?Ge.call(Ke,We,Xe):We(Ke)):Xe(Ue)}catch(Qe){Ye&&!Je&&Ye.exit(),Xe(Qe)}};Fe.length>je;)$e(Fe[je++]);Me._c=[],Me._n=!1,He&&!Me._h&&Le(Me)})}},Le=function(Me){se.call(Y,function(){var He=Me._v,Fe=Re(Me),Ue,qe,je;if(Fe&&(Ue=ue(function(){Ne?be.emit('unhandledRejection',He,Me):(qe=Y.onunhandledrejection)?qe({promise:Me,reason:He}):(je=Y.console)&&je.error&&je.error('Unhandled promise rejection',He)}),Me._h=Ne||Re(Me)?2:1),Me._a=void 0,Fe&&Ue.e)throw Ue.v})},Re=function(Me){return 1!==Me._h&&0===(Me._a||Me._c).length},Oe=function(Me){se.call(Y,function(){var He;Ne?be.emit('rejectionHandled',Me):(He=Y.onrejectionhandled)&&He({promise:Me,reason:Me._v})})},Pe=function(Me){var He=this;He._d||(He._d=!0,He=He._w||He,He._v=Me,He._s=2,!He._a&&(He._a=He._c.slice()),Ae(He,!0))},De=function(Me){var He=this,Fe;if(!He._d){He._d=!0,He=He._w||He;try{if(He===Me)throw ye('Promise can\'t be resolved itself');(Fe=Ie(Me))?de(function(){var Ue={_w:He,_d:!1};try{Fe.call(Me,Z(De,Ue,1),Z(Pe,Ue,1))}catch(qe){Pe.call(Ue,qe)}}):(He._v=Me,He._s=1,Ae(He,!1))}catch(Ue){Pe.call({_w:He,_d:!1},Ue)}}},Se,Te,Ee,ke;Be||(ve=function(He){oe(this,ve,fe,'_h'),ae(He),Se.call(this);try{He(Z(De,this,1),Z(Pe,this,1))}catch(Fe){Pe.call(this,Fe)}},Se=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Se.prototype=z(329)(ve.prototype,{then:function(He,Fe){var Ue=_e(le(this,ve));return Ue.ok='function'!=typeof He||He,Ue.fail='function'==typeof Fe&&Fe,Ue.domain=Ne?be.domain:void 0,this._c.push(Ue),this._a&&this._a.push(Ue),this._s&&Ae(this,!1),Ue.promise},catch:function(Me){return this.then(void 0,Me)}}),Ee=function(){var Me=new Se;this.promise=Me,this.resolve=Z(De,Me,1),this.reject=Z(Pe,Me,1)},ce.f=_e=function(Me){return Me===ve||Me===ke?new Ee(Me):Te(Me)}),te(te.G+te.W+te.F*!Be,{Promise:ve}),z(28)(ve,fe),z(330)(fe),ke=z(7)[fe],te(te.S+te.F*!Be,fe,{reject:function(He){var Fe=_e(this),Ue=Fe.reject;return Ue(He),Fe.promise}}),te(te.S+te.F*(W||!Be),fe,{resolve:function(He){return he(W&&this===ke?ve:this,He)}}),te(te.S+te.F*!(Be&&z(327)(function(Me){ve.all(Me)['catch'](we)})),fe,{all:function(He){var Fe=this,Ue=_e(Fe),qe=Ue.resolve,je=Ue.reject,$e=ue(function(){var Ve=[],ze=0,We=1;re(He,!1,function(Xe){var Ye=ze++,Ke=!1;Ve.push(void 0),We++,Fe.resolve(Xe).then(function(Ge){Ke||(Ke=!0,Ve[Ye]=Ge,--We||qe(Ve))},je)}),--We||qe(Ve)});return $e.e&&je($e.v),Ue.promise},race:function(He){var Fe=this,Ue=_e(Fe),qe=Ue.reject,je=ue(function(){re(He,!1,function($e){Fe.resolve($e).then(Ue.resolve,qe)})});return je.e&&qe(je.v),Ue.promise}})},334:function(o,$,z){'use strict';var W=z(19),Y=z(7),Z=z(4),ee=z(169),te=z(168);W(W.P+W.R,'Promise',{finally:function(ne){var ae=ee(this,Y.Promise||Z.Promise),oe='function'==typeof ne;return this.then(oe?function(re){return te(ae,ne()).then(function(){return re})}:ne,oe?function(re){return te(ae,ne()).then(function(){throw re})}:ne)}})},335:function(o,$,z){'use strict';var W=z(19),Y=z(76),Z=z(167);W(W.S,'Promise',{try:function(ee){var te=Y.f(this),ne=Z(ee);return(ne.e?te.reject:te.resolve)(ne.v),te.promise}})},336:function(o,$,z){var W=function(){return this}()||Function('return this')(),Y=W.regeneratorRuntime&&0<=Object.getOwnPropertyNames(W).indexOf('regeneratorRuntime'),Z=Y&&W.regeneratorRuntime;if(W.regeneratorRuntime=void 0,o.exports=z(337),Y)W.regeneratorRuntime=Z;else try{delete W.regeneratorRuntime}catch(ee){W.regeneratorRuntime=void 0}},337:function(o){!function(z){'use strict';function W(Le,Re,Oe,Pe){var De=Re&&Re.prototype instanceof Z?Re:Z,Me=Object.create(De.prototype),He=new de(Pe||[]);return Me._invoke=oe(Le,Oe,He),Me}function Y(Le,Re,Oe){try{return{type:'normal',arg:Le.call(Re,Oe)}}catch(Pe){return{type:'throw',arg:Pe}}}function Z(){}function ee(){}function te(){}function ne(Le){['next','throw','return'].forEach(function(Re){Le[Re]=function(Oe){return this._invoke(Re,Oe)}})}function ae(Le){function Re(De,Me,He,Fe){var Ue=Y(Le[De],Le,Me);if('throw'===Ue.type)Fe(Ue.arg);else{var qe=Ue.arg,je=qe.value;return je&&'object'==typeof je&&he.call(je,'__await')?Promise.resolve(je.__await).then(function($e){Re('next',$e,He,Fe)},function($e){Re('throw',$e,He,Fe)}):Promise.resolve(je).then(function($e){qe.value=$e,He(qe)},Fe)}}var Pe;this._invoke=function(De,Me){function He(){return new Promise(function(Fe,Ue){Re(De,Me,Fe,Ue)})}return Pe=Pe?Pe.then(He,He):He()}}function oe(Le,Re,Oe){var Pe=we;return function(Me,He){if(Pe==Te)throw new Error('Generator is already running');if(Pe==Ee){if('throw'===Me)throw He;return ue()}for(Oe.method=Me,Oe.arg=He;;){var Fe=Oe.delegate;if(Fe){var Ue=re(Fe,Oe);if(Ue){if(Ue===ke)continue;return Ue}}if('next'===Oe.method)Oe.sent=Oe._sent=Oe.arg;else if('throw'===Oe.method){if(Pe==we)throw Pe=Ee,Oe.arg;Oe.dispatchException(Oe.arg)}else'return'===Oe.method&&Oe.abrupt('return',Oe.arg);Pe=Te;var qe=Y(Le,Re,Oe);if('normal'===qe.type){if(Pe=Oe.done?Ee:Se,qe.arg===ke)continue;return{value:qe.arg,done:Oe.done}}'throw'===qe.type&&(Pe=Ee,Oe.method='throw',Oe.arg=qe.arg)}}}function re(Le,Re){var Oe=Le.iterator[Re.method];if(Oe===fe){if(Re.delegate=null,'throw'===Re.method){if(Le.iterator.return&&(Re.method='return',Re.arg=fe,re(Le,Re),'throw'===Re.method))return ke;Re.method='throw',Re.arg=new TypeError('The iterator does not provide a \'throw\' method')}return ke}var Pe=Y(Oe,Le.iterator,Re.arg);if('throw'===Pe.type)return Re.method='throw',Re.arg=Pe.arg,Re.delegate=null,ke;var De=Pe.arg;if(!De)return Re.method='throw',Re.arg=new TypeError('iterator result is not an object'),Re.delegate=null,ke;if(De.done)Re[Le.resultName]=De.value,Re.next=Le.nextLoc,'return'!==Re.method&&(Re.method='next',Re.arg=fe);else return De;return Re.delegate=null,ke}function le(Le){var Re={tryLoc:Le[0]};1 in Le&&(Re.catchLoc=Le[1]),2 in Le&&(Re.finallyLoc=Le[2],Re.afterLoc=Le[3]),this.tryEntries.push(Re)}function se(Le){var Re=Le.completion||{};Re.type='normal',delete Re.arg,Le.completion=Re}function de(Le){this.tryEntries=[{tryLoc:'root'}],Le.forEach(le,this),this.reset(!0)}function ce(Le){if(Le){var Re=Le[be];if(Re)return Re.call(Le);if('function'==typeof Le.next)return Le;if(!isNaN(Le.length)){var Oe=-1,Pe=function De(){for(;++Oe<Le.length;)if(he.call(Le,Oe))return De.value=Le[Oe],De.done=!1,De;return De.value=fe,De.done=!0,De};return Pe.next=Pe}}return{next:ue}}function ue(){return{value:fe,done:!0}}var ge=Object.prototype,he=ge.hasOwnProperty,ye='function'==typeof Symbol?Symbol:{},be=ye.iterator||'@@iterator',Ce=ye.asyncIterator||'@@asyncIterator',xe=ye.toStringTag||'@@toStringTag',ve='object'==typeof o,Ne=z.regeneratorRuntime,fe;if(Ne)return void(ve&&(o.exports=Ne));Ne=z.regeneratorRuntime=ve?o.exports:{},Ne.wrap=W;var we='suspendedStart',Se='suspendedYield',Te='executing',Ee='completed',ke={},_e={};_e[be]=function(){return this};var Be=Object.getPrototypeOf,Ie=Be&&Be(Be(ce([])));Ie&&Ie!==ge&&he.call(Ie,be)&&(_e=Ie);var Ae=te.prototype=Z.prototype=Object.create(_e);ee.prototype=Ae.constructor=te,te.constructor=ee,te[xe]=ee.displayName='GeneratorFunction',Ne.isGeneratorFunction=function(Le){var Re='function'==typeof Le&&Le.constructor;return!!Re&&(Re===ee||'GeneratorFunction'===(Re.displayName||Re.name))},Ne.mark=function(Le){return Object.setPrototypeOf?Object.setPrototypeOf(Le,te):(Le.__proto__=te,!(xe in Le)&&(Le[xe]='GeneratorFunction')),Le.prototype=Object.create(Ae),Le},Ne.awrap=function(Le){return{__await:Le}},ne(ae.prototype),ae.prototype[Ce]=function(){return this},Ne.AsyncIterator=ae,Ne.async=function(Le,Re,Oe,Pe){var De=new ae(W(Le,Re,Oe,Pe));return Ne.isGeneratorFunction(Re)?De:De.next().then(function(Me){return Me.done?Me.value:De.next()})},ne(Ae),Ae[xe]='Generator',Ae[be]=function(){return this},Ae.toString=function(){return'[object Generator]'},Ne.keys=function(Le){var Re=[];for(var Oe in Le)Re.push(Oe);return Re.reverse(),function Pe(){for(;Re.length;){var De=Re.pop();if(De in Le)return Pe.value=De,Pe.done=!1,Pe}return Pe.done=!0,Pe}},Ne.values=ce,de.prototype={constructor:de,reset:function(Le){if(this.prev=0,this.next=0,this.sent=this._sent=fe,this.done=!1,this.delegate=null,this.method='next',this.arg=fe,this.tryEntries.forEach(se),!Le)for(var Re in this)'t'===Re.charAt(0)&&he.call(this,Re)&&!isNaN(+Re.slice(1))&&(this[Re]=fe)},stop:function(){this.done=!0;var Le=this.tryEntries[0],Re=Le.completion;if('throw'===Re.type)throw Re.arg;return this.rval},dispatchException:function(Le){function Re(Ue,qe){return Me.type='throw',Me.arg=Le,Oe.next=Ue,qe&&(Oe.method='next',Oe.arg=fe),!!qe}if(this.done)throw Le;for(var Oe=this,Pe=this.tryEntries.length-1;0<=Pe;--Pe){var De=this.tryEntries[Pe],Me=De.completion;if('root'===De.tryLoc)return Re('end');if(De.tryLoc<=this.prev){var He=he.call(De,'catchLoc'),Fe=he.call(De,'finallyLoc');if(He&&Fe){if(this.prev<De.catchLoc)return Re(De.catchLoc,!0);if(this.prev<De.finallyLoc)return Re(De.finallyLoc)}else if(He){if(this.prev<De.catchLoc)return Re(De.catchLoc,!0);}else if(!Fe)throw new Error('try statement without catch or finally');else if(this.prev<De.finallyLoc)return Re(De.finallyLoc)}}},abrupt:function(Le,Re){for(var Oe=this.tryEntries.length-1,Pe;0<=Oe;--Oe)if(Pe=this.tryEntries[Oe],Pe.tryLoc<=this.prev&&he.call(Pe,'finallyLoc')&&this.prev<Pe.finallyLoc){var De=Pe;break}De&&('break'===Le||'continue'===Le)&&De.tryLoc<=Re&&Re<=De.finallyLoc&&(De=null);var Me=De?De.completion:{};return Me.type=Le,Me.arg=Re,De?(this.method='next',this.next=De.finallyLoc,ke):this.complete(Me)},complete:function(Le,Re){if('throw'===Le.type)throw Le.arg;return'break'===Le.type||'continue'===Le.type?this.next=Le.arg:'return'===Le.type?(this.rval=this.arg=Le.arg,this.method='return',this.next='end'):'normal'===Le.type&&Re&&(this.next=Re),ke},finish:function(Le){for(var Re=this.tryEntries.length-1,Oe;0<=Re;--Re)if(Oe=this.tryEntries[Re],Oe.finallyLoc===Le)return this.complete(Oe.completion,Oe.afterLoc),se(Oe),ke},catch:function(Le){for(var Re=this.tryEntries.length-1,Oe;0<=Re;--Re)if(Oe=this.tryEntries[Re],Oe.tryLoc===Le){var Pe=Oe.completion;if('throw'===Pe.type){var De=Pe.arg;se(Oe)}return De}throw new Error('illegal catch attempt')},delegateYield:function(Le,Re,Oe){return this.delegate={iterator:ce(Le),resultName:Re,nextLoc:Oe},'next'===this.method&&(this.arg=fe),ke}}}(function(){return this}()||Function('return this')())},338:function(o,$,z){z(382);var W=z(78)(z(366),z(378),'data-v-50b81766',null);o.exports=W.exports},366:function(o,$,z){'use strict';function W(le){return le&&le.__esModule?le:{default:le}}Object.defineProperty($,'__esModule',{value:!0});var Y=z(320),Z=W(Y),ee=z(319),te=W(ee),ne=z(300),ae=z(172),oe=z(376),re=z(370);$.default={created:function(){},mounted:function(){this.init()},watch:{$route:'init'},beforeDestroy:function(){re.delEditor('editor'),this.ue=null;var se=document.getElementById('edui_fixedlayer');se.parentNode.removeChild(se)},directives:{},components:{"cms-left":function(){return z.e(6).then(z.bind(null,363))}},data:function(){return{height:0,ue:0,menus:[],cms:{id:'',title:'',keyword:'',description:'',menu:'',isindex:'0',content:''},rules:{title:[{required:!0,message:'\u8BF7\u8F93\u5165\u6807\u9898',trigger:'blur'}],keyword:[{required:!0,message:'\u8BF7\u8F93\u5165\u5173\u952E\u5B57',trigger:'blur'}],description:[{required:!0,message:'\u8BF7\u8F93\u5165\u63CF\u8FF0',trigger:'blur'}],menu:[{required:!0,message:'\u8BF7\u9009\u62E9\u83DC\u5355',trigger:'change'}]}}},methods:{init:function(){var se=this;return(0,te.default)(Z.default.mark(function de(){var ce;return Z.default.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:se.getMenus(),ce=document.documentElement.clientHeight,se.height=ce,window.addEventListener('resize',function(){var he=document.documentElement.clientHeight;se.height=he}),document.addEventListener('keydown',se.keydownEnter),setTimeout(function(){se.ue=re.getEditor('editor',{autoHeightEnabled:!1}),se.$route.params.id&&(se.cms.id=se.$route.params.id,se.ue.addListener('ready',function(){se.getEditContent()}))},200);case 6:case'end':return ge.stop();}},de,se)}))()},getMenus:function(){var se=this;return(0,te.default)(Z.default.mark(function de(){var ce;return Z.default.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,ne('/menu').then(function(he){return he.data},function(he){return se.$message.error(he.data.msg),!1});case 2:ce=ge.sent,ce&&(se.menus=ce);case 4:case'end':return ge.stop();}},de,se)}))()},getEditContent:function(){var se=this;ne.get('/cms/content/'+this.cms.id).then(function(de){se.cms=de.data.data,se.ue.setContent(se.cms.content)},function(de){se.$message.error(de.data.msg)})},submitCms:function(){var se=this;this.$refs.cms.validate(function(de){return de?void(se.cms.content=se.ue.getContent(),ne.post('/cmsForm/addOrUpdate',se.cms).then(function(ce){ce.data.status&&200===ce.data.status?se.$message({message:'\u606D\u559C\u4F60\uFF0C\u53D1\u5E03\u6210\u529F',type:'success',duration:1e3,onClose:function(){se.$confirm('\u662F\u5426\u7EE7\u7EED\u7F16\u8F91?','\u63D0\u793A',{confirmButtonText:'\u786E\u5B9A',cancelButtonText:'\u53D6\u6D88',type:'warning'}).then(function(){se.cms.id||se.$router.push('/form/'+ce.data.data)},function(){se.$router.push('/list')})}}):se.$message.error(ce.data.msg)},function(ce){se.$message.error(ce.data.msg)})):(window.scrollTo(0,0),!1)})}}}},369:function(o){'use strict';o.exports={labelMap:{anchor:'\u951A\u70B9',undo:'\u64A4\u9500',redo:'\u91CD\u505A',bold:'\u52A0\u7C97',indent:'\u9996\u884C\u7F29\u8FDB',snapscreen:'\u622A\u56FE',italic:'\u659C\u4F53',underline:'\u4E0B\u5212\u7EBF',strikethrough:'\u5220\u9664\u7EBF',subscript:'\u4E0B\u6807',fontborder:'\u5B57\u7B26\u8FB9\u6846',superscript:'\u4E0A\u6807',formatmatch:'\u683C\u5F0F\u5237',source:'\u6E90\u4EE3\u7801',blockquote:'\u5F15\u7528',pasteplain:'\u7EAF\u6587\u672C\u7C98\u8D34\u6A21\u5F0F',selectall:'\u5168\u9009',print:'\u6253\u5370',preview:'\u9884\u89C8',horizontal:'\u5206\u9694\u7EBF',removeformat:'\u6E05\u9664\u683C\u5F0F',time:'\u65F6\u95F4',date:'\u65E5\u671F',unlink:'\u53D6\u6D88\u94FE\u63A5',insertrow:'\u524D\u63D2\u5165\u884C',insertcol:'\u524D\u63D2\u5165\u5217',mergeright:'\u53F3\u5408\u5E76\u5355\u5143\u683C',mergedown:'\u4E0B\u5408\u5E76\u5355\u5143\u683C',deleterow:'\u5220\u9664\u884C',deletecol:'\u5220\u9664\u5217',splittorows:'\u62C6\u5206\u6210\u884C',splittocols:'\u62C6\u5206\u6210\u5217',splittocells:'\u5B8C\u5168\u62C6\u5206\u5355\u5143\u683C',deletecaption:'\u5220\u9664\u8868\u683C\u6807\u9898',inserttitle:'\u63D2\u5165\u6807\u9898',mergecells:'\u5408\u5E76\u591A\u4E2A\u5355\u5143\u683C',deletetable:'\u5220\u9664\u8868\u683C',cleardoc:'\u6E05\u7A7A\u6587\u6863',insertparagraphbeforetable:'\u8868\u683C\u524D\u63D2\u5165\u884C',insertcode:'\u4EE3\u7801\u8BED\u8A00',fontfamily:'\u5B57\u4F53',fontsize:'\u5B57\u53F7',paragraph:'\u6BB5\u843D\u683C\u5F0F',simpleupload:'\u5355\u56FE\u4E0A\u4F20',insertimage:'\u591A\u56FE\u4E0A\u4F20',edittable:'\u8868\u683C\u5C5E\u6027',edittd:'\u5355\u5143\u683C\u5C5E\u6027',link:'\u8D85\u94FE\u63A5',emotion:'\u8868\u60C5',spechars:'\u7279\u6B8A\u5B57\u7B26',searchreplace:'\u67E5\u8BE2\u66FF\u6362',map:'Baidu\u5730\u56FE',gmap:'Google\u5730\u56FE',insertvideo:'\u89C6\u9891',help:'\u5E2E\u52A9',justifyleft:'\u5C45\u5DE6\u5BF9\u9F50',justifyright:'\u5C45\u53F3\u5BF9\u9F50',justifycenter:'\u5C45\u4E2D\u5BF9\u9F50',justifyjustify:'\u4E24\u7AEF\u5BF9\u9F50',forecolor:'\u5B57\u4F53\u989C\u8272',backcolor:'\u80CC\u666F\u8272',insertorderedlist:'\u6709\u5E8F\u5217\u8868',insertunorderedlist:'\u65E0\u5E8F\u5217\u8868',fullscreen:'\u5168\u5C4F',directionalityltr:'\u4ECE\u5DE6\u5411\u53F3\u8F93\u5165',directionalityrtl:'\u4ECE\u53F3\u5411\u5DE6\u8F93\u5165',rowspacingtop:'\u6BB5\u524D\u8DDD',rowspacingbottom:'\u6BB5\u540E\u8DDD',pagebreak:'\u5206\u9875',insertframe:'\u63D2\u5165Iframe',imagenone:'\u9ED8\u8BA4',imageleft:'\u5DE6\u6D6E\u52A8',imageright:'\u53F3\u6D6E\u52A8',attachment:'\u9644\u4EF6',imagecenter:'\u5C45\u4E2D',wordimage:'\u56FE\u7247\u8F6C\u5B58',lineheight:'\u884C\u95F4\u8DDD',edittip:'\u7F16\u8F91\u63D0\u793A',customstyle:'\u81EA\u5B9A\u4E49\u6807\u9898',autotypeset:'\u81EA\u52A8\u6392\u7248',webapp:'\u767E\u5EA6\u5E94\u7528',touppercase:'\u5B57\u6BCD\u5927\u5199',tolowercase:'\u5B57\u6BCD\u5C0F\u5199',background:'\u80CC\u666F',template:'\u6A21\u677F',scrawl:'\u6D82\u9E26',music:'\u97F3\u4E50',inserttable:'\u63D2\u5165\u8868\u683C',drafts:'\u4ECE\u8349\u7A3F\u7BB1\u52A0\u8F7D',charts:'\u56FE\u8868'},insertorderedlist:{num:'1,2,3...',num1:'1),2),3)...',num2:'(1),(2),(3)...',cn:'\u4E00,\u4E8C,\u4E09....',cn1:'\u4E00),\u4E8C),\u4E09)....',cn2:'(\u4E00),(\u4E8C),(\u4E09)....',decimal:'1,2,3...',"lower-alpha":'a,b,c...',"lower-roman":'i,ii,iii...',"upper-alpha":'A,B,C...',"upper-roman":'I,II,III...'},insertunorderedlist:{circle:'\u25CB \u5927\u5706\u5708',disc:'\u25CF \u5C0F\u9ED1\u70B9',square:'\u25A0 \u5C0F\u65B9\u5757 ',dash:'\u2014 \u7834\u6298\u53F7',dot:' \u3002 \u5C0F\u5706\u5708'},paragraph:{p:'\u6BB5\u843D',h1:'\u6807\u9898 1',h2:'\u6807\u9898 2',h3:'\u6807\u9898 3',h4:'\u6807\u9898 4',h5:'\u6807\u9898 5',h6:'\u6807\u9898 6'},fontfamily:{songti:'\u5B8B\u4F53',kaiti:'\u6977\u4F53',heiti:'\u9ED1\u4F53',lishu:'\u96B6\u4E66',yahei:'\u5FAE\u8F6F\u96C5\u9ED1',andaleMono:'andale mono',arial:'arial',arialBlack:'arial black',comicSansMs:'comic sans ms',impact:'impact',timesNewRoman:'times new roman'},customstyle:{tc:'\u6807\u9898\u5C45\u4E2D',tl:'\u6807\u9898\u5C45\u5DE6',im:'\u5F3A\u8C03',hi:'\u660E\u663E\u5F3A\u8C03'},autoupload:{exceedSizeError:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA\u9650\u5236',exceedTypeError:'\u6587\u4EF6\u683C\u5F0F\u4E0D\u5141\u8BB8',jsonEncodeError:'\u670D\u52A1\u5668\u8FD4\u56DE\u683C\u5F0F\u9519\u8BEF',loading:'\u6B63\u5728\u4E0A\u4F20...',loadError:'\u4E0A\u4F20\u9519\u8BEF',errorLoadConfig:'\u540E\u7AEF\u914D\u7F6E\u9879\u6CA1\u6709\u6B63\u5E38\u52A0\u8F7D\uFF0C\u4E0A\u4F20\u63D2\u4EF6\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01'},simpleupload:{exceedSizeError:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA\u9650\u5236',exceedTypeError:'\u6587\u4EF6\u683C\u5F0F\u4E0D\u5141\u8BB8',jsonEncodeError:'\u670D\u52A1\u5668\u8FD4\u56DE\u683C\u5F0F\u9519\u8BEF',loading:'\u6B63\u5728\u4E0A\u4F20...',loadError:'\u4E0A\u4F20\u9519\u8BEF',errorLoadConfig:'\u540E\u7AEF\u914D\u7F6E\u9879\u6CA1\u6709\u6B63\u5E38\u52A0\u8F7D\uFF0C\u4E0A\u4F20\u63D2\u4EF6\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01'},elementPathTip:'\u5143\u7D20\u8DEF\u5F84',wordCountTip:'\u5B57\u6570\u7EDF\u8BA1',wordCountMsg:'\u5F53\u524D\u5DF2\u8F93\u5165{#count}\u4E2A\u5B57\u7B26, \u60A8\u8FD8\u53EF\u4EE5\u8F93\u5165{#leave}\u4E2A\u5B57\u7B26\u3002 ',wordOverFlowMsg:'<span style="color:red;">\u5B57\u6570\u8D85\u51FA\u6700\u5927\u5141\u8BB8\u503C\uFF0C\u670D\u52A1\u5668\u53EF\u80FD\u62D2\u7EDD\u4FDD\u5B58\uFF01</span>',ok:'\u786E\u8BA4',cancel:'\u53D6\u6D88',closeDialog:'\u5173\u95ED\u5BF9\u8BDD\u6846',tableDrag:'\u8868\u683C\u62D6\u52A8\u5FC5\u987B\u5F15\u5165uiUtils.js\u6587\u4EF6\uFF01',autofloatMsg:'\u5DE5\u5177\u680F\u6D6E\u52A8\u4F9D\u8D56\u7F16\u8F91\u5668UI\uFF0C\u60A8\u9996\u5148\u9700\u8981\u5F15\u5165UI\u6587\u4EF6!',loadconfigError:'\u83B7\u53D6\u540E\u53F0\u914D\u7F6E\u9879\u8BF7\u6C42\u51FA\u9519\uFF0C\u4E0A\u4F20\u529F\u80FD\u5C06\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',loadconfigFormatError:'\u540E\u53F0\u914D\u7F6E\u9879\u8FD4\u56DE\u683C\u5F0F\u51FA\u9519\uFF0C\u4E0A\u4F20\u529F\u80FD\u5C06\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',loadconfigHttpError:'\u8BF7\u6C42\u540E\u53F0\u914D\u7F6E\u9879http\u9519\u8BEF\uFF0C\u4E0A\u4F20\u529F\u80FD\u5C06\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',snapScreen_plugin:{browserMsg:'\u4EC5\u652F\u6301IE\u6D4F\u89C8\u5668\uFF01',callBackErrorMsg:'\u670D\u52A1\u5668\u8FD4\u56DE\u6570\u636E\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u914D\u7F6E\u9879\u4E4B\u540E\u91CD\u8BD5\u3002',uploadErrorMsg:'\u622A\u56FE\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u7AEF\u73AF\u5883! '},insertcode:{as3:'ActionScript 3',bash:'Bash/Shell',cpp:'C/C++',css:'CSS',cf:'ColdFusion',"c#":'C#',delphi:'Delphi',diff:'Diff',erlang:'Erlang',groovy:'Groovy',html:'HTML',java:'Java',jfx:'JavaFX',js:'JavaScript',pl:'Perl',php:'PHP',plain:'Plain Text',ps:'PowerShell',python:'Python',ruby:'Ruby',scala:'Scala',sql:'SQL',vb:'Visual Basic',xml:'XML'},confirmClear:'\u786E\u5B9A\u6E05\u7A7A\u5F53\u524D\u6587\u6863\u4E48\uFF1F',contextMenu:{delete:'\u5220\u9664',selectall:'\u5168\u9009',deletecode:'\u5220\u9664\u4EE3\u7801',cleardoc:'\u6E05\u7A7A\u6587\u6863',confirmclear:'\u786E\u5B9A\u6E05\u7A7A\u5F53\u524D\u6587\u6863\u4E48\uFF1F',unlink:'\u5220\u9664\u8D85\u94FE\u63A5',paragraph:'\u6BB5\u843D\u683C\u5F0F',edittable:'\u8868\u683C\u5C5E\u6027',aligntd:'\u5355\u5143\u683C\u5BF9\u9F50\u65B9\u5F0F',aligntable:'\u8868\u683C\u5BF9\u9F50\u65B9\u5F0F',tableleft:'\u5DE6\u6D6E\u52A8',tablecenter:'\u5C45\u4E2D\u663E\u793A',tableright:'\u53F3\u6D6E\u52A8',edittd:'\u5355\u5143\u683C\u5C5E\u6027',setbordervisible:'\u8BBE\u7F6E\u8868\u683C\u8FB9\u7EBF\u53EF\u89C1',justifyleft:'\u5DE6\u5BF9\u9F50',justifyright:'\u53F3\u5BF9\u9F50',justifycenter:'\u5C45\u4E2D\u5BF9\u9F50',justifyjustify:'\u4E24\u7AEF\u5BF9\u9F50',table:'\u8868\u683C',inserttable:'\u63D2\u5165\u8868\u683C',deletetable:'\u5220\u9664\u8868\u683C',insertparagraphbefore:'\u524D\u63D2\u5165\u6BB5\u843D',insertparagraphafter:'\u540E\u63D2\u5165\u6BB5\u843D',deleterow:'\u5220\u9664\u5F53\u524D\u884C',deletecol:'\u5220\u9664\u5F53\u524D\u5217',insertrow:'\u524D\u63D2\u5165\u884C',insertcol:'\u5DE6\u63D2\u5165\u5217',insertrownext:'\u540E\u63D2\u5165\u884C',insertcolnext:'\u53F3\u63D2\u5165\u5217',insertcaption:'\u63D2\u5165\u8868\u683C\u540D\u79F0',deletecaption:'\u5220\u9664\u8868\u683C\u540D\u79F0',inserttitle:'\u63D2\u5165\u8868\u683C\u6807\u9898\u884C',deletetitle:'\u5220\u9664\u8868\u683C\u6807\u9898\u884C',inserttitlecol:'\u63D2\u5165\u8868\u683C\u6807\u9898\u5217',deletetitlecol:'\u5220\u9664\u8868\u683C\u6807\u9898\u5217',averageDiseRow:'\u5E73\u5747\u5206\u5E03\u5404\u884C',averageDisCol:'\u5E73\u5747\u5206\u5E03\u5404\u5217',mergeright:'\u5411\u53F3\u5408\u5E76',mergeleft:'\u5411\u5DE6\u5408\u5E76',mergedown:'\u5411\u4E0B\u5408\u5E76',mergecells:'\u5408\u5E76\u5355\u5143\u683C',splittocells:'\u5B8C\u5168\u62C6\u5206\u5355\u5143\u683C',splittocols:'\u62C6\u5206\u6210\u5217',splittorows:'\u62C6\u5206\u6210\u884C',tablesort:'\u8868\u683C\u6392\u5E8F',enablesort:'\u8BBE\u7F6E\u8868\u683C\u53EF\u6392\u5E8F',disablesort:'\u53D6\u6D88\u8868\u683C\u53EF\u6392\u5E8F',reversecurrent:'\u9006\u5E8F\u5F53\u524D',orderbyasc:'\u6309ASCII\u5B57\u7B26\u5347\u5E8F',reversebyasc:'\u6309ASCII\u5B57\u7B26\u964D\u5E8F',orderbynum:'\u6309\u6570\u503C\u5927\u5C0F\u5347\u5E8F',reversebynum:'\u6309\u6570\u503C\u5927\u5C0F\u964D\u5E8F',borderbk:'\u8FB9\u6846\u5E95\u7EB9',setcolor:'\u8868\u683C\u9694\u884C\u53D8\u8272',unsetcolor:'\u53D6\u6D88\u8868\u683C\u9694\u884C\u53D8\u8272',setbackground:'\u9009\u533A\u80CC\u666F\u9694\u884C',unsetbackground:'\u53D6\u6D88\u9009\u533A\u80CC\u666F',redandblue:'\u7EA2\u84DD\u76F8\u95F4',threecolorgradient:'\u4E09\u8272\u6E10\u53D8',copy:'\u590D\u5236(Ctrl + c)',copymsg:'\u6D4F\u89C8\u5668\u4E0D\u652F\u6301,\u8BF7\u4F7F\u7528 \'Ctrl + c\'',paste:'\u7C98\u8D34(Ctrl + v)',pastemsg:'\u6D4F\u89C8\u5668\u4E0D\u652F\u6301,\u8BF7\u4F7F\u7528 \'Ctrl + v\''},copymsg:'\u6D4F\u89C8\u5668\u4E0D\u652F\u6301,\u8BF7\u4F7F\u7528 \'Ctrl + c\'',pastemsg:'\u6D4F\u89C8\u5668\u4E0D\u652F\u6301,\u8BF7\u4F7F\u7528 \'Ctrl + v\'',anthorMsg:'\u94FE\u63A5',clearColor:'\u6E05\u7A7A\u989C\u8272',standardColor:'\u6807\u51C6\u989C\u8272',themeColor:'\u4E3B\u9898\u989C\u8272',property:'\u5C5E\u6027',default:'\u9ED8\u8BA4',modify:'\u4FEE\u6539',justifyleft:'\u5DE6\u5BF9\u9F50',justifyright:'\u53F3\u5BF9\u9F50',justifycenter:'\u5C45\u4E2D',justify:'\u9ED8\u8BA4',clear:'\u6E05\u9664',anchorMsg:'\u951A\u70B9',delete:'\u5220\u9664',clickToUpload:'\u70B9\u51FB\u4E0A\u4F20',unset:'\u5C1A\u672A\u8BBE\u7F6E\u8BED\u8A00\u6587\u4EF6',t_row:'\u884C',t_col:'\u5217',more:'\u66F4\u591A',pasteOpt:'\u7C98\u8D34\u9009\u9879',pasteSourceFormat:'\u4FDD\u7559\u6E90\u683C\u5F0F',tagFormat:'\u53EA\u4FDD\u7559\u6807\u7B7E',pasteTextFormat:'\u53EA\u4FDD\u7559\u6587\u672C',autoTypeSet:{mergeLine:'\u5408\u5E76\u7A7A\u884C',delLine:'\u6E05\u9664\u7A7A\u884C',removeFormat:'\u6E05\u9664\u683C\u5F0F',indent:'\u9996\u884C\u7F29\u8FDB',alignment:'\u5BF9\u9F50\u65B9\u5F0F',imageFloat:'\u56FE\u7247\u6D6E\u52A8',removeFontsize:'\u6E05\u9664\u5B57\u53F7',removeFontFamily:'\u6E05\u9664\u5B57\u4F53',removeHtml:'\u6E05\u9664\u5197\u4F59HTML\u4EE3\u7801',pasteFilter:'\u7C98\u8D34\u8FC7\u6EE4',run:'\u6267\u884C',symbol:'\u7B26\u53F7\u8F6C\u6362',bdc2sb:'\u5168\u89D2\u8F6C\u534A\u89D2',tobdc:'\u534A\u89D2\u8F6C\u5168\u89D2'},background:{static:{lang_background_normal:'\u80CC\u666F\u8BBE\u7F6E',lang_background_local:'\u5728\u7EBF\u56FE\u7247',lang_background_set:'\u9009\u9879',lang_background_none:'\u65E0\u80CC\u666F\u8272',lang_background_colored:'\u6709\u80CC\u666F\u8272',lang_background_color:'\u989C\u8272\u8BBE\u7F6E',lang_background_netimg:'\u7F51\u7EDC\u56FE\u7247',lang_background_align:'\u5BF9\u9F50\u65B9\u5F0F',lang_background_position:'\u7CBE\u786E\u5B9A\u4F4D',repeatType:{options:['\u5C45\u4E2D','\u6A2A\u5411\u91CD\u590D','\u7EB5\u5411\u91CD\u590D','\u5E73\u94FA','\u81EA\u5B9A\u4E49']}},noUploadImage:'\u5F53\u524D\u672A\u4E0A\u4F20\u8FC7\u4EFB\u4F55\u56FE\u7247\uFF01',toggleSelect:'\u5355\u51FB\u53EF\u5207\u6362\u9009\u4E2D\u72B6\u6001\n\u539F\u56FE\u5C3A\u5BF8: '},insertimage:{static:{lang_tab_remote:'\u63D2\u5165\u56FE\u7247',lang_tab_upload:'\u672C\u5730\u4E0A\u4F20',lang_tab_online:'\u5728\u7EBF\u7BA1\u7406',lang_tab_search:'\u56FE\u7247\u641C\u7D22',lang_input_url:'\u5730 \u5740\uFF1A',lang_input_size:'\u5927 \u5C0F\uFF1A',lang_input_width:'\u5BBD\u5EA6',lang_input_height:'\u9AD8\u5EA6',lang_input_border:'\u8FB9 \u6846\uFF1A',lang_input_vhspace:'\u8FB9 \u8DDD\uFF1A',lang_input_title:'\u63CF \u8FF0\uFF1A',lang_input_align:'\u56FE\u7247\u6D6E\u52A8\u65B9\u5F0F\uFF1A',lang_imgLoading:'\u3000\u56FE\u7247\u52A0\u8F7D\u4E2D\u2026\u2026',lang_start_upload:'\u5F00\u59CB\u4E0A\u4F20',lock:{title:'\u9501\u5B9A\u5BBD\u9AD8\u6BD4\u4F8B'},searchType:{title:'\u56FE\u7247\u7C7B\u578B',options:['\u65B0\u95FB','\u58C1\u7EB8','\u8868\u60C5','\u5934\u50CF']},searchTxt:{value:'\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD'},searchBtn:{value:'\u767E\u5EA6\u4E00\u4E0B'},searchReset:{value:'\u6E05\u7A7A\u641C\u7D22'},noneAlign:{title:'\u65E0\u6D6E\u52A8'},leftAlign:{title:'\u5DE6\u6D6E\u52A8'},rightAlign:{title:'\u53F3\u6D6E\u52A8'},centerAlign:{title:'\u5C45\u4E2D\u72EC\u5360\u4E00\u884C'}},uploadSelectFile:'\u70B9\u51FB\u9009\u62E9\u56FE\u7247',uploadAddFile:'\u7EE7\u7EED\u6DFB\u52A0',uploadStart:'\u5F00\u59CB\u4E0A\u4F20',uploadPause:'\u6682\u505C\u4E0A\u4F20',uploadContinue:'\u7EE7\u7EED\u4E0A\u4F20',uploadRetry:'\u91CD\u8BD5\u4E0A\u4F20',uploadDelete:'\u5220\u9664',uploadTurnLeft:'\u5411\u5DE6\u65CB\u8F6C',uploadTurnRight:'\u5411\u53F3\u65CB\u8F6C',uploadPreview:'\u9884\u89C8\u4E2D',uploadNoPreview:'\u4E0D\u80FD\u9884\u89C8',updateStatusReady:'\u9009\u4E2D_\u5F20\u56FE\u7247\uFF0C\u5171_KB\u3002',updateStatusConfirm:'\u5DF2\u6210\u529F\u4E0A\u4F20_\u5F20\u7167\u7247\uFF0C_\u5F20\u7167\u7247\u4E0A\u4F20\u5931\u8D25',updateStatusFinish:'\u5171_\u5F20\uFF08_KB\uFF09\uFF0C_\u5F20\u4E0A\u4F20\u6210\u529F',updateStatusError:'\uFF0C_\u5F20\u4E0A\u4F20\u5931\u8D25\u3002',errorNotSupport:'WebUploader \u4E0D\u652F\u6301\u60A8\u7684\u6D4F\u89C8\u5668\uFF01\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662FIE\u6D4F\u89C8\u5668\uFF0C\u8BF7\u5C1D\u8BD5\u5347\u7EA7 flash \u64AD\u653E\u5668\u3002',errorLoadConfig:'\u540E\u7AEF\u914D\u7F6E\u9879\u6CA1\u6709\u6B63\u5E38\u52A0\u8F7D\uFF0C\u4E0A\u4F20\u63D2\u4EF6\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',errorExceedSize:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA',errorFileType:'\u6587\u4EF6\u683C\u5F0F\u4E0D\u5141\u8BB8',errorInterrupt:'\u6587\u4EF6\u4F20\u8F93\u4E2D\u65AD',errorUploadRetry:'\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5',errorHttp:'http\u8BF7\u6C42\u9519\u8BEF',errorServerUpload:'\u670D\u52A1\u5668\u8FD4\u56DE\u51FA\u9519',remoteLockError:'\u5BBD\u9AD8\u4E0D\u6B63\u786E,\u4E0D\u80FD\u6240\u5B9A\u6BD4\u4F8B',numError:'\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u957F\u5EA6\u6216\u8005\u5BBD\u5EA6\u503C\uFF01\u4F8B\u5982\uFF1A123\uFF0C400',imageUrlError:'\u4E0D\u5141\u8BB8\u7684\u56FE\u7247\u683C\u5F0F\u6216\u8005\u56FE\u7247\u57DF\uFF01',imageLoadError:'\u56FE\u7247\u52A0\u8F7D\u5931\u8D25\uFF01\u8BF7\u68C0\u67E5\u94FE\u63A5\u5730\u5740\u6216\u7F51\u7EDC\u72B6\u6001\uFF01',searchRemind:'\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD',searchLoading:'\u56FE\u7247\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u2026\u2026',searchRetry:' :( \uFF0C\u62B1\u6B49\uFF0C\u6CA1\u6709\u627E\u5230\u56FE\u7247\uFF01\u8BF7\u91CD\u8BD5\u4E00\u6B21\uFF01'},attachment:{static:{lang_tab_upload:'\u4E0A\u4F20\u9644\u4EF6',lang_tab_online:'\u5728\u7EBF\u9644\u4EF6',lang_start_upload:'\u5F00\u59CB\u4E0A\u4F20',lang_drop_remind:'\u53EF\u4EE5\u5C06\u6587\u4EF6\u62D6\u5230\u8FD9\u91CC\uFF0C\u5355\u6B21\u6700\u591A\u53EF\u9009100\u4E2A\u6587\u4EF6'},uploadSelectFile:'\u70B9\u51FB\u9009\u62E9\u6587\u4EF6',uploadAddFile:'\u7EE7\u7EED\u6DFB\u52A0',uploadStart:'\u5F00\u59CB\u4E0A\u4F20',uploadPause:'\u6682\u505C\u4E0A\u4F20',uploadContinue:'\u7EE7\u7EED\u4E0A\u4F20',uploadRetry:'\u91CD\u8BD5\u4E0A\u4F20',uploadDelete:'\u5220\u9664',uploadTurnLeft:'\u5411\u5DE6\u65CB\u8F6C',uploadTurnRight:'\u5411\u53F3\u65CB\u8F6C',uploadPreview:'\u9884\u89C8\u4E2D',updateStatusReady:'\u9009\u4E2D_\u4E2A\u6587\u4EF6\uFF0C\u5171_KB\u3002',updateStatusConfirm:'\u5DF2\u6210\u529F\u4E0A\u4F20_\u4E2A\u6587\u4EF6\uFF0C_\u4E2A\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25',updateStatusFinish:'\u5171_\u4E2A\uFF08_KB\uFF09\uFF0C_\u4E2A\u4E0A\u4F20\u6210\u529F',updateStatusError:'\uFF0C_\u5F20\u4E0A\u4F20\u5931\u8D25\u3002',errorNotSupport:'WebUploader \u4E0D\u652F\u6301\u60A8\u7684\u6D4F\u89C8\u5668\uFF01\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662FIE\u6D4F\u89C8\u5668\uFF0C\u8BF7\u5C1D\u8BD5\u5347\u7EA7 flash \u64AD\u653E\u5668\u3002',errorLoadConfig:'\u540E\u7AEF\u914D\u7F6E\u9879\u6CA1\u6709\u6B63\u5E38\u52A0\u8F7D\uFF0C\u4E0A\u4F20\u63D2\u4EF6\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',errorExceedSize:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA',errorFileType:'\u6587\u4EF6\u683C\u5F0F\u4E0D\u5141\u8BB8',errorInterrupt:'\u6587\u4EF6\u4F20\u8F93\u4E2D\u65AD',errorUploadRetry:'\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5',errorHttp:'http\u8BF7\u6C42\u9519\u8BEF',errorServerUpload:'\u670D\u52A1\u5668\u8FD4\u56DE\u51FA\u9519'},insertvideo:{static:{lang_tab_insertV:'\u63D2\u5165\u89C6\u9891',lang_tab_searchV:'\u641C\u7D22\u89C6\u9891',lang_tab_uploadV:'\u4E0A\u4F20\u89C6\u9891',lang_video_url:'\u89C6\u9891\u7F51\u5740',lang_video_size:'\u89C6\u9891\u5C3A\u5BF8',lang_videoW:'\u5BBD\u5EA6',lang_videoH:'\u9AD8\u5EA6',lang_alignment:'\u5BF9\u9F50\u65B9\u5F0F',videoSearchTxt:{value:'\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57\uFF01'},videoType:{options:['\u5168\u90E8','\u70ED\u95E8','\u5A31\u4E50','\u641E\u7B11','\u4F53\u80B2','\u79D1\u6280','\u7EFC\u827A']},videoSearchBtn:{value:'\u767E\u5EA6\u4E00\u4E0B'},videoSearchReset:{value:'\u6E05\u7A7A\u7ED3\u679C'},lang_input_fileStatus:' \u5F53\u524D\u672A\u4E0A\u4F20\u6587\u4EF6',startUpload:{style:'background:url(upload.png) no-repeat;'},lang_upload_size:'\u89C6\u9891\u5C3A\u5BF8',lang_upload_width:'\u5BBD\u5EA6',lang_upload_height:'\u9AD8\u5EA6',lang_upload_alignment:'\u5BF9\u9F50\u65B9\u5F0F',lang_format_advice:'\u5EFA\u8BAE\u4F7F\u7528mp4\u683C\u5F0F.'},numError:'\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u503C\uFF0C\u5982123,400',floatLeft:'\u5DE6\u6D6E\u52A8',floatRight:'\u53F3\u6D6E\u52A8','"default"':'\u9ED8\u8BA4',block:'\u72EC\u5360\u4E00\u884C',urlError:'\u8F93\u5165\u7684\u89C6\u9891\u5730\u5740\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u518D\u8BD5\uFF01',loading:' &nbsp;\u89C6\u9891\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7B49\u5F85\u2026\u2026',clickToSelect:'\u70B9\u51FB\u9009\u4E2D',goToSource:'\u8BBF\u95EE\u6E90\u89C6\u9891',noVideo:' &nbsp; &nbsp;\u62B1\u6B49\uFF0C\u627E\u4E0D\u5230\u5BF9\u5E94\u7684\u89C6\u9891\uFF0C\u8BF7\u91CD\u8BD5\uFF01',browseFiles:'\u6D4F\u89C8\u6587\u4EF6',uploadSuccess:'\u4E0A\u4F20\u6210\u529F!',delSuccessFile:'\u4ECE\u6210\u529F\u961F\u5217\u4E2D\u79FB\u9664',delFailSaveFile:'\u79FB\u9664\u4FDD\u5B58\u5931\u8D25\u6587\u4EF6',statusPrompt:' \u4E2A\u6587\u4EF6\u5DF2\u4E0A\u4F20\uFF01 ',flashVersionError:'\u5F53\u524DFlash\u7248\u672C\u8FC7\u4F4E\uFF0C\u8BF7\u66F4\u65B0FlashPlayer\u540E\u91CD\u8BD5\uFF01',flashLoadingError:'Flash\u52A0\u8F7D\u5931\u8D25!\u8BF7\u68C0\u67E5\u8DEF\u5F84\u6216\u7F51\u7EDC\u72B6\u6001',fileUploadReady:'\u7B49\u5F85\u4E0A\u4F20\u2026\u2026',delUploadQueue:'\u4ECE\u4E0A\u4F20\u961F\u5217\u4E2D\u79FB\u9664',limitPrompt1:'\u5355\u6B21\u4E0D\u80FD\u9009\u62E9\u8D85\u8FC7',limitPrompt2:'\u4E2A\u6587\u4EF6\uFF01\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01',delFailFile:'\u79FB\u9664\u5931\u8D25\u6587\u4EF6',fileSizeLimit:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA\u9650\u5236\uFF01',emptyFile:'\u7A7A\u6587\u4EF6\u65E0\u6CD5\u4E0A\u4F20\uFF01',fileTypeError:'\u6587\u4EF6\u7C7B\u578B\u4E0D\u5141\u8BB8\uFF01',unknownError:'\u672A\u77E5\u9519\u8BEF\uFF01',fileUploading:'\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7B49\u5F85\u2026\u2026',cancelUpload:'\u53D6\u6D88\u4E0A\u4F20',netError:'\u7F51\u7EDC\u9519\u8BEF',failUpload:'\u4E0A\u4F20\u5931\u8D25!',serverIOError:'\u670D\u52A1\u5668IO\u9519\u8BEF\uFF01',noAuthority:'\u65E0\u6743\u9650\uFF01',fileNumLimit:'\u4E0A\u4F20\u4E2A\u6570\u9650\u5236',failCheck:'\u9A8C\u8BC1\u5931\u8D25\uFF0C\u672C\u6B21\u4E0A\u4F20\u88AB\u8DF3\u8FC7\uFF01',fileCanceling:'\u53D6\u6D88\u4E2D\uFF0C\u8BF7\u7B49\u5F85\u2026\u2026',stopUploading:'\u4E0A\u4F20\u5DF2\u505C\u6B62\u2026\u2026',uploadSelectFile:'\u70B9\u51FB\u9009\u62E9\u6587\u4EF6',uploadAddFile:'\u7EE7\u7EED\u6DFB\u52A0',uploadStart:'\u5F00\u59CB\u4E0A\u4F20',uploadPause:'\u6682\u505C\u4E0A\u4F20',uploadContinue:'\u7EE7\u7EED\u4E0A\u4F20',uploadRetry:'\u91CD\u8BD5\u4E0A\u4F20',uploadDelete:'\u5220\u9664',uploadTurnLeft:'\u5411\u5DE6\u65CB\u8F6C',uploadTurnRight:'\u5411\u53F3\u65CB\u8F6C',uploadPreview:'\u9884\u89C8\u4E2D',updateStatusReady:'\u9009\u4E2D_\u4E2A\u6587\u4EF6\uFF0C\u5171_KB\u3002',updateStatusConfirm:'\u6210\u529F\u4E0A\u4F20_\u4E2A\uFF0C_\u4E2A\u5931\u8D25',updateStatusFinish:'\u5171_\u4E2A(_KB)\uFF0C_\u4E2A\u6210\u529F\u4E0A\u4F20',updateStatusError:'\uFF0C_\u5F20\u4E0A\u4F20\u5931\u8D25\u3002',errorNotSupport:'WebUploader \u4E0D\u652F\u6301\u60A8\u7684\u6D4F\u89C8\u5668\uFF01\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662FIE\u6D4F\u89C8\u5668\uFF0C\u8BF7\u5C1D\u8BD5\u5347\u7EA7 flash \u64AD\u653E\u5668\u3002',errorLoadConfig:'\u540E\u7AEF\u914D\u7F6E\u9879\u6CA1\u6709\u6B63\u5E38\u52A0\u8F7D\uFF0C\u4E0A\u4F20\u63D2\u4EF6\u4E0D\u80FD\u6B63\u5E38\u4F7F\u7528\uFF01',errorExceedSize:'\u6587\u4EF6\u5927\u5C0F\u8D85\u51FA',errorFileType:'\u6587\u4EF6\u683C\u5F0F\u4E0D\u5141\u8BB8',errorInterrupt:'\u6587\u4EF6\u4F20\u8F93\u4E2D\u65AD',errorUploadRetry:'\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5',errorHttp:'http\u8BF7\u6C42\u9519\u8BEF',errorServerUpload:'\u670D\u52A1\u5668\u8FD4\u56DE\u51FA\u9519'},webapp:{tip1:'\u672C\u529F\u80FD\u7531\u767E\u5EA6APP\u63D0\u4F9B\uFF0C\u5982\u770B\u5230\u6B64\u9875\u9762\uFF0C\u8BF7\u5404\u4F4D\u7AD9\u957F\u9996\u5148\u7533\u8BF7\u767E\u5EA6APPKey!',tip2:'\u7533\u8BF7\u5B8C\u6210\u4E4B\u540E\u8BF7\u81F3ueditor.config.js\u4E2D\u914D\u7F6E\u83B7\u5F97\u7684appkey! ',applyFor:'\u70B9\u6B64\u7533\u8BF7',anthorApi:'\u767E\u5EA6API'},template:{static:{lang_template_bkcolor:'\u80CC\u666F\u989C\u8272',lang_template_clear:'\u4FDD\u7559\u539F\u6709\u5185\u5BB9',lang_template_select:'\u9009\u62E9\u6A21\u677F'},blank:'\u7A7A\u767D\u6587\u6863',blog:'\u535A\u5BA2\u6587\u7AE0',resume:'\u4E2A\u4EBA\u7B80\u5386',richText:'\u56FE\u6587\u6DF7\u6392',sciPapers:'\u79D1\u6280\u8BBA\u6587'},scrawl:{static:{lang_input_previousStep:'\u4E0A\u4E00\u6B65',lang_input_nextsStep:'\u4E0B\u4E00\u6B65',lang_input_clear:'\u6E05\u7A7A',lang_input_addPic:'\u6DFB\u52A0\u80CC\u666F',lang_input_ScalePic:'\u7F29\u653E\u80CC\u666F',lang_input_removePic:'\u5220\u9664\u80CC\u666F',J_imgTxt:{title:'\u6DFB\u52A0\u80CC\u666F\u56FE\u7247'}},noScarwl:'\u5C1A\u672A\u4F5C\u753B\uFF0C\u767D\u7EB8\u4E00\u5F20~',scrawlUpLoading:'\u6D82\u9E26\u4E0A\u4F20\u4E2D,\u522B\u6025\u54E6~',continueBtn:'\u7EE7\u7EED',imageError:'\u7CDF\u7CD5\uFF0C\u56FE\u7247\u8BFB\u53D6\u5931\u8D25\u4E86\uFF01',backgroundUploading:'\u80CC\u666F\u56FE\u7247\u4E0A\u4F20\u4E2D,\u522B\u6025\u54E6~'},music:{static:{lang_input_tips:'\u8F93\u5165\u6B4C\u624B/\u6B4C\u66F2/\u4E13\u8F91\uFF0C\u641C\u7D22\u60A8\u611F\u5174\u8DA3\u7684\u97F3\u4E50\uFF01',J_searchBtn:{value:'\u641C\u7D22\u6B4C\u66F2'}},emptyTxt:'\u672A\u641C\u7D22\u5230\u76F8\u5173\u97F3\u4E50\u7ED3\u679C\uFF0C\u8BF7\u6362\u4E00\u4E2A\u5173\u952E\u8BCD\u8BD5\u8BD5\u3002',chapter:'\u6B4C\u66F2',singer:'\u6B4C\u624B',special:'\u4E13\u8F91',listenTest:'\u8BD5\u542C'},anchor:{static:{lang_input_anchorName:'\u951A\u70B9\u540D\u5B57\uFF1A'}},charts:{static:{lang_data_source:'\u6570\u636E\u6E90\uFF1A',lang_chart_format:'\u56FE\u8868\u683C\u5F0F\uFF1A',lang_data_align:'\u6570\u636E\u5BF9\u9F50\u65B9\u5F0F',lang_chart_align_same:'\u6570\u636E\u6E90\u4E0E\u56FE\u8868X\u8F74Y\u8F74\u4E00\u81F4',lang_chart_align_reverse:'\u6570\u636E\u6E90\u4E0E\u56FE\u8868X\u8F74Y\u8F74\u76F8\u53CD',lang_chart_title:'\u56FE\u8868\u6807\u9898',lang_chart_main_title:'\u4E3B\u6807\u9898\uFF1A',lang_chart_sub_title:'\u5B50\u6807\u9898\uFF1A',lang_chart_x_title:'X\u8F74\u6807\u9898\uFF1A',lang_chart_y_title:'Y\u8F74\u6807\u9898\uFF1A',lang_chart_tip:'\u63D0\u793A\u6587\u5B57',lang_cahrt_tip_prefix:'\u63D0\u793A\u6587\u5B57\u524D\u7F00\uFF1A',lang_cahrt_tip_description:'\u4EC5\u997C\u56FE\u6709\u6548\uFF0C \u5F53\u9F20\u6807\u79FB\u52A8\u5230\u997C\u56FE\u4E2D\u76F8\u5E94\u7684\u5757\u4E0A\u65F6\uFF0C\u63D0\u793A\u6846\u5185\u7684\u6587\u5B57\u7684\u524D\u7F00',lang_chart_data_unit:'\u6570\u636E\u5355\u4F4D',lang_chart_data_unit_title:'\u5355\u4F4D\uFF1A',lang_chart_data_unit_description:'\u663E\u793A\u5728\u6BCF\u4E2A\u6570\u636E\u70B9\u4E0A\u7684\u6570\u636E\u7684\u5355\u4F4D\uFF0C \u6BD4\u5982\uFF1A \u6E29\u5EA6\u7684\u5355\u4F4D \u2103',lang_chart_type:'\u56FE\u8868\u7C7B\u578B\uFF1A',lang_prev_btn:'\u4E0A\u4E00\u4E2A',lang_next_btn:'\u4E0B\u4E00\u4E2A'}},emotion:{static:{lang_input_choice:'\u7CBE\u9009',lang_input_Tuzki:'\u5154\u65AF\u57FA',lang_input_BOBO:'BOBO',lang_input_lvdouwa:'\u7EFF\u8C46\u86D9',lang_input_babyCat:'baby\u732B',lang_input_bubble:'\u6CE1\u6CE1',lang_input_youa:'\u6709\u554A'}},gmap:{static:{lang_input_address:'\u5730\u5740',lang_input_search:'\u641C\u7D22',address:{value:'\u5317\u4EAC'}},searchError:'\u65E0\u6CD5\u5B9A\u4F4D\u5230\u8BE5\u5730\u5740!'},help:{static:{lang_input_about:'\u5173\u4E8EUEditor',lang_input_shortcuts:'\u5FEB\u6377\u952E',lang_input_introduction:'UEditor\u662F\u7531\u767E\u5EA6web\u524D\u7AEF\u7814\u53D1\u90E8\u5F00\u53D1\u7684\u6240\u89C1\u5373\u6240\u5F97\u5BCC\u6587\u672Cweb\u7F16\u8F91\u5668\uFF0C\u5177\u6709\u8F7B\u91CF\uFF0C\u53EF\u5B9A\u5236\uFF0C\u6CE8\u91CD\u7528\u6237\u4F53\u9A8C\u7B49\u7279\u70B9\u3002\u5F00\u6E90\u57FA\u4E8EBSD\u534F\u8BAE\uFF0C\u5141\u8BB8\u81EA\u7531\u4F7F\u7528\u548C\u4FEE\u6539\u4EE3\u7801\u3002',lang_Txt_shortcuts:'\u5FEB\u6377\u952E',lang_Txt_func:'\u529F\u80FD',lang_Txt_bold:'\u7ED9\u9009\u4E2D\u5B57\u8BBE\u7F6E\u4E3A\u52A0\u7C97',lang_Txt_copy:'\u590D\u5236\u9009\u4E2D\u5185\u5BB9',lang_Txt_cut:'\u526A\u5207\u9009\u4E2D\u5185\u5BB9',lang_Txt_Paste:'\u7C98\u8D34',lang_Txt_undo:'\u91CD\u65B0\u6267\u884C\u4E0A\u6B21\u64CD\u4F5C',lang_Txt_redo:'\u64A4\u9500\u4E0A\u4E00\u6B21\u64CD\u4F5C',lang_Txt_italic:'\u7ED9\u9009\u4E2D\u5B57\u8BBE\u7F6E\u4E3A\u659C\u4F53',lang_Txt_underline:'\u7ED9\u9009\u4E2D\u5B57\u52A0\u4E0B\u5212\u7EBF',lang_Txt_selectAll:'\u5168\u90E8\u9009\u4E2D',lang_Txt_visualEnter:'\u8F6F\u56DE\u8F66',lang_Txt_fullscreen:'\u5168\u5C4F'}},insertframe:{static:{lang_input_address:'\u5730\u5740\uFF1A',lang_input_width:'\u5BBD\u5EA6\uFF1A',lang_input_height:'\u9AD8\u5EA6\uFF1A',lang_input_isScroll:'\u5141\u8BB8\u6EDA\u52A8\u6761\uFF1A',lang_input_frameborder:'\u663E\u793A\u6846\u67B6\u8FB9\u6846\uFF1A',lang_input_alignMode:'\u5BF9\u9F50\u65B9\u5F0F\uFF1A',align:{title:'\u5BF9\u9F50\u65B9\u5F0F',options:['\u9ED8\u8BA4','\u5DE6\u5BF9\u9F50','\u53F3\u5BF9\u9F50','\u5C45\u4E2D']}},enterAddress:'\u8BF7\u8F93\u5165\u5730\u5740!'},link:{static:{lang_input_text:'\u6587\u672C\u5185\u5BB9\uFF1A',lang_input_url:'\u94FE\u63A5\u5730\u5740\uFF1A',lang_input_title:'\u6807\u9898\uFF1A',lang_input_target:'\u662F\u5426\u5728\u65B0\u7A97\u53E3\u6253\u5F00\uFF1A'},validLink:'\u53EA\u652F\u6301\u9009\u4E2D\u4E00\u4E2A\u94FE\u63A5\u65F6\u751F\u6548',httpPrompt:'\u60A8\u8F93\u5165\u7684\u8D85\u94FE\u63A5\u4E2D\u4E0D\u5305\u542Bhttp\u7B49\u534F\u8BAE\u540D\u79F0\uFF0C\u9ED8\u8BA4\u5C06\u4E3A\u60A8\u6DFB\u52A0http://\u524D\u7F00'},map:{static:{lang_city:'\u57CE\u5E02',lang_address:'\u5730\u5740',city:{value:'\u5317\u4EAC'},lang_search:'\u641C\u7D22',lang_dynamicmap:'\u63D2\u5165\u52A8\u6001\u5730\u56FE'},cityMsg:'\u8BF7\u9009\u62E9\u57CE\u5E02',errorMsg:'\u62B1\u6B49\uFF0C\u627E\u4E0D\u5230\u8BE5\u4F4D\u7F6E\uFF01'},searchreplace:{static:{lang_tab_search:'\u67E5\u627E',lang_tab_replace:'\u66FF\u6362',lang_search1:'\u67E5\u627E',lang_search2:'\u67E5\u627E',lang_replace:'\u66FF\u6362',lang_searchReg:'\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u6DFB\u52A0\u524D\u540E\u659C\u6760\u6807\u793A\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u4F8B\u5982\u201C/\u8868\u8FBE\u5F0F/\u201D',lang_searchReg1:'\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u6DFB\u52A0\u524D\u540E\u659C\u6760\u6807\u793A\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u4F8B\u5982\u201C/\u8868\u8FBE\u5F0F/\u201D',lang_case_sensitive1:'\u533A\u5206\u5927\u5C0F\u5199',lang_case_sensitive2:'\u533A\u5206\u5927\u5C0F\u5199',nextFindBtn:{value:'\u4E0B\u4E00\u4E2A'},preFindBtn:{value:'\u4E0A\u4E00\u4E2A'},nextReplaceBtn:{value:'\u4E0B\u4E00\u4E2A'},preReplaceBtn:{value:'\u4E0A\u4E00\u4E2A'},repalceBtn:{value:'\u66FF\u6362'},repalceAllBtn:{value:'\u5168\u90E8\u66FF\u6362'}},getEnd:'\u5DF2\u7ECF\u641C\u7D22\u5230\u6587\u7AE0\u672B\u5C3E\uFF01',getStart:'\u5DF2\u7ECF\u641C\u7D22\u5230\u6587\u7AE0\u5934\u90E8',countMsg:'\u603B\u5171\u66FF\u6362\u4E86{#count}\u5904\uFF01'},snapscreen:{static:{lang_showMsg:'\u622A\u56FE\u529F\u80FD\u9700\u8981\u9996\u5148\u5B89\u88C5UEditor\u622A\u56FE\u63D2\u4EF6\uFF01 ',lang_download:'\u70B9\u6B64\u4E0B\u8F7D',lang_step1:'\u7B2C\u4E00\u6B65\uFF0C\u4E0B\u8F7DUEditor\u622A\u56FE\u63D2\u4EF6\u5E76\u8FD0\u884C\u5B89\u88C5\u3002',lang_step2:'\u7B2C\u4E8C\u6B65\uFF0C\u63D2\u4EF6\u5B89\u88C5\u5B8C\u6210\u540E\u5373\u53EF\u4F7F\u7528\uFF0C\u5982\u4E0D\u751F\u6548\uFF0C\u8BF7\u91CD\u542F\u6D4F\u89C8\u5668\u540E\u518D\u8BD5\uFF01'}},spechars:{static:{},tsfh:'\u7279\u6B8A\u5B57\u7B26',lmsz:'\u7F57\u9A6C\u5B57\u7B26',szfh:'\u6570\u5B66\u5B57\u7B26',rwfh:'\u65E5\u6587\u5B57\u7B26',xlzm:'\u5E0C\u814A\u5B57\u6BCD',ewzm:'\u4FC4\u6587\u5B57\u7B26',pyzm:'\u62FC\u97F3\u5B57\u6BCD',yyyb:'\u82F1\u8BED\u97F3\u6807',zyzf:'\u5176\u4ED6'},edittable:{static:{lang_tableStyle:'\u8868\u683C\u6837\u5F0F',lang_insertCaption:'\u6DFB\u52A0\u8868\u683C\u540D\u79F0\u884C',lang_insertTitle:'\u6DFB\u52A0\u8868\u683C\u6807\u9898\u884C',lang_insertTitleCol:'\u6DFB\u52A0\u8868\u683C\u6807\u9898\u5217',lang_orderbycontent:'\u4F7F\u8868\u683C\u5185\u5BB9\u53EF\u6392\u5E8F',lang_tableSize:'\u81EA\u52A8\u8C03\u6574\u8868\u683C\u5C3A\u5BF8',lang_autoSizeContent:'\u6309\u8868\u683C\u6587\u5B57\u81EA\u9002\u5E94',lang_autoSizePage:'\u6309\u9875\u9762\u5BBD\u5EA6\u81EA\u9002\u5E94',lang_example:'\u793A\u4F8B',lang_borderStyle:'\u8868\u683C\u8FB9\u6846',lang_color:'\u989C\u8272:'},captionName:'\u8868\u683C\u540D\u79F0',titleName:'\u6807\u9898',cellsName:'\u5185\u5BB9',errorMsg:'\u6709\u5408\u5E76\u5355\u5143\u683C\uFF0C\u4E0D\u53EF\u6392\u5E8F'},edittip:{static:{lang_delRow:'\u5220\u9664\u6574\u884C',lang_delCol:'\u5220\u9664\u6574\u5217'}},edittd:{static:{lang_tdBkColor:'\u80CC\u666F\u989C\u8272:'}},formula:{static:{}},wordimage:{static:{lang_resave:'\u8F6C\u5B58\u6B65\u9AA4',uploadBtn:{src:'upload.png',alt:'\u4E0A\u4F20'},clipboard:{style:'background: url(copy.png) -153px -1px no-repeat;'},lang_step:'1\u3001\u70B9\u51FB\u9876\u90E8\u590D\u5236\u6309\u94AE\uFF0C\u5C06\u5730\u5740\u590D\u5236\u5230\u526A\u8D34\u677F\uFF1B2\u3001\u70B9\u51FB\u6DFB\u52A0\u7167\u7247\u6309\u94AE\uFF0C\u5728\u5F39\u51FA\u7684\u5BF9\u8BDD\u6846\u4E2D\u4F7F\u7528Ctrl+V\u7C98\u8D34\u5730\u5740\uFF1B3\u3001\u70B9\u51FB\u6253\u5F00\u540E\u9009\u62E9\u56FE\u7247\u4E0A\u4F20\u6D41\u7A0B\u3002'},fileType:'\u56FE\u7247',flashError:'FLASH\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5FLASH\u63D2\u4EF6\u662F\u5426\u6B63\u786E\u5B89\u88C5\uFF01',netError:'\u7F51\u7EDC\u8FDE\u63A5\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5\uFF01',copySuccess:'\u56FE\u7247\u5730\u5740\u5DF2\u7ECF\u590D\u5236\uFF01',flashI18n:{}},autosave:{saving:'\u4FDD\u5B58\u4E2D...',success:'\u672C\u5730\u4FDD\u5B58\u6210\u529F'}}},370:function(module,exports,__webpack_require__){__webpack_require__(371);var zhCn=__webpack_require__(369);(function(){function getListener(o,$,z){var W;return $=$.toLowerCase(),(W=o.__allListeners||z&&(o.__allListeners={}))&&(W[$]||z&&(W[$]=[]))}function getDomNode(o,$,z,W,Y,Z){var ee=W&&o[$],te;for(ee||(ee=o[z]);!ee&&(te=(te||o).parentNode);){if('BODY'==te.tagName||Z&&!Z(te))return null;ee=te[z]}return ee&&Y&&!Y(ee)?getDomNode(ee,$,z,!1,Y):ee}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,module.exports=window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE.I18N['zh-cn']=zhCn,UE._customizeUI={},UE.version='1.4.3';var dom=UE.dom={},browser=UE.browser=function(){var o=navigator.userAgent.toLowerCase(),$=window.opera,z={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(o),opera:!!$&&$.version,webkit:-1<o.indexOf(' applewebkit/'),mac:-1<o.indexOf('macintosh'),quirks:'BackCompat'==document.compatMode};z.gecko='Gecko'==navigator.product&&!z.webkit&&!z.opera&&!z.ie;var W=0;if(z.ie){var Y=o.match(/(?:msie\s([\w.]+))/),Z=o.match(/(?:trident.*rv:([\w.]+))/);W=Y&&Z&&Y[1]&&Z[1]?_Mathmax(1*Y[1],1*Z[1]):Y&&Y[1]?1*Y[1]:Z&&Z[1]?1*Z[1]:0,z.ie11Compat=11==document.documentMode,z.ie9Compat=9==document.documentMode,z.ie8=!!document.documentMode,z.ie8Compat=8==document.documentMode,z.ie7Compat=7==W&&!document.documentMode||7==document.documentMode,z.ie6Compat=7>W||z.quirks,z.ie9above=8<W,z.ie9below=9>W,z.ie11above=10<W,z.ie11below=11>W}if(z.gecko){var ee=o.match(/rv:([\d\.]+)/);ee&&(ee=ee[1].split('.'),W=1e4*ee[0]+100*(ee[1]||0)+1*(ee[2]||0))}return /chrome\/(\d+\.\d)/i.test(o)&&(z.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(o)&&!/chrome/i.test(o)&&(z.safari=+(RegExp.$1||RegExp.$2)),z.opera&&(W=parseFloat($.version())),z.webkit&&(W=parseFloat(o.match(/ applewebkit\/(\d+)/)[1])),z.version=W,z.isCompatible=!z.mobile&&(z.ie&&6<=W||z.gecko&&10801<=W||z.opera&&9.5<=W||z.air&&1<=W||z.webkit&&522<=W||!1),z}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(o,$,z){if(null!=o)if(o.length===+o.length){for(var W=0,Y=o.length;W<Y;W++)if(!1===$.call(z,o[W],W,o))return!1;}else for(var Z in o)if(o.hasOwnProperty(Z)&&!1===$.call(z,o[Z],Z,o))return!1},makeInstance:function(o){var $=new Function;return $.prototype=o,o=new $,$.prototype=null,o},extend:function(o,$,z){if($)for(var W in $)z&&o.hasOwnProperty(W)||(o[W]=$[W]);return o},extend2:function(o){for(var $=arguments,z=1,W;z<$.length;z++)for(var Y in W=$[z],W)o.hasOwnProperty(Y)||(o[Y]=W[Y]);return o},inherits:function(o,$){var z=o.prototype,W=utils.makeInstance($.prototype);return utils.extend(W,z,!0),o.prototype=W,W.constructor=o},bind:function(o,$){return function(){return o.apply($,arguments)}},defer:function(o,$,z){var W;return function(){z&&clearTimeout(W),W=setTimeout(o,$)}},indexOf:function(o,$,z){var W=-1;return z=this.isNumber(z)?z:0,this.each(o,function(Y,Z){if(Z>=z&&Y===$)return W=Z,!1}),W},removeItem:function(o,$){for(var z=0,W=o.length;z<W;z++)o[z]===$&&(o.splice(z,1),z--)},trim:function(o){return o.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,'')},listToMap:function(o){if(!o)return{};o=utils.isArray(o)?o:o.split(',');for(var $=0,W={},z;z=o[$++];)W[z.toUpperCase()]=W[z]=1;return W},unhtml:function(o,$){return o?o.replace($||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(z,W){return W?z:{"<":'&lt;',"&":'&amp;','"':'&quot;',">":'&gt;',"'":'&#39;'}[z]}):''},unhtmlForUrl:function(o,$){return o?o.replace($||/[<">']/g,function(z){return{"<":'&lt;',"&":'&amp;','"':'&quot;',">":'&gt;',"'":'&#39;'}[z]}):''},html:function(o){return o?o.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function($){return{"&lt;":'<',"&amp;":'&',"&quot;":'"',"&gt;":'>',"&#39;":'\'',"&nbsp;":' '}[$]}):''},cssStyleToDomStyle:function(){var o=document.createElement('div').style,$={float:void 0==o.cssFloat?void 0==o.styleFloat?'float':'styleFloat':'cssFloat'};return function(z){return $[z]||($[z]=z.toLowerCase().replace(/-./g,function(W){return W.charAt(1).toUpperCase()}))}}(),loadFile:function(){function o(z,W){try{for(var Y=0,Z;Z=$[Y++];)if(Z.doc===z&&Z.url==(W.src||W.href))return Z}catch(ee){return null}}var $=[];return function(z,W,Y){var Z=o(z,W);if(Z)return void(Z.ready?Y&&Y():Z.funs.push(Y));if($.push({doc:z,url:W.src||W.href,funs:[Y]}),!z.body){var ee=[];for(var te in W)'tag'!=te&&ee.push(te+'="'+W[te]+'"');return void z.write('<'+W.tag+' '+ee.join(' ')+' ></'+W.tag+'>')}if(!(W.id&&z.getElementById(W.id))){var ne=z.createElement(W.tag);for(var te in delete W.tag,W)ne.setAttribute(te,W[te]);ne.onload=ne.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(Z=o(z,W),0<Z.funs.length){Z.ready=1;for(var ae;ae=Z.funs.pop();)ae()}ne.onload=ne.onreadystatechange=null}},ne.onerror=function(){throw Error('The load '+(W.href||W.src)+' fails,check the url settings of file ueditor.config.js ')},z.getElementsByTagName('head')[0].appendChild(ne)}}}(),isEmptyObject:function(o){if(null==o)return!0;if(this.isArray(o)||this.isString(o))return 0===o.length;for(var $ in o)if(o.hasOwnProperty($))return!1;return!0},fixColor:function(o,$){if(/color/i.test(o)&&/rgba?/.test($)){var z=$.split(',');if(3<z.length)return'';$='#';for(var W=0,Y;Y=z[W++];)Y=parseInt(Y.replace(/[^\d]/gi,''),10).toString(16),$+=1==Y.length?'0'+Y:Y;$=$.toUpperCase()}return $},optCss:function(o){function $(Z,ee){if(!Z)return'';var te=Z.top,ne=Z.bottom,ae=Z.left,oe=Z.right,re='';if(!te||!ae||!ne||!oe)for(var le in Z)re+=';'+ee+'-'+le+':'+Z[le]+';';else re+=';'+ee+':'+(te==ne&&ne==ae&&ae==oe?te:te==ne&&ae==oe?te+' '+ae:ae==oe?te+' '+ae+' '+ne:te+' '+oe+' '+ne+' '+ae)+';';return re}var z,W;return o=o.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(Z,ee,te,ne){if(1==ne.split(' ').length)switch(ee){case'padding':return z||(z={}),z[te]=ne,'';case'margin':return W||(W={}),W[te]=ne,'';case'border':return'initial'==ne?'':Z;}return Z}),o+=$(z,'padding')+$(W,'margin'),o.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,'').replace(/;([ \n\r\t]+)|\1;/g,';').replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(Z,ee){return ee?ee+';;':';'})},clone:function(o,$){var z;for(var W in $=$||{},o)o.hasOwnProperty(W)&&(z=o[W],'object'==typeof z?($[W]=utils.isArray(z)?[]:{},utils.clone(o[W],$[W])):$[W]=z);return $},transUnitToPx:function(o){if(!/(pt|cm)/.test(o))return o;var $;return o.replace(/([\d.]+)(\w+)/,function(z,W,Y){o=W,$=Y}),'cm'===$?o=25*parseFloat(o):'pt'===$?o=_Mathround(96*parseFloat(o)/72):void 0,o+(o?'px':'')},domReady:function(){function o(z){z.isReady=!0;for(var W;W=$.pop();W());}var $=[];return function(z,W){W=W||window;var Y=W.document;z&&$.push(z),'complete'===Y.readyState?o(Y):(Y.isReady&&o(Y),browser.ie&&11!=browser.version?(function(){if(!Y.isReady){try{Y.documentElement.doScroll('left')}catch(Z){return void setTimeout(arguments.callee,0)}o(Y)}}(),W.attachEvent('onload',function(){o(Y)})):(Y.addEventListener('DOMContentLoaded',function(){Y.removeEventListener('DOMContentLoaded',arguments.callee,!1),o(Y)},!1),W.addEventListener('load',function(){o(Y)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(o,$,z){var W,Y;return void 0===$||$&&$.nodeType&&9==$.nodeType?(z=$&&$.nodeType&&9==$.nodeType?$:z||document,W=z.indexList||(z.indexList={}),Y=W[o],void 0===Y?void 0:z.styleSheets[Y].cssText):(z=z||document,W=z.indexList||(z.indexList={}),Y=W[o],''===$?void 0!==Y&&(z.styleSheets[Y].cssText='',delete W[o],!0):void(void 0===Y?(sheetStyle=z.createStyleSheet('',Y=z.styleSheets.length),W[o]=Y):sheetStyle=z.styleSheets[Y],sheetStyle.cssText=$))}:function(o,$,z){var Y;return void 0===$||$&&$.nodeType&&9==$.nodeType?(z=$&&$.nodeType&&9==$.nodeType?$:z||document,Y=z.getElementById(o),Y?Y.innerHTML:void 0):(z=z||document,Y=z.getElementById(o),''===$?!!Y&&(Y.parentNode.removeChild(Y),!0):void(Y?Y.innerHTML=$:(Y=z.createElement('style'),Y.id=o,Y.innerHTML=$,z.getElementsByTagName('head')[0].appendChild(Y))))},sort:function(o,$){$=$||function(te,ne){return te.localeCompare(ne)};for(var z=0,W=o.length;z<W;z++)for(var Y=z,Z=o.length;Y<Z;Y++)if(0<$(o[z],o[Y])){var ee=o[z];o[z]=o[Y],o[Y]=ee}return o},serializeParam:function(o){var $=[];for(var z in o)if('method'!=z&&'timeout'!=z&&'async'!=z)if('function'!=(typeof o[z]).toLowerCase()&&'object'!=(typeof o[z]).toLowerCase())$.push(encodeURIComponent(z)+'='+encodeURIComponent(o[z]));else if(utils.isArray(o[z]))for(var W=0;W<o[z].length;W++)$.push(encodeURIComponent(z)+'[]='+encodeURIComponent(o[z][W]));return $.join('&')},formatUrl:function(o){var $=o.replace(/&&/g,'&');return $=$.replace(/\?&/g,'?'),$=$.replace(/&$/g,''),$=$.replace(/&#/g,'#'),$=$.replace(/&+/g,'&'),$},isCrossDomainUrl:function(o){var $=document.createElement('a');return $.href=o,browser.ie&&($.href=$.href),$.protocol!=location.protocol||$.hostname!=location.hostname||$.port!=location.port&&('80'!=$.port||''!=location.port)&&(''!=$.port||'80'!=location.port)},clearEmptyAttrs:function(o){for(var $ in o)''===o[$]&&delete o[$];return o},str2json:function(o){return utils.isString(o)?window.JSON?JSON.parse(o):new Function('return '+utils.trim(o||''))():null},json2str:function(){if(window.JSON)return JSON.stringify;function $(Z){return /["\\\x00-\x1f]/.test(Z)&&(Z=Z.replace(/["\\\x00-\x1f]/g,function(ee){var te=o[ee];return te?te:(te=ee.charCodeAt(),'\\u00'+_Mathfloor(te/16).toString(16)+(te%16).toString(16))})),'"'+Z+'"'}function z(Z){var ee=['['],te=Z.length,ne,ae,oe;for(ae=0;ae<te;ae++)switch(oe=Z[ae],typeof oe){case'undefined':case'function':case'unknown':break;default:ne&&ee.push(','),ee.push(utils.json2str(oe)),ne=1;}return ee.push(']'),ee.join('')}function W(Z){return 10>Z?'0'+Z:Z}function Y(Z){return'"'+Z.getFullYear()+'-'+W(Z.getMonth()+1)+'-'+W(Z.getDate())+'T'+W(Z.getHours())+':'+W(Z.getMinutes())+':'+W(Z.getSeconds())+'"'}var o={"":'\\b',"	":'\\t',"\n":'\\n',"":'\\f',"\r":'\\r','"':'\\"',"\\":'\\\\'};return function(Z){switch(typeof Z){case'undefined':return'undefined';case'number':return isFinite(Z)?Z+'':'null';case'string':return $(Z);case'boolean':return Z+'';default:if(null===Z)return'null';if(utils.isArray(Z))return z(Z);if(utils.isDate(Z))return Y(Z);var ee=['{'],te=utils.json2str,ne,ae;for(var oe in Z)if(Object.prototype.hasOwnProperty.call(Z,oe))switch(ae=Z[oe],typeof ae){case'undefined':case'unknown':case'function':break;default:ne&&ee.push(','),ne=1,ee.push(te(oe)+':'+te(ae));}return ee.push('}'),ee.join('');}}}()};utils.each(['String','Function','Array','Number','RegExp','Object','Date'],function(o){UE.utils['is'+o]=function($){return Object.prototype.toString.apply($)=='[object '+o+']'}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(o,$){o=utils.trim(o).split(/\s+/);for(var z=0,W;W=o[z++];)getListener(this,W,!0).push($)},on:function(o,$){return this.addListener(o,$)},off:function(o,$){return this.removeListener(o,$)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(o,$){o=utils.trim(o).split(/\s+/);for(var z=0,W;W=o[z++];)utils.removeItem(getListener(this,W)||[],$)},fireEvent:function(){var o=arguments[0];o=utils.trim(o).split(' ');for(var $=0,z;z=o[$++];){var W=getListener(this,z),Y,Z,ee;if(W)for(ee=W.length;ee--;)if(W[ee]){if(Z=W[ee].apply(this,arguments),!0===Z)return Z;void 0!==Z&&(Y=Z)}(Z=this['on'+z.toLowerCase()])&&(Y=Z.apply(this,arguments))}return Y}};var dtd=dom.dtd=function(){function o(we){for(var Se in we)we[Se.toUpperCase()]=we[Se];return we}var $=utils.extend2,z=o({isindex:1,fieldset:1}),W=o({input:1,button:1,select:1,textarea:1,label:1}),Y=$(o({a:1}),W),Z=$({iframe:1},Y),ee=o({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),te=o({ins:1,del:1,script:1,style:1}),ne=$(o({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),te),ae=$(o({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),ne),oe=$(o({p:1}),ae),re=$(o({iframe:1}),ae,W),le=o({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),se=$(o({a:0}),re),de=o({tr:1}),ce=o({"#":1}),ue=$(o({param:1}),le),ge=$(o({form:1}),z,Z,ee,oe),he=o({li:1,ol:1,ul:1}),fe=o({style:1,script:1}),ye=o({base:1,link:1,meta:1,title:1}),be=$(ye,fe),Ce=o({head:1,body:1}),xe=o({html:1}),ve=o({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),Ne=o({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return o({$nonBodyContent:$(xe,Ce,ye),$block:ve,$inline:se,$inlineWithA:$(o({a:1}),se),$body:$(o({script:1,style:1}),ve),$cdata:o({script:1,style:1}),$empty:Ne,$nonChild:o({iframe:1,textarea:1}),$listItem:o({dd:1,dt:1,li:1}),$list:o({ul:1,ol:1,dl:1}),$isNotEmpty:o({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:o({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:o({p:1,div:1}),$tableContent:o({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:o({pre:1,script:1,style:1,textarea:1}),html:Ce,head:be,style:ce,script:ce,body:ge,base:{},link:{},meta:{},title:ce,col:{},tr:o({td:1,th:1}),img:{},embed:{},colgroup:o({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:ge,td:ge,br:{},th:ge,center:ge,kbd:se,button:$(oe,ee),basefont:{},h5:se,h4:se,samp:se,h6:se,ol:he,h1:se,h3:se,option:ce,h2:se,form:$(z,Z,ee,oe),select:o({optgroup:1,option:1}),font:se,ins:se,menu:he,abbr:se,label:se,table:o({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:se,tfoot:de,cite:se,li:ge,input:{},iframe:ge,strong:se,textarea:ce,noframes:ge,big:se,small:se,span:o({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:se,dt:se,sub:se,optgroup:o({option:1}),param:{},bdo:se,var:se,div:ge,object:ue,sup:se,dd:ge,strike:se,area:{},dir:he,map:$(o({area:1,form:1,p:1}),z,te,ee),applet:ue,dl:o({dt:1,dd:1}),del:se,isindex:{},fieldset:$(o({legend:1}),le),thead:de,ul:he,acronym:se,b:se,a:$(o({a:1}),re),blockquote:$(o({td:1,tr:1,tbody:1,li:1}),ge),caption:se,i:se,u:se,tbody:de,s:se,address:$(Z,oe),tt:se,legend:se,q:se,pre:$(ne,Y),p:$(o({a:1}),se),em:se,dfn:se})}(),attrFix=ie&&9>browser.version?{tabindex:'tabIndex',readonly:'readOnly',for:'htmlFor',class:'className',maxlength:'maxLength',cellspacing:'cellSpacing',cellpadding:'cellPadding',rowspan:'rowSpan',colspan:'colSpan',usemap:'useMap',frameborder:'frameBorder'}:{tabindex:'tabIndex',readonly:'readOnly'},styleBlock=utils.listToMap(['-webkit-box','-moz-box','block','list-item','table','table-row-group','table-header-group','table-footer-group','table-row','table-column-group','table-column','table-cell','table-caption']),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&'6'==browser.version?'\uFEFF':'\u200B',keys:{8:1,13:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,46:1},getPosition:function(o,$){if(o===$)return 0;var W=[o],Y=[$],z;for(z=o;z=z.parentNode;){if(z===$)return 10;W.push(z)}for(z=$;z=z.parentNode;){if(z===o)return 20;Y.push(z)}if(W.reverse(),Y.reverse(),W[0]!==Y[0])return 1;for(var Z=-1;Z++,W[Z]===Y[Z];);for(o=W[Z],$=Y[Z];o=o.nextSibling;)if(o===$)return 4;return 2},getNodeIndex:function(o,$){for(var z=o,W=0;z=z.previousSibling;){if($&&3==z.nodeType){z.nodeType!=z.nextSibling.nodeType&&W++;continue}W++}return W},inDoc:function(o,$){return 10==domUtils.getPosition(o,$)},findParent:function(o,$,z){if(o&&!domUtils.isBody(o))for(o=z?o:o.parentNode;o;){if(!$||$(o)||domUtils.isBody(o))return $&&!$(o)&&domUtils.isBody(o)?null:o;o=o.parentNode}return null},findParentByTagName:function(o,$,z,W){return $=utils.listToMap(utils.isArray($)?$:[$]),domUtils.findParent(o,function(Y){return $[Y.tagName]&&!(W&&W(Y))},z)},findParents:function(o,$,z,W){for(var Y=$&&(z&&z(o)||!z)?[o]:[];o=domUtils.findParent(o,z);)Y.push(o);return W?Y:Y.reverse()},insertAfter:function(o,$){return o.nextSibling?o.parentNode.insertBefore($,o.nextSibling):o.parentNode.appendChild($)},remove:function(o,$){var z=o.parentNode,W;if(z){if($&&o.hasChildNodes())for(;W=o.firstChild;)z.insertBefore(W,o);z.removeChild(o)}return o},getNextDomNode:function(o,$,z,W){return getDomNode(o,'firstChild','nextSibling',$,z,W)},getPreDomNode:function(o,$,z,W){return getDomNode(o,'lastChild','previousSibling',$,z,W)},isBookmarkNode:function(o){return 1==o.nodeType&&o.id&&/^_baidu_bookmark_/i.test(o.id)},getWindow:function(o){var $=o.ownerDocument||o;return $.defaultView||$.parentWindow},getCommonAncestor:function(o,$){if(o===$)return o;for(var z=[o],W=[$],Y=o,Z=-1;Y=Y.parentNode;){if(Y===$)return Y;z.push(Y)}for(Y=$;Y=Y.parentNode;){if(Y===o)return Y;W.push(Y)}for(z.reverse(),W.reverse();Z++,z[Z]===W[Z];);return 0==Z?null:z[Z-1]},clearEmptySibling:function(o,$,z){function W(Y,Z){for(var ee;Y&&!domUtils.isBookmarkNode(Y)&&(domUtils.isEmptyInlineElement(Y)||!new RegExp('[^\t\n\r'+domUtils.fillChar+']').test(Y.nodeValue));)ee=Y[Z],domUtils.remove(Y),Y=ee}$||W(o.nextSibling,'nextSibling'),z||W(o.previousSibling,'previousSibling')},split:function(o,$){var z=o.ownerDocument;if(browser.ie&&$==o.nodeValue.length){var W=z.createTextNode('');return domUtils.insertAfter(o,W)}var Y=o.splitText($);if(browser.ie8){var Z=z.createTextNode('');domUtils.insertAfter(Y,Z),domUtils.remove(Z)}return Y},isWhitespace:function(o){return!new RegExp('[^ \t\n\r'+domUtils.fillChar+']').test(o.nodeValue)},getXY:function(o){for(var $=0,z=0;o.offsetParent;)z+=o.offsetTop,$+=o.offsetLeft,o=o.offsetParent;return{x:$,y:z}},on:function(o,$,z){var W=utils.isArray($)?$:utils.trim($).split(/\s+/),Y=W.length;if(Y)for(;Y--;)if($=W[Y],o.addEventListener)o.addEventListener($,z,!1);else{z._d||(z._d={els:[]});var Z=$+z.toString(),ee=utils.indexOf(z._d.els,o);z._d[Z]&&-1!=ee||(-1==ee&&z._d.els.push(o),!z._d[Z]&&(z._d[Z]=function(te){return z.call(te.srcElement,te||window.event)}),o.attachEvent('on'+$,z._d[Z]))}o=null},un:function(o,$,z){var W=utils.isArray($)?$:utils.trim($).split(/\s+/),Y=W.length;if(Y)for(;Y--;)if($=W[Y],o.removeEventListener)o.removeEventListener($,z,!1);else{var Z=$+z.toString();try{o.detachEvent('on'+$,z._d?z._d[Z]:z)}catch(te){}if(z._d&&z._d[Z]){var ee=utils.indexOf(z._d.els,o);-1!=ee&&z._d.els.splice(ee,1),0==z._d.els.length&&delete z._d[Z]}}},isSameElement:function(o,$){if(o.tagName!=$.tagName)return!1;var z=o.attributes,W=$.attributes;if(!ie&&z.length!=W.length)return!1;for(var ee=0,te=0,ne=0,Y,Z;Y=z[ne++];){if('style'==Y.nodeName)if(Y.specified&&ee++,domUtils.isSameStyle(o,$))continue;else return!1;if(!ie)Z=$.attributes[Y.nodeName];else if(Y.specified)ee++,Z=W.getNamedItem(Y.nodeName);else continue;if(!Z.specified||Y.nodeValue!=Z.nodeValue)return!1}if(ie){for(ne=0;Z=W[ne++];)Z.specified&&te++;if(ee!=te)return!1}return!0},isSameStyle:function(o,$){var z=o.style.cssText.replace(/( ?; ?)/g,';').replace(/( ?: ?)/g,':'),W=$.style.cssText.replace(/( ?; ?)/g,';').replace(/( ?: ?)/g,':');if(browser.opera){if(z=o.style,W=$.style,z.length!=W.length)return!1;for(var Y in z)if(!/^(\d+|csstext)$/i.test(Y)&&z[Y]!=W[Y])return!1;return!0}if(!z||!W)return z==W;if(z=z.split(';'),W=W.split(';'),z.length!=W.length)return!1;for(var Z=0,ee;ee=z[Z++];)if(-1==utils.indexOf(W,ee))return!1;return!0},isBlockElm:function(o){return 1==o.nodeType&&(dtd.$block[o.tagName]||styleBlock[domUtils.getComputedStyle(o,'display')])&&!dtd.$nonChild[o.tagName]},isBody:function(o){return o&&1==o.nodeType&&'body'==o.tagName.toLowerCase()},breakParent:function(o,$){var W=o,Y=o,z,Z,ee;do{for(W=W.parentNode,Z?(z=W.cloneNode(!1),z.appendChild(Z),Z=z,z=W.cloneNode(!1),z.appendChild(ee),ee=z):(Z=W.cloneNode(!1),ee=Z.cloneNode(!1));z=Y.previousSibling;)Z.insertBefore(z,Z.firstChild);for(;z=Y.nextSibling;)ee.appendChild(z);Y=W}while($!==W);return z=$.parentNode,z.insertBefore(Z,$),z.insertBefore(ee,$),z.insertBefore(o,ee),domUtils.remove($),o},isEmptyInlineElement:function(o){if(1!=o.nodeType||!dtd.$removeEmpty[o.tagName])return 0;for(o=o.firstChild;o;){if(domUtils.isBookmarkNode(o))return 0;if(1==o.nodeType&&!domUtils.isEmptyInlineElement(o)||3==o.nodeType&&!domUtils.isWhitespace(o))return 0;o=o.nextSibling}return 1},trimWhiteTextNode:function(o){function $(z){for(var W;(W=o[z])&&3==W.nodeType&&domUtils.isWhitespace(W);)o.removeChild(W)}$('firstChild'),$('lastChild')},mergeChild:function(o,$,z){for(var W=domUtils.getElementsByTagName(o,o.tagName.toLowerCase()),Y=0,Z;Z=W[Y++];)if(Z.parentNode&&!domUtils.isBookmarkNode(Z)){if('span'==Z.tagName.toLowerCase()){if(o===Z.parentNode&&(domUtils.trimWhiteTextNode(o),1==o.childNodes.length)){o.style.cssText=Z.style.cssText+';'+o.style.cssText,domUtils.remove(Z,!0);continue}if(Z.style.cssText=o.style.cssText+';'+Z.style.cssText,z){var ee=z.style;if(ee){ee=ee.split(';');for(var te=0,ne;ne=ee[te++];)Z.style[utils.cssStyleToDomStyle(ne.split(':')[0])]=ne.split(':')[1]}}domUtils.isSameStyle(Z,o)&&domUtils.remove(Z,!0);continue}domUtils.isSameElement(o,Z)&&domUtils.remove(Z,!0)}},getElementsByTagName:function(o,$,z){if(z&&utils.isString(z)){var W=z;z=function(oe){return domUtils.hasClass(oe,W)}}$=utils.trim($).replace(/[ ]{2,}/g,' ').split(' ');for(var Y=[],Z=0,ee,te;ee=$[Z++];){te=o.getElementsByTagName(ee);for(var ne=0,ae;ae=te[ne++];)(!z||z(ae))&&Y.push(ae)}return Y},mergeToParent:function(o){for(var $=o.parentNode;$&&dtd.$removeEmpty[$.tagName];){if($.tagName==o.tagName||'A'==$.tagName){if(domUtils.trimWhiteTextNode($),'SPAN'==$.tagName&&!domUtils.isSameStyle($,o)||'A'==$.tagName&&'SPAN'==o.tagName)if(1<$.childNodes.length||$!==o.parentNode){o.style.cssText=$.style.cssText+';'+o.style.cssText,$=$.parentNode;continue}else $.style.cssText+=';'+o.style.cssText,'A'==$.tagName&&($.style.textDecoration='underline');if('A'!=$.tagName){$===o.parentNode&&domUtils.remove(o,!0);break}}$=$.parentNode}},mergeSibling:function(o,$,z){function W(Y,Z,ee){var te;if((te=ee[Y])&&!domUtils.isBookmarkNode(te)&&1==te.nodeType&&domUtils.isSameElement(ee,te)){for(;te.firstChild;)'firstChild'==Z?ee.insertBefore(te.lastChild,ee.firstChild):ee.appendChild(te.firstChild);domUtils.remove(te)}}$||W('previousSibling','firstChild',o),z||W('nextSibling','lastChild',o)},unSelectable:ie&&browser.ie9below||browser.opera?function(o){o.onselectstart=function(){return!1},o.onclick=o.onkeyup=o.onkeydown=function(){return!1},o.unselectable='on',o.setAttribute('unselectable','on');for(var $=0,z;z=o.all[$++];)switch(z.tagName.toLowerCase()){case'iframe':case'textarea':case'input':case'select':break;default:z.unselectable='on',o.setAttribute('unselectable','on');}}:function(o){o.style.MozUserSelect=o.style.webkitUserSelect=o.style.msUserSelect=o.style.KhtmlUserSelect='none'},removeAttributes:function(o,$){$=utils.isArray($)?$:utils.trim($).replace(/[ ]{2,}/g,' ').split(' ');for(var z=0,W;W=$[z++];){switch(W=attrFix[W]||W,W){case'className':o[W]='';break;case'style':o.style.cssText='';var Y=o.getAttributeNode('style');!browser.ie&&Y&&o.removeAttributeNode(Y);}o.removeAttribute(W)}},createElement:function(o,$,z){return domUtils.setAttributes(o.createElement($),z)},setAttributes:function(o,$){for(var z in $)if($.hasOwnProperty(z)){var W=$[z];'class'===z?o.className=W:'style'===z?o.style.cssText=o.style.cssText+';'+W:'innerHTML'===z?o[z]=W:'value'===z?o.value=W:o.setAttribute(attrFix[z]||z,W)}return o},getComputedStyle:function(o,$){if(-1<'width height top left'.indexOf($))return o['offset'+$.replace(/^\w/,function(ee){return ee.toUpperCase()})]+'px';if(3==o.nodeType&&(o=o.parentNode),browser.ie&&9>browser.version&&'font-size'==$&&!o.style.fontSize&&!dtd.$empty[o.tagName]&&!dtd.$nonChild[o.tagName]){var W=o.ownerDocument.createElement('span');W.style.cssText='padding:0;border:0;font-family:simsun;',W.innerHTML='.',o.appendChild(W);var Y=W.offsetHeight;return o.removeChild(W),W=null,Y+'px'}try{var Z=domUtils.getStyle(o,$)||(window.getComputedStyle?domUtils.getWindow(o).getComputedStyle(o,'').getPropertyValue($):(o.currentStyle||o.style)[utils.cssStyleToDomStyle($)])}catch(ee){return''}return utils.transUnitToPx(utils.fixColor($,Z))},removeClasses:function(o,$){$=utils.isArray($)?$:utils.trim($).replace(/[ ]{2,}/g,' ').split(' ');for(var z=0,Y=o.className,W;W=$[z++];)Y=Y.replace(new RegExp('\\b'+W+'\\b'),'');Y=utils.trim(Y).replace(/[ ]{2,}/g,' '),Y?o.className=Y:domUtils.removeAttributes(o,['class'])},addClass:function(o,$){if(o){$=utils.trim($).replace(/[ ]{2,}/g,' ').split(' ');for(var z=0,Y=o.className,W;W=$[z++];)new RegExp('\\b'+W+'\\b').test(Y)||(Y+=' '+W);o.className=utils.trim(Y)}},hasClass:function(o,$){if(utils.isRegExp($))return $.test(o.className);$=utils.trim($).replace(/[ ]{2,}/g,' ').split(' ');for(var z=0,Y=o.className,W;W=$[z++];)if(!new RegExp('\\b'+W+'\\b','i').test(Y))return!1;return z-1==$.length},preventDefault:function(o){o.preventDefault?o.preventDefault():o.returnValue=!1},removeStyle:function(o,$){browser.ie?('color'==$&&($='(^|;)'+$),o.style.cssText=o.style.cssText.replace(new RegExp($+'[^:]*:[^;]+;?','ig'),'')):o.style.removeProperty?o.style.removeProperty($):o.style.removeAttribute(utils.cssStyleToDomStyle($)),o.style.cssText||domUtils.removeAttributes(o,['style'])},getStyle:function(o,$){var z=o.style[utils.cssStyleToDomStyle($)];return utils.fixColor($,z)},setStyle:function(o,$,z){o.style[utils.cssStyleToDomStyle($)]=z,utils.trim(o.style.cssText)||this.removeAttributes(o,'style')},setStyles:function(o,$){for(var z in $)$.hasOwnProperty(z)&&domUtils.setStyle(o,z,$[z])},removeDirtyAttr:function(o){for(var $=0,W=o.getElementsByTagName('*'),z;z=W[$++];)z.removeAttribute('_moz_dirty');o.removeAttribute('_moz_dirty')},getChildCount:function(o,$){var z=0,W=o.firstChild;for($=$||function(){return 1};W;)$(W)&&z++,W=W.nextSibling;return z},isEmptyNode:function(o){return!o.firstChild||0==domUtils.getChildCount(o,function($){return!domUtils.isBr($)&&!domUtils.isBookmarkNode($)&&!domUtils.isWhitespace($)})},clearSelectedArr:function(o){for(var $;$=o.pop();)domUtils.removeAttributes($,['class'])},scrollToView:function(o,$,z){var Z=function(){var ae=$.document,oe='CSS1Compat'==ae.compatMode;return{width:(oe?ae.documentElement.clientWidth:ae.body.clientWidth)||0,height:(oe?ae.documentElement.clientHeight:ae.body.clientHeight)||0}}().height,ee=-1*Z+z;ee+=o.offsetHeight||0;var te=domUtils.getXY(o);ee+=te.y;var ne=function(ae){if('pageXOffset'in ae)return{x:ae.pageXOffset||0,y:ae.pageYOffset||0};var oe=ae.document;return{x:oe.documentElement.scrollLeft||oe.body.scrollLeft||0,y:oe.documentElement.scrollTop||oe.body.scrollTop||0}}($).y;(ee>ne||ee<ne-Z)&&$.scrollTo(0,ee+(0>ee?-20:20))},isBr:function(o){return 1==o.nodeType&&'BR'==o.tagName},isFillChar:function(o,$){if(3!=o.nodeType)return!1;var z=o.nodeValue;return $?new RegExp('^'+domUtils.fillChar).test(z):!z.replace(new RegExp(domUtils.fillChar,'g'),'').length},isStartInblock:function(o){var $=o.cloneRange(),z=0,W=$.startContainer,Y;if(1==W.nodeType&&W.childNodes[$.startOffset]){W=W.childNodes[$.startOffset];for(var Z=W.previousSibling;Z&&domUtils.isFillChar(Z);)W=Z,Z=Z.previousSibling}for(this.isFillChar(W,!0)&&1==$.startOffset&&($.setStartBefore(W),W=$.startContainer);W&&domUtils.isFillChar(W);)Y=W,W=W.previousSibling;for(Y&&($.setStartBefore(Y),W=$.startContainer),1==W.nodeType&&domUtils.isEmptyNode(W)&&1==$.startOffset&&$.setStart(W,0).collapse(!0);!$.startOffset;){if(W=$.startContainer,domUtils.isBlockElm(W)||domUtils.isBody(W)){z=1;break}var Z=$.startContainer.previousSibling,ee;if(!Z)$.setStartBefore($.startContainer);else{for(;Z&&domUtils.isFillChar(Z);)ee=Z,Z=Z.previousSibling;ee?$.setStartBefore(ee):$.setStartBefore($.startContainer)}}return z&&!domUtils.isBody($.startContainer)?1:0},isEmptyBlock:function(o,$){if(1!=o.nodeType)return 0;if($=$||new RegExp('[ \xA0\t\r\n'+domUtils.fillChar+']','g'),0<o[browser.ie?'innerText':'textContent'].replace($,'').length)return 0;for(var z in dtd.$isNotEmpty)if(o.getElementsByTagName(z).length)return 0;return 1},setViewportOffset:function(o,$){var z=0|parseInt(o.style.left),W=0|parseInt(o.style.top),Y=o.getBoundingClientRect(),Z=$.left-Y.left,ee=$.top-Y.top;Z&&(o.style.left=z+Z+'px'),ee&&(o.style.top=W+ee+'px')},fillNode:function(o,$){var z=browser.ie?o.createTextNode(domUtils.fillChar):o.createElement('br');$.innerHTML='',$.appendChild(z)},moveChild:function(o,$,z){for(;o.firstChild;)z&&$.firstChild?$.insertBefore(o.lastChild,$.firstChild):$.appendChild(o.firstChild)},hasNoAttributes:function(o){return browser.ie?/^<\w+\s*?>/.test(o.outerHTML):0==o.attributes.length},isCustomeNode:function(o){return 1==o.nodeType&&o.getAttribute('_ue_custom_node_')},isTagNode:function(o,$){return 1==o.nodeType&&new RegExp('\\b'+o.tagName+'\\b','i').test($)},filterNodeList:function(o,$,z){var W=[];if(!utils.isFunction($)){var Y=$;$=function(Z){return-1!=utils.indexOf(utils.isArray(Y)?Y:Y.split(' '),Z.tagName.toLowerCase())}}return utils.each(o,function(Z){$(Z)&&W.push(Z)}),0==W.length?null:1!=W.length&&z?W:W[0]},isInNodeEndBoundary:function(o,$){var z=o.startContainer;if(3==z.nodeType&&o.startOffset!=z.nodeValue.length)return 0;if(1==z.nodeType&&o.startOffset!=z.childNodes.length)return 0;for(;z!==$;){if(z.nextSibling)return 0;z=z.parentNode}return 1},isBoundaryNode:function(o,$){for(var z;!domUtils.isBody(o);)if(z=o,o=o.parentNode,z!==o[$])return!1;return!0},fillHtml:browser.ie11below?'&nbsp;':'<br/>'},fillCharReg=new RegExp(domUtils.fillChar,'g');(function(){function o(oe){oe.collapsed=oe.startContainer&&oe.endContainer&&oe.startContainer===oe.endContainer&&oe.startOffset==oe.endOffset}function $(oe){return!oe.collapsed&&1==oe.startContainer.nodeType&&oe.startContainer===oe.endContainer&&1==oe.endOffset-oe.startOffset}function z(oe,re,le,se){return 1==re.nodeType&&(dtd.$empty[re.tagName]||dtd.$nonChild[re.tagName])&&(le=domUtils.getNodeIndex(re)+(oe?0:1),re=re.parentNode),oe?(se.startContainer=re,se.startOffset=le,!se.endContainer&&se.collapse(!0)):(se.endContainer=re,se.endOffset=le,!se.startContainer&&se.collapse(!1)),o(se),se}function W(oe,re){var le=oe.startContainer,se=oe.endContainer,de=oe.startOffset,ce=oe.endOffset,ue=oe.document,ge=ue.createDocumentFragment(),he,fe;if(1==le.nodeType&&(le=le.childNodes[de]||(he=le.appendChild(ue.createTextNode('')))),1==se.nodeType&&(se=se.childNodes[ce]||(fe=se.appendChild(ue.createTextNode('')))),le===se&&3==le.nodeType)return ge.appendChild(ue.createTextNode(le.substringData(de,ce-de))),re&&(le.deleteData(de,ce-de),oe.collapse(!0)),ge;for(var Ce=ge,xe=domUtils.findParents(le,!0),ve=domUtils.findParents(se,!0),Ne=0,ye,be;xe[Ne]==ve[Ne];)Ne++;for(var we=Ne,Se;Se=xe[we];we++){for(ye=Se.nextSibling,Se==le?!he&&(3==oe.startContainer.nodeType?(Ce.appendChild(ue.createTextNode(le.nodeValue.slice(de))),re&&le.deleteData(de,le.nodeValue.length-de)):Ce.appendChild(re?le:le.cloneNode(!0))):(be=Se.cloneNode(!1),Ce.appendChild(be));ye&&ye!==se&&ye!==ve[we];)Se=ye.nextSibling,Ce.appendChild(re?ye:ye.cloneNode(!0)),ye=Se;Ce=be}Ce=ge,xe[Ne]||(Ce.appendChild(xe[Ne-1].cloneNode(!1)),Ce=Ce.firstChild);for(var we=Ne,Te;Te=ve[we];we++){if(ye=Te.previousSibling,Te==se?!fe&&3==oe.endContainer.nodeType&&(Ce.appendChild(ue.createTextNode(se.substringData(0,ce))),re&&se.deleteData(0,ce)):(be=Te.cloneNode(!1),Ce.appendChild(be)),we!=Ne||!xe[Ne])for(;ye&&ye!==le;)Te=ye.previousSibling,Ce.insertBefore(re?ye:ye.cloneNode(!0),Ce.firstChild),ye=Te;Ce=be}return re&&oe.setStartBefore(ve[Ne]?xe[Ne]?ve[Ne]:xe[Ne-1]:ve[Ne-1]).collapse(!0),he&&domUtils.remove(he),fe&&domUtils.remove(fe),ge}function Y(oe,re){try{if(ne&&domUtils.inDoc(ne,oe))if(!ne.nodeValue.replace(fillCharReg,'').length){var le=ne.parentNode;for(domUtils.remove(ne);le&&domUtils.isEmptyInlineElement(le)&&(browser.safari?!(domUtils.getPosition(le,re)&domUtils.POSITION_CONTAINS):!le.contains(re));)ne=le.parentNode,domUtils.remove(le),le=ne}else ne.nodeValue=ne.nodeValue.replace(fillCharReg,'')}catch(se){}}function Z(oe,re){var le;for(oe=oe[re];oe&&domUtils.isFillChar(oe);)le=oe[re],domUtils.remove(oe),oe=le}var ee=0,te=domUtils.fillChar,ae=dom.Range=function(oe){var re=this;re.startContainer=re.startOffset=re.endContainer=re.endOffset=null,re.document=oe,re.collapsed=!0},ne;ae.prototype={cloneContents:function(){return this.collapsed?null:W(this,0)},deleteContents:function(){var oe;return this.collapsed||W(this,1),browser.webkit&&(oe=this.startContainer,3==oe.nodeType&&!oe.nodeValue.length&&(this.setStartBefore(oe).collapse(!0),domUtils.remove(oe))),this},extractContents:function(){return this.collapsed?null:W(this,2)},setStart:function(oe,re){return z(!0,oe,re,this)},setEnd:function(oe,re){return z(!1,oe,re,this)},setStartAfter:function(oe){return this.setStart(oe.parentNode,domUtils.getNodeIndex(oe)+1)},setStartBefore:function(oe){return this.setStart(oe.parentNode,domUtils.getNodeIndex(oe))},setEndAfter:function(oe){return this.setEnd(oe.parentNode,domUtils.getNodeIndex(oe)+1)},setEndBefore:function(oe){return this.setEnd(oe.parentNode,domUtils.getNodeIndex(oe))},setStartAtFirst:function(oe){return this.setStart(oe,0)},setStartAtLast:function(oe){return this.setStart(oe,3==oe.nodeType?oe.nodeValue.length:oe.childNodes.length)},setEndAtFirst:function(oe){return this.setEnd(oe,0)},setEndAtLast:function(oe){return this.setEnd(oe,3==oe.nodeType?oe.nodeValue.length:oe.childNodes.length)},selectNode:function(oe){return this.setStartBefore(oe).setEndAfter(oe)},selectNodeContents:function(oe){return this.setStart(oe,0).setEndAtLast(oe)},cloneRange:function(){var oe=this;return new ae(oe.document).setStart(oe.startContainer,oe.startOffset).setEnd(oe.endContainer,oe.endOffset)},collapse:function(oe){var re=this;return oe?(re.endContainer=re.startContainer,re.endOffset=re.startOffset):(re.startContainer=re.endContainer,re.startOffset=re.endOffset),re.collapsed=!0,re},shrinkBoundary:function(oe){function re(ce){return 1==ce.nodeType&&!domUtils.isBookmarkNode(ce)&&!dtd.$empty[ce.tagName]&&!dtd.$nonChild[ce.tagName]}for(var le=this,de=le.collapsed,se;1==le.startContainer.nodeType&&(se=le.startContainer.childNodes[le.startOffset])&&re(se);)le.setStart(se,0);if(de)return le.collapse(!0);if(!oe)for(;1==le.endContainer.nodeType&&0<le.endOffset&&(se=le.endContainer.childNodes[le.endOffset-1])&&re(se);)le.setEnd(se,se.childNodes.length);return le},getCommonAncestor:function(oe,re){var le=this,se=le.startContainer,de=le.endContainer;return se===de?oe&&$(this)&&(se=se.childNodes[le.startOffset],1==se.nodeType)?se:re&&3==se.nodeType?se.parentNode:se:domUtils.getCommonAncestor(se,de)},trimBoundary:function(oe){this.txtToElmBoundary();var re=this.startContainer,le=this.startOffset,se=this.collapsed,de=this.endContainer;if(3==re.nodeType){if(0==le)this.setStartBefore(re);else if(le>=re.nodeValue.length)this.setStartAfter(re);else{var ce=domUtils.split(re,le);re===de?this.setEnd(ce,this.endOffset-le):re.parentNode===de&&(this.endOffset+=1),this.setStartBefore(ce)}if(se)return this.collapse(!0)}return oe||(le=this.endOffset,de=this.endContainer,3==de.nodeType&&(0==le?this.setEndBefore(de):(le<de.nodeValue.length&&domUtils.split(de,le),this.setEndAfter(de)))),this},txtToElmBoundary:function(oe){function re(le,se){var de=le[se+'Container'],ce=le[se+'Offset'];3==de.nodeType&&(ce?ce>=de.nodeValue.length&&le['set'+se.replace(/(\w)/,function(ue){return ue.toUpperCase()})+'After'](de):le['set'+se.replace(/(\w)/,function(ue){return ue.toUpperCase()})+'Before'](de))}return(oe||!this.collapsed)&&(re(this,'start'),re(this,'end')),this},insertNode:function(oe){var re=oe,le=1;11==oe.nodeType&&(re=oe.firstChild,le=oe.childNodes.length),this.trimBoundary(!0);var se=this.startContainer,de=this.startOffset,ce=se.childNodes[de];return ce?se.insertBefore(oe,ce):se.appendChild(oe),re.parentNode===this.endContainer&&(this.endOffset+=le),this.setStartBefore(re)},setCursor:function(oe,re){return this.collapse(!oe).select(re)},createBookmark:function(oe,re){var se=this.document.createElement('span'),le;return se.style.cssText='display:none;line-height:0px;',se.appendChild(this.document.createTextNode('\u200D')),se.id='_baidu_bookmark_start_'+(re?'':ee++),this.collapsed||(le=se.cloneNode(!0),le.id='_baidu_bookmark_end_'+(re?'':ee++)),this.insertNode(se),le&&this.collapse().insertNode(le).setEndBefore(le),this.setStartAfter(se),{start:oe?se.id:se,end:le?oe?le.id:le:null,id:oe}},moveToBookmark:function(oe){var re=oe.id?this.document.getElementById(oe.start):oe.start,le=oe.end&&oe.id?this.document.getElementById(oe.end):oe.end;return this.setStartBefore(re),domUtils.remove(re),le?(this.setEndBefore(le),domUtils.remove(le)):this.collapse(!0),this},enlarge:function(oe,re){var le=domUtils.isBody,ce=this.document.createTextNode(''),se,de;if(oe){for(de=this.startContainer,1==de.nodeType?de.childNodes[this.startOffset]?se=de=de.childNodes[this.startOffset]:(de.appendChild(ce),se=de=ce):se=de;;){if(domUtils.isBlockElm(de)){for(de=se;(se=de.previousSibling)&&!domUtils.isBlockElm(se);)de=se;this.setStartBefore(de);break}se=de,de=de.parentNode}for(de=this.endContainer,1==de.nodeType?((se=de.childNodes[this.endOffset])?de.insertBefore(ce,se):de.appendChild(ce),se=de=ce):se=de;;){if(domUtils.isBlockElm(de)){for(de=se;(se=de.nextSibling)&&!domUtils.isBlockElm(se);)de=se;this.setEndAfter(de);break}se=de,de=de.parentNode}ce.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(ce)}if(!this.collapsed){for(;0==this.startOffset&&!(re&&re(this.startContainer))&&!le(this.startContainer);)this.setStartBefore(this.startContainer);for(;this.endOffset==(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)&&!(re&&re(this.endContainer))&&!le(this.endContainer);)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(oe){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!oe)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?'nodeValue':'childNodes'].length&&this.startContainer[3==this.startContainer.nodeType?'nodeValue':'childNodes'].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?'nodeValue':'childNodes'].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(oe,re,le){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(Se){return 1==Se.nodeType&&domUtils.isBlockElm(Se)}).adjustmentBoundary();for(var se=this.createBookmark(),de=se.end,ce=function(Se){return 1==Se.nodeType?'br'!=Se.tagName.toLowerCase():!domUtils.isWhitespace(Se)},ue=domUtils.getNextDomNode(se.start,!1,ce),fe=this.cloneRange(),ge,he;ue&&domUtils.getPosition(ue,de)&domUtils.POSITION_PRECEDING;)if(3==ue.nodeType||dtd[oe][ue.tagName]){for(fe.setStartBefore(ue),ge=ue;ge&&(3==ge.nodeType||dtd[oe][ge.tagName])&&ge!==de;)he=ge,ge=domUtils.getNextDomNode(ge,1==ge.nodeType,null,function(Se){return dtd[oe][Se.tagName]});var ye=fe.setEndAfter(he).extractContents(),be;if(le&&0<le.length){var Ce,xe;xe=Ce=le[0].cloneNode(!1);for(var ve=1,Ne;Ne=le[ve++];)Ce.appendChild(Ne.cloneNode(!1)),Ce=Ce.firstChild;be=Ce}else be=fe.document.createElement(oe);re&&domUtils.setAttributes(be,re),be.appendChild(ye),fe.insertNode(le?xe:be);var we;if('span'==oe&&re.style&&/text\-decoration/.test(re.style)&&(we=domUtils.findParentByTagName(be,'a',!0))?(domUtils.setAttributes(we,re),domUtils.remove(be,!0),be=we):(domUtils.mergeSibling(be),domUtils.clearEmptySibling(be)),domUtils.mergeChild(be,re),ue=domUtils.getNextDomNode(be,!1,ce),domUtils.mergeToParent(be),ge===de)break}else ue=domUtils.getNextDomNode(ue,!0,ce);return this.moveToBookmark(se)},removeInlineStyle:function(oe){if(this.collapsed)return this;oe=utils.isArray(oe)?oe:[oe],this.shrinkBoundary().adjustmentBoundary();for(var re=this.startContainer,le=this.endContainer;;){if(1==re.nodeType){if(-1<utils.indexOf(oe,re.tagName.toLowerCase()))break;if('body'==re.tagName.toLowerCase()){re=null;break}}re=re.parentNode}for(;;){if(1==le.nodeType){if(-1<utils.indexOf(oe,le.tagName.toLowerCase()))break;if('body'==le.tagName.toLowerCase()){le=null;break}}le=le.parentNode}var se=this.createBookmark(),de,ce;re&&(ce=this.cloneRange().setEndBefore(se.start).setStartBefore(re),de=ce.extractContents(),ce.insertNode(de),domUtils.clearEmptySibling(re,!0),re.parentNode.insertBefore(se.start,re)),le&&(ce=this.cloneRange().setStartAfter(se.end).setEndAfter(le),de=ce.extractContents(),ce.insertNode(de),domUtils.clearEmptySibling(le,!1,!0),le.parentNode.insertBefore(se.end,le.nextSibling));for(var ue=domUtils.getNextDomNode(se.start,!1,function(he){return 1==he.nodeType}),ge;ue&&ue!==se.end;)ge=domUtils.getNextDomNode(ue,!0,function(he){return 1==he.nodeType}),-1<utils.indexOf(oe,ue.tagName.toLowerCase())&&domUtils.remove(ue,!0),ue=ge;return this.moveToBookmark(se)},getClosedNode:function(){var oe;if(!this.collapsed){var re=this.cloneRange().adjustmentBoundary().shrinkBoundary();if($(re)){var le=re.startContainer.childNodes[re.startOffset];le&&1==le.nodeType&&(dtd.$empty[le.tagName]||dtd.$nonChild[le.tagName])&&(oe=le)}}return oe},select:browser.ie?function(oe,re){var le;this.collapsed||this.shrinkBoundary();var se=this.getClosedNode();if(se&&!re){try{le=this.document.body.createControlRange(),le.addElement(se),le.select()}catch(ye){}return this}var de=this.createBookmark(),ce=de.start,ue;if(le=this.document.body.createTextRange(),le.moveToElementText(ce),le.moveStart('character',1),!this.collapsed){var ge=this.document.body.createTextRange();ue=de.end,ge.moveToElementText(ue),le.setEndPoint('EndToEnd',ge)}else if(!oe&&3!=this.startContainer.nodeType){var he=this.document.createTextNode(te),fe=this.document.createElement('span');fe.appendChild(this.document.createTextNode(te)),ce.parentNode.insertBefore(fe,ce),ce.parentNode.insertBefore(he,ce),Y(this.document,he),ne=he,Z(fe,'previousSibling'),Z(ce,'nextSibling'),le.moveStart('character',-1),le.collapse(!0)}this.moveToBookmark(de),fe&&domUtils.remove(fe);try{le.select()}catch(ye){}return this}:function(oe){function re(he){function fe(ye,be,Ce){3==ye.nodeType&&ye.nodeValue.length<be&&(he[Ce+'Offset']=ye.nodeValue.length)}fe(he.startContainer,he.startOffset,'start'),fe(he.endContainer,he.endOffset,'end')}var le=domUtils.getWindow(this.document),se=le.getSelection(),de;if(browser.gecko?this.document.body.focus():le.focus(),se){if(se.removeAllRanges(),this.collapsed&&!oe){var ce=this.startContainer,ue=ce;1==ce.nodeType&&(ue=ce.childNodes[this.startOffset]),!(3==ce.nodeType&&this.startOffset)&&(ue?!ue.previousSibling||3!=ue.previousSibling.nodeType:!ce.lastChild||3!=ce.lastChild.nodeType)&&(de=this.document.createTextNode(te),this.insertNode(de),Y(this.document,de),Z(de,'previousSibling'),Z(de,'nextSibling'),ne=de,this.setStart(de,browser.webkit?1:0).collapse(!0))}var ge=this.document.createRange();if(this.collapsed&&browser.opera&&1==this.startContainer.nodeType){var ue=this.startContainer.childNodes[this.startOffset];if(!ue)ue=this.startContainer.lastChild,ue&&domUtils.isBr(ue)&&this.setStartBefore(ue).collapse(!0);else{for(;ue&&domUtils.isBlockElm(ue)&&1==ue.nodeType&&ue.childNodes[0];)ue=ue.childNodes[0];ue&&this.setStartBefore(ue).collapse(!0)}}re(this),ge.setStart(this.startContainer,this.startOffset),ge.setEnd(this.endContainer,this.endOffset),se.addRange(ge)}return this},scrollToView:function(oe,re){oe=oe?window:domUtils.getWindow(this.document);var le=this,se=le.document.createElement('span');return se.innerHTML='&nbsp;',le.cloneRange().insertNode(se),domUtils.scrollToView(se,oe,re),domUtils.remove(se),le},inFillChar:function(){var oe=this.startContainer;return this.collapsed&&3==oe.nodeType&&oe.nodeValue.replace(new RegExp('^'+domUtils.fillChar),'').length+1==oe.nodeValue.length},createAddress:function(oe,re){function le(ce){for(var ue=ce?de.startContainer:de.endContainer,ge=domUtils.findParents(ue,!0,function(ve){return!domUtils.isBody(ve)}),he=[],fe=0,ye;ye=ge[fe++];)he.push(domUtils.getNodeIndex(ye,re));var be=0;if(!re)be=ce?domUtils.isFillChar(ue)?0:de.startOffset:de.endOffset;else if(3==ue.nodeType){for(var Ce=ue.previousSibling;Ce&&3==Ce.nodeType;)be+=Ce.nodeValue.replace(fillCharReg,'').length,Ce=Ce.previousSibling;be+=ce?de.startOffset:de.endOffset}else if(ue=ue.childNodes[ce?de.startOffset:de.endOffset],ue)be=domUtils.getNodeIndex(ue,re);else{ue=ce?de.startContainer:de.endContainer;for(var xe=ue.firstChild;xe;){if(domUtils.isFillChar(xe)){xe=xe.nextSibling;continue}if(be++,3==xe.nodeType)for(;xe&&3==xe.nodeType;)xe=xe.nextSibling;else xe=xe.nextSibling}}return 0>be&&(be=0),he.push(be),he}var se={},de=this;return se.startAddress=le(!0),oe||(se.endAddress=de.collapsed?[].concat(se.startAddress):le()),se},moveToAddress:function(oe,re){function le(de,ce){for(var ue=se.document.body,fe=0,be=de.length,ge,he,ye;fe<be;fe++)if(ye=de[fe],ge=ue,ue=ue.childNodes[ye],!ue){he=ye;break}ce?ue?se.setStartBefore(ue):se.setStart(ge,he):ue?se.setEndBefore(ue):se.setEnd(ge,he)}var se=this;return le(oe.startAddress,!0),!re&&oe.endAddress&&le(oe.endAddress),se},equals:function(oe){for(var re in this)if(this.hasOwnProperty(re)&&this[re]!==oe[re])return!1;return!0},traversal:function(oe,re){if(this.collapsed)return this;for(var le=this.createBookmark(),se=le.end,de=domUtils.getNextDomNode(le.start,!1,re),ce;de&&de!==se&&domUtils.getPosition(de,se)&domUtils.POSITION_PRECEDING;)ce=domUtils.getNextDomNode(de,!1,re),oe(de),de=ce;return this.moveToBookmark(le)}}})(),function(){function o(Y,Z){var ee=domUtils.getNodeIndex;Y=Y.duplicate(),Y.collapse(Z);var te=Y.parentElement();if(!te.hasChildNodes())return{container:te,offset:0};for(var ne=te.children,oe=Y.duplicate(),re=0,le=ne.length-1,se=-1,ae,de;re<=le;){se=_Mathfloor((re+le)/2),ae=ne[se],oe.moveToElementText(ae);var ce=oe.compareEndPoints('StartToStart',Y);if(0<ce)le=se-1;else if(0>ce)re=se+1;else return{container:te,offset:ee(ae)}}if(-1==se){if(oe.moveToElementText(te),oe.setEndPoint('StartToStart',Y),de=oe.text.replace(/(\r\n|\r)/g,'\n').length,ne=te.childNodes,!de)return ae=ne[ne.length-1],{container:ae,offset:ae.nodeValue.length};for(var ue=ne.length;0<de;)de-=ne[--ue].nodeValue.length;return{container:ne[ue],offset:-de}}if(oe.collapse(0<ce),oe.setEndPoint(0<ce?'StartToStart':'EndToStart',Y),de=oe.text.replace(/(\r\n|\r)/g,'\n').length,!de)return dtd.$empty[ae.tagName]||dtd.$nonChild[ae.tagName]?{container:te,offset:ee(ae)+(0<ce?0:1)}:{container:ae,offset:0<ce?0:ae.childNodes.length};for(;0<de;)try{var ge=ae;ae=ae[0<ce?'previousSibling':'nextSibling'],de-=ae.nodeValue.length}catch(he){return{container:te,offset:ee(ge)}}return{container:ae,offset:0<ce?-de:ae.nodeValue.length+de}}function $(Y,Z){if(Y.item)Z.selectNode(Y.item(0));else{var ee=o(Y,!0);Z.setStart(ee.container,ee.offset),0!=Y.compareEndPoints('StartToEnd',Y)&&(ee=o(Y,!1),Z.setEnd(ee.container,ee.offset))}return Z}function z(Y){var Z;try{Z=Y.getNative().createRange()}catch(te){return null}var ee=Z.item?Z.item(0):Z.parentElement();return(ee.ownerDocument||ee)===Y.document?Z:null}var W=dom.Selection=function(Y){var Z=this,ee;Z.document=Y,browser.ie9below&&(ee=domUtils.getWindow(Y).frameElement,domUtils.on(ee,'beforedeactivate',function(){Z._bakIERange=Z.getIERange()}),domUtils.on(ee,'activate',function(){try{!z(Z)&&Z._bakIERange&&Z._bakIERange.select()}catch(te){}Z._bakIERange=null})),ee=Y=null};W.prototype={rangeInBody:function(Y,Z){var ee=browser.ie9below||Z?Y.item?Y.item():Y.parentElement():Y.startContainer;return ee===this.document.body||domUtils.inDoc(ee,this.document)},getNative:function(){var Y=this.document;try{return Y?browser.ie9below?Y.selection:domUtils.getWindow(Y).getSelection():null}catch(Z){return null}},getIERange:function(){var Y=z(this);return!Y&&this._bakIERange?this._bakIERange:Y},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var Y=this.getStart();return Y?domUtils.findParents(Y,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var Y=z(this);return!!(Y&&this.rangeInBody(Y))}return!!this.getNative().rangeCount}catch(Z){return!1}},getRange:function(){function Y(re){for(var le=Z.document.body.firstChild,se=re.collapsed;le&&le.firstChild;)re.setStart(le,0),le=le.firstChild;re.startContainer||re.setStart(Z.document.body,0),se&&re.collapse(!0)}var Z=this;if(null!=Z._cachedRange)return this._cachedRange;var ee=new baidu.editor.dom.Range(Z.document);if(browser.ie9below){var te=Z.getIERange();if(te)try{$(te,ee)}catch(re){Y(ee)}else Y(ee)}else{var ne=Z.getNative();if(ne&&ne.rangeCount){var ae=ne.getRangeAt(0),oe=ne.getRangeAt(ne.rangeCount-1);ee.setStart(ae.startContainer,ae.startOffset).setEnd(oe.endContainer,oe.endOffset),ee.collapsed&&domUtils.isBody(ee.startContainer)&&!ee.startOffset&&Y(ee)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;Y(ee)}}return this._bakRange=ee},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var Y=browser.ie9below?this.getIERange():this.getRange(),Z,ee,te,ne;if(browser.ie9below){if(!Y)return this.document.body.firstChild;if(Y.item)return Y.item(0);for(Z=Y.duplicate(),0<Z.text.length&&Z.moveStart('character',1),Z.collapse(1),ee=Z.parentElement(),ne=te=Y.parentElement();te=te.parentNode;)if(te==ee){ee=ne;break}}else if(Y.shrinkBoundary(),ee=Y.startContainer,1==ee.nodeType&&ee.hasChildNodes()&&(ee=ee.childNodes[_Mathmin(ee.childNodes.length-1,Y.startOffset)]),3==ee.nodeType)return ee.parentNode;return ee},getText:function(){var Y,Z;return this.isFocus()&&(Y=this.getNative())?(Z=browser.ie9below?Y.createRange():Y.getRangeAt(0),browser.ie9below?Z.text:Z.toString()):''},clearRange:function(){this.getNative()[browser.ie9below?'empty':'removeAllRanges']()}}}(),function(){function o(te,ne){var ae;if(ne.textarea)if(utils.isString(ne.textarea)){for(var oe=0,le=domUtils.getElementsByTagName(te,'textarea'),re;re=le[oe++];)if(re.id=='ueditor_textarea_'+ne.options.textarea){ae=re;break}}else ae=ne.textarea;ae||(te.appendChild(ae=domUtils.createElement(document,'textarea',{name:ne.options.textarea,id:'ueditor_textarea_'+ne.options.textarea,style:'display:none'})),ne.textarea=ae),ae.getAttribute('name')||ae.setAttribute('name',ne.options.textarea),ae.value=ne.hasContents()?ne.options.allHtmlEnabled?ne.getAllHtml():ne.getContent(null,null,!0):''}function z(te){for(var ne in te)return ne}function W(te){te.langIsReady=!0,te.fireEvent('langReady')}var Y=0,ee=UE.Editor=function(te){var ne=this;ne.uid=Y++,EventBase.call(ne),ne.commands={},ne.options=utils.extend(utils.clone(te||{}),UEDITOR_CONFIG,!0),ne.shortcutkeys={},ne.inputRules=[],ne.outputRules=[],ne.setOpt(ee.defaultOptions(ne)),ne.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:ne.options.langPath+ne.options.lang+'/'+ne.options.lang+'.js',tag:'script',type:'text/javascript',defer:'defer'},function(){UE.plugin.load(ne),W(ne)}):(ne.options.lang=z(UE.I18N),UE.plugin.load(ne),W(ne)),UE.instants['ueditorInstant'+ne.uid]=ne},Z;ee.prototype={registerCommand:function(te,ne){this.commands[te]=ne},ready:function(te){var ne=this;te&&(ne.isReady?te.apply(ne):ne.addListener('ready',te))},setOpt:function(te,ne){var ae={};utils.isString(te)?ae[te]=ne:ae=te,utils.extend(this.options,ae,!0)},getOpt:function(te){return this.options[te]},destroy:function(){var te=this;te.fireEvent('destroy');var ne=te.container.parentNode,ae=te.textarea;ae?ae.style.display='':(ae=document.createElement('textarea'),ne.parentNode.insertBefore(ae,ne)),ae.style.width=te.iframe.offsetWidth+'px',ae.style.height=te.iframe.offsetHeight+'px',ae.value=te.getContent(),ae.id=te.key,ne.innerHTML='',domUtils.remove(ne);var oe=te.key;for(var re in te)te.hasOwnProperty(re)&&delete this[re];UE.delEditor(oe)},render:function(te){var ne=this,ae=ne.options,oe=function(le){return parseInt(domUtils.getComputedStyle(te,le))};if(utils.isString(te)&&(te=document.getElementById(te)),te){ae.minFrameWidth=ae.initialFrameWidth?ae.initialFrameWidth:ae.initialFrameWidth=te.offsetWidth,ae.initialFrameHeight?ae.minFrameHeight=ae.initialFrameHeight:ae.initialFrameHeight=ae.minFrameHeight=te.offsetHeight,te.style.width=/%$/.test(ae.initialFrameWidth)?'100%':ae.initialFrameWidth-oe('padding-left')-oe('padding-right')+'px',te.style.height=/%$/.test(ae.initialFrameHeight)?'100%':ae.initialFrameHeight-oe('padding-top')-oe('padding-bottom')+'px',te.style.zIndex=ae.zIndex;var re=(ie&&9>browser.version?'':'<!DOCTYPE html>')+'<html xmlns=\'http://www.w3.org/1999/xhtml\' class=\'view\' ><head><style type=\'text/css\'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>'+(ae.iframeCssUrl?'<link rel=\'stylesheet\' type=\'text/css\' href=\''+utils.unhtml(ae.iframeCssUrl)+'\'/>':'')+(ae.initialStyle?'<style>'+ae.initialStyle+'</style>':'')+'</head><body class=\'view\' ></body><script type=\'text/javascript\' '+(ie?'defer=\'defer\'':'')+' id=\'_initialScript\'>setTimeout(function(){editor = window.parent.UE.instants[\'ueditorInstant'+ne.uid+'\'];editor._setup(document);},0);var _tmpScript = document.getElementById(\'_initialScript\');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>';te.appendChild(domUtils.createElement(document,'iframe',{id:'ueditor_'+ne.uid,width:'100%',height:'100%',frameborder:'0',src:'javascript:void(function(){document.open();'+(ae.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':'')+'document.write("'+re+'");document.close();}())'})),te.style.overflow='hidden',setTimeout(function(){/%$/.test(ae.initialFrameWidth)&&(ae.minFrameWidth=ae.initialFrameWidth=te.offsetWidth),/%$/.test(ae.initialFrameHeight)&&(ae.minFrameHeight=ae.initialFrameHeight=te.offsetHeight,te.style.height=ae.initialFrameHeight+'px')})}},_setup:function(te){var ne=this,ae=ne.options;ie?(te.body.disabled=!0,te.body.contentEditable=!0,te.body.disabled=!1):te.body.contentEditable=!0,te.body.spellcheck=!1,ne.document=te,ne.window=te.defaultView||te.parentWindow,ne.iframe=ne.window.frameElement,ne.body=te.body,ne.selection=new dom.Selection(te);var oe;browser.gecko&&(oe=this.selection.getNative())&&oe.removeAllRanges(),this._initEvents();for(var re=this.iframe.parentNode;!domUtils.isBody(re);re=re.parentNode)if('FORM'==re.tagName){ne.form=re,ne.options.autoSyncData?domUtils.on(ne.window,'blur',function(){o(re,ne)}):domUtils.on(re,'submit',function(){o(this,ne)});break}if(ae.initialContent)if(ae.autoClearinitialContent){var le=ne.execCommand;ne.execCommand=function(){return ne.fireEvent('firstBeforeExecCommand'),le.apply(ne,arguments)},this._setDefaultContent(ae.initialContent)}else this.setContent(ae.initialContent,!1,!0);domUtils.isEmptyNode(ne.body)&&(ne.body.innerHTML='<p>'+(browser.ie?'':'<br/>')+'</p>'),ae.focus&&setTimeout(function(){ne.focus(ne.options.focusInEnd),ne.options.autoClearinitialContent||ne._selectionChange()},0),ne.container||(ne.container=this.iframe.parentNode),ae.fullscreen&&ne.ui&&ne.ui.setFullScreen(!0);try{ne.document.execCommand('2D-position',!1,!1)}catch(se){}try{ne.document.execCommand('enableInlineTableEditing',!1,!1)}catch(se){}try{ne.document.execCommand('enableObjectResizing',!1,!1)}catch(se){}ne._bindshortcutKeys(),ne.isReady=1,ne.fireEvent('ready'),ae.onready&&ae.onready.call(ne),browser.ie9below||domUtils.on(ne.window,['blur','focus'],function(se){if('blur'==se.type){ne._bakRange=ne.selection.getRange();try{ne._bakNativeRange=ne.selection.getNative().getRangeAt(0),ne.selection.getNative().removeAllRanges()}catch(de){ne._bakNativeRange=null}}else try{ne._bakRange&&ne._bakRange.select()}catch(de){}}),browser.gecko&&10902>=browser.version&&(ne.body.contentEditable=!1,setTimeout(function(){ne.body.contentEditable=!0},100),setInterval(function(){ne.body.style.height=ne.iframe.offsetHeight-20+'px'},100)),ae.isShow||ne.setHide(),ae.readonly&&ne.setDisabled()},sync:function(te){var ne=this,ae=te?document.getElementById(te):domUtils.findParent(ne.iframe.parentNode,function(oe){return'FORM'==oe.tagName},!0);ae&&o(ae,ne)},setHeight:function(te,ne){te!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=te+'px'),ne||(this.options.minFrameHeight=this.options.initialFrameHeight=te),this.body.style.height=te+'px',ne||this.trigger('setHeight')},addshortcutkey:function(te,ne){var ae={};ne?ae[te]=ne:ae=te,utils.extend(this.shortcutkeys,ae)},_bindshortcutKeys:function(){var te=this,ne=this.shortcutkeys;te.addListener('keydown',function(ae,oe){var re=oe.keyCode||oe.which;for(var le in ne)for(var se=ne[le].split(','),de=0,ce;ce=se[de++];){ce=ce.split(':');var ue=ce[0],ge=ce[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(ue.toLowerCase())||/^(\d+)$/.test(ue))&&(('ctrl'==RegExp.$1?oe.ctrlKey||oe.metaKey:0)&&(''==RegExp.$2?1:oe[RegExp.$2.slice(1)+'Key'])&&re==RegExp.$3||re==RegExp.$1)&&(-1!=te.queryCommandState(le,ge)&&te.execCommand(le,ge),domUtils.preventDefault(oe))}})},getContent:function(te,ne,ae,oe,re){var le=this;if(te&&utils.isFunction(te)&&(ne=te,te=''),ne?!ne():!this.hasContents())return'';le.fireEvent('beforegetcontent');var se=UE.htmlparser(le.body.innerHTML,oe);return le.filterOutputRule(se),le.fireEvent('aftergetcontent',te,se),se.toHtml(re)},getAllHtml:function(){var te=this,ne=[];if(te.fireEvent('getAllHtml',ne),browser.ie&&8<browser.version){var oe='';utils.each(te.document.styleSheets,function(re){oe+=re.href?'<link rel="stylesheet" type="text/css" href="'+re.href+'" />':'<style>'+re.cssText+'</style>'}),utils.each(te.document.getElementsByTagName('script'),function(re){oe+=re.outerHTML})}return'<html><head>'+(te.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+te.options.charset+'"/>':'')+(oe||te.document.getElementsByTagName('head')[0].innerHTML)+ne.join('\n')+'</head><body '+(ie&&9>browser.version?'class="view"':'')+'>'+te.getContent(null,null,!0)+'</body></html>'},getPlainTxt:function(){var te=new RegExp(domUtils.fillChar,'g'),ne=this.body.innerHTML.replace(/[\n\r]/g,'');return ne=ne.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,'\n').replace(/<br\/?>/gi,'\n').replace(/<[^>/]+>/g,'').replace(/(\n)?<\/([^>]+)>/g,function(ae,oe,re){return dtd.$block[re]?'\n':oe?oe:''}),ne.replace(te,'').replace(/\u00a0/g,' ').replace(/&nbsp;/g,' ')},getContentTxt:function(){var te=new RegExp(domUtils.fillChar,'g');return this.body[browser.ie?'innerText':'textContent'].replace(te,'').replace(/\u00a0/g,' ')},setContent:function(te,ne,ae){function oe(ge){return'DIV'==ge.tagName&&ge.getAttribute('cdata_tag')}var re=this;re.fireEvent('beforesetcontent',te);var le=UE.htmlparser(te);if(re.filterInputRule(le),te=le.toHtml(),re.body.innerHTML=(ne?re.body.innerHTML:'')+te,'p'==re.options.enterTag){var se=this.body.firstChild,de;if(!se||1==se.nodeType&&(dtd.$cdata[se.tagName]||oe(se)||domUtils.isCustomeNode(se))&&se===this.body.lastChild)this.body.innerHTML='<p>'+(browser.ie?'&nbsp;':'<br/>')+'</p>'+this.body.innerHTML;else for(var ce=re.document.createElement('p');se;){for(;se&&(3==se.nodeType||1==se.nodeType&&dtd.p[se.tagName]&&!dtd.$cdata[se.tagName]);)de=se.nextSibling,ce.appendChild(se),se=de;if(ce.firstChild)if(!se){re.body.appendChild(ce);break}else se.parentNode.insertBefore(ce,se),ce=re.document.createElement('p');se=se.nextSibling}}re.fireEvent('aftersetcontent'),re.fireEvent('contentchange'),ae||re._selectionChange(),re._bakRange=re._bakIERange=re._bakNativeRange=null;var ue;browser.gecko&&(ue=this.selection.getNative())&&ue.removeAllRanges(),re.options.autoSyncData&&re.form&&o(re.form,re)},focus:function(te){try{var ne=this,ae=ne.selection.getRange();if(te){var oe=ne.body.lastChild;oe&&1==oe.nodeType&&!dtd.$empty[oe.tagName]&&(domUtils.isEmptyBlock(oe)?ae.setStartAtFirst(oe):ae.setStartAtLast(oe),ae.collapse(!0)),ae.setCursor(!0)}else{if(!ae.collapsed&&domUtils.isBody(ae.startContainer)&&0==ae.startOffset){var oe=ne.body.firstChild;oe&&1==oe.nodeType&&!dtd.$empty[oe.tagName]&&ae.setStartAtFirst(oe).collapse(!0)}ae.select(!0)}this.fireEvent('focus selectionchange')}catch(re){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var te=this.selection.getNative();if(te.empty&&browser.ie){var ne=document.body.createTextRange();ne.moveToElementText(document.body),ne.collapse(!0),ne.select(),te.empty()}else te.removeAllRanges()},_initEvents:function(){var te=this,ne=te.document,ae=te.window;te._proxyDomEvent=utils.bind(te._proxyDomEvent,te),domUtils.on(ne,['click','contextmenu','mousedown','keydown','keyup','keypress','mouseup','mouseover','mouseout','selectstart'],te._proxyDomEvent),domUtils.on(ae,['focus','blur'],te._proxyDomEvent),domUtils.on(te.body,'drop',function(oe){browser.gecko&&oe.stopPropagation&&oe.stopPropagation(),te.fireEvent('contentchange')}),domUtils.on(ne,['mouseup','keydown'],function(oe){'keydown'==oe.type&&(oe.ctrlKey||oe.metaKey||oe.shiftKey||oe.altKey)||2==oe.button||te._selectionChange(250,oe)})},_proxyDomEvent:function(te){return!1!==this.fireEvent('before'+te.type.replace(/^on/,'').toLowerCase())&&!1!==this.fireEvent(te.type.replace(/^on/,''),te)&&this.fireEvent('after'+te.type.replace(/^on/,'').toLowerCase())},_selectionChange:function(te,ne){var ae=this,oe=!1,re,le;if(browser.ie&&9>browser.version&&ne&&'mouseup'==ne.type){var se=this.selection.getRange();se.collapsed||(oe=!0,re=ne.clientX,le=ne.clientY)}clearTimeout(Z),Z=setTimeout(function(){if(ae.selection&&ae.selection.getNative()){var de;if(oe&&'None'==ae.selection.getNative().type){de=ae.document.body.createTextRange();try{de.moveToPoint(re,le)}catch(ue){de=null}}var ce;de&&(ce=ae.selection.getIERange,ae.selection.getIERange=function(){return de}),ae.selection.cache(),ce&&(ae.selection.getIERange=ce),ae.selection._cachedRange&&ae.selection._cachedStartElement&&(ae.fireEvent('beforeselectionchange'),ae.fireEvent('selectionchange',!!ne),ae.fireEvent('afterselectionchange'),ae.selection.clear())}},te||50)},_callCmdFn:function(te,ne){var ae=ne[0].toLowerCase(),oe,re;return(oe=this.commands[ae]||UE.commands[ae],re=oe&&oe[te],(!oe||!re)&&'queryCommandState'==te)?0:re?re.apply(this,ne):void 0},execCommand:function(te){te=te.toLowerCase();var ne=this,oe=ne.commands[te]||UE.commands[te],ae;return oe&&oe.execCommand?(oe.notNeedUndo||ne.__hasEnterExecCommand?(ae=this._callCmdFn('execCommand',arguments),!ne.__hasEnterExecCommand&&!oe.ignoreContentChange&&!ne._ignoreContentChange&&ne.fireEvent('contentchange')):(ne.__hasEnterExecCommand=!0,-1!=ne.queryCommandState.apply(ne,arguments)&&(ne.fireEvent('saveScene'),ne.fireEvent.apply(ne,['beforeexeccommand',te].concat(arguments)),ae=this._callCmdFn('execCommand',arguments),ne.fireEvent.apply(ne,['afterexeccommand',te].concat(arguments)),ne.fireEvent('saveScene')),ne.__hasEnterExecCommand=!1),ne.__hasEnterExecCommand||oe.ignoreContentChange||ne._ignoreContentChange||ne._selectionChange(),ae):null},queryCommandState:function(){return this._callCmdFn('queryCommandState',arguments)},queryCommandValue:function(){return this._callCmdFn('queryCommandValue',arguments)},hasContents:function(te){if(te)for(var ne=0,ae;ae=te[ne++];)if(0<this.document.getElementsByTagName(ae).length)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(te=['div'],ne=0;ae=te[ne++];)for(var oe=domUtils.getElementsByTagName(this.document,ae),re=0,le;le=oe[re++];)if(domUtils.isCustomeNode(le))return!0;return!1},reset:function(){this.fireEvent('reset')},setEnabled:function(){var te=this,ne;if('false'==te.body.contentEditable){te.body.contentEditable=!0,ne=te.selection.getRange();try{ne.moveToBookmark(te.lastBk),delete te.lastBk}catch(ae){ne.setStartAtFirst(te.body).collapse(!0)}ne.select(!0),te.bkqueryCommandState&&(te.queryCommandState=te.bkqueryCommandState,delete te.bkqueryCommandState),te.bkqueryCommandValue&&(te.queryCommandValue=te.bkqueryCommandValue,delete te.bkqueryCommandValue),te.fireEvent('selectionchange')}},enable:function(){return this.setEnabled()},setDisabled:function(te){var ne=this;te=te?utils.isArray(te)?te:[te]:[],'true'==ne.body.contentEditable&&(!ne.lastBk&&(ne.lastBk=ne.selection.getRange().createBookmark(!0)),ne.body.contentEditable=!1,ne.bkqueryCommandState=ne.queryCommandState,ne.bkqueryCommandValue=ne.queryCommandValue,ne.queryCommandState=function(ae){return-1==utils.indexOf(te,ae)?-1:ne.bkqueryCommandState.apply(ne,arguments)},ne.queryCommandValue=function(ae){return-1==utils.indexOf(te,ae)?null:ne.bkqueryCommandValue.apply(ne,arguments)},ne.fireEvent('selectionchange'))},disable:function(te){return this.setDisabled(te)},_setDefaultContent:function(){function te(){var ne=this;ne.document.getElementById('initContent')&&(ne.body.innerHTML='<p>'+(ie?'':'<br/>')+'</p>',ne.removeListener('firstBeforeExecCommand focus',te),setTimeout(function(){ne.focus(),ne._selectionChange()},0))}return function(ne){var ae=this;ae.body.innerHTML='<p id="initContent">'+ne+'</p>',ae.addListener('firstBeforeExecCommand focus',te)}}(),setShow:function(){var te=this,ne=te.selection.getRange();if('none'==te.container.style.display){try{ne.moveToBookmark(te.lastBk),delete te.lastBk}catch(ae){ne.setStartAtFirst(te.body).collapse(!0)}setTimeout(function(){ne.select(!0)},100),te.container.style.display=''}},show:function(){return this.setShow()},setHide:function(){var te=this;te.lastBk||(te.lastBk=te.selection.getRange().createBookmark(!0)),te.container.style.display='none'},hide:function(){return this.setHide()},getLang:function(te){var ne=UE.I18N[this.options.lang];if(!ne)throw Error('not import language file');te=(te||'').split('.');for(var ae=0,oe;(oe=te[ae++])&&(ne=ne[oe],!!ne););return ne},getContentLength:function(te,ne){var ae=this.getContent(!1,!1,!0).length;if(te){ne=(ne||[]).concat(['hr','img','iframe']),ae=this.getContentTxt().replace(/[\t\r\n]+/g,'').length;for(var oe=0,re;re=ne[oe++];)ae+=this.document.getElementsByTagName(re).length}return ae},addInputRule:function(te){this.inputRules.push(te)},filterInputRule:function(te){for(var ne=0,ae;ae=this.inputRules[ne++];)ae.call(this,te)},addOutputRule:function(te){this.outputRules.push(te)},filterOutputRule:function(te){for(var ne=0,ae;ae=this.outputRules[ne++];)ae.call(this,te)},getActionUrl:function(te){var ne=this.getOpt(te)||te,ae=this.getOpt('imageUrl'),oe=this.getOpt('serverUrl');return!oe&&ae&&(oe=ae.replace(/^(.*[\/]).+([\.].+)$/,'$1controller$2')),oe?(oe=oe+(-1==oe.indexOf('?')?'?':'&')+'action='+(ne||''),utils.formatUrl(oe)):''}},utils.inherits(ee,EventBase)}(),UE.Editor.defaultOptions=function(o){var $=o.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:'',initialStyle:'',autoClearinitialContent:!1,iframeCssUrl:$+'themes/iframe.css',textarea:'editorValue',focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:'p',customDomain:!1,lang:'zh-cn',langPath:$+'lang/',theme:'default',themePath:$+'themes/',allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:'{time}{rand:6}'}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(o){console&&console.error(o)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt('serverUrl',me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,'$1controller$2'));var configUrl=me.getActionUrl('config'),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:'GET',dataType:isJsonp?'jsonp':'',onsuccess:function(r){try{var config=isJsonp?r:eval('('+r.responseText+')');utils.extend(me.options,config),me.fireEvent('serverConfigLoaded'),me._serverConfigLoaded=!0}catch(o){showErrorMsg(me.getLang('loadconfigFormatError'))}},onerror:function(){showErrorMsg(me.getLang('loadconfigHttpError'))}})}catch(o){showErrorMsg(me.getLang('loadconfigError'))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var o=this;return o._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(o){if(o&&utils.isFunction(o)){var $=this,z=function(){o.apply($,arguments),$.removeListener('serverConfigLoaded',z)};$.isServerConfigLoaded()?o.call($,'serverConfigLoaded'):$.addListener('serverConfigLoaded',z)}}}(),UE.ajax=function(){function o(Z){var ee=[];for(var te in Z)if('method'!=te&&'timeout'!=te&&'async'!=te&&'dataType'!=te&&'callback'!=te&&void 0!=Z[te]&&null!=Z[te])if('function'!=(typeof Z[te]).toLowerCase()&&'object'!=(typeof Z[te]).toLowerCase())ee.push(encodeURIComponent(te)+'='+encodeURIComponent(Z[te]));else if(utils.isArray(Z[te]))for(var ne=0;ne<Z[te].length;ne++)ee.push(encodeURIComponent(te)+'[]='+encodeURIComponent(Z[te][ne]));return ee.join('&')}function $(Z,ee){var te=Y(),ne=!1,ae={method:'POST',timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if('object'==typeof Z&&(ee=Z,Z=ee.url),te&&Z){var oe=ee?utils.extend(ae,ee):ae,re=o(oe);utils.isEmptyObject(oe.data)||(re+=(re?'&':'')+o(oe.data));var le=setTimeout(function(){4!=te.readyState&&(ne=!0,te.abort(),clearTimeout(le))},oe.timeout),se=oe.method.toUpperCase(),de=Z+(-1==Z.indexOf('?')?'?':'&')+('POST'==se?'':re+'&noCache='+ +new Date);te.open(se,de,oe.async),te.onreadystatechange=function(){4==te.readyState&&(ne||200!=te.status?oe.onerror(te):oe.onsuccess(te))},'POST'==se?(te.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),te.send(re)):te.send(null)}}function z(Z,ee){function ne(ye){return function(){try{if(ye)re.onerror&&re.onerror();else try{clearTimeout(ue),ae.apply(window,arguments)}catch(be){}}catch(be){re.onerror&&re.onerror.call(window,be)}finally{re.oncomplete&&re.oncomplete.apply(window,arguments),oe.parentNode&&oe.parentNode.removeChild(oe),window[de]=null;try{delete window[de]}catch(be){}}}}var ae=ee.onsuccess||function(){},oe=document.createElement('SCRIPT'),re=ee||{},le=re.charset,se=re.jsonp||'callback',ce=re.timeOut||0,ge=new RegExp('(\\?|&)'+se+'=([^&]*)'),de,ue,he;utils.isFunction(ae)?(de='bd__editor__'+_Mathfloor(2147483648*Math.random()).toString(36),window[de]=ne(0)):utils.isString(ae)?de=ae:(he=ge.exec(Z))&&(de=he[2]),Z=Z.replace(ge,'$1'+se+'='+de),0>Z.search(ge)&&(Z+=(0>Z.indexOf('?')?'?':'&')+se+'='+de);var fe=o(ee);utils.isEmptyObject(ee.data)||(fe+=(fe?'&':'')+o(ee.data)),fe&&(Z=Z.replace(/\?/,'?'+fe+'&')),oe.onerror=ne(1),ce&&(ue=setTimeout(ne(1),ce)),function(ye,be,Ce){ye.setAttribute('type','text/javascript'),ye.setAttribute('defer','defer'),Ce&&ye.setAttribute('charset',Ce),ye.setAttribute('src',be),document.getElementsByTagName('head')[0].appendChild(ye)}(oe,Z,le)}var W='XMLHttpRequest()';try{new ActiveXObject('Msxml2.XMLHTTP'),W='ActiveXObject(\'Msxml2.XMLHTTP\')'}catch(Z){try{new ActiveXObject('Microsoft.XMLHTTP'),W='ActiveXObject(\'Microsoft.XMLHTTP\')'}catch(ee){}}var Y=new Function('return new '+W);return{request:function(Z,ee){ee&&'jsonp'==ee.dataType?z(Z,ee):$(Z,ee)},getJSONP:function(Z,ee,te){z(Z,{data:ee,oncomplete:te})}}}();var filterWord=UE.filterWord=function(){function o(W){return /(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(W)}function $(W){return W=W.replace(/[\d.]+\w+/g,function(Y){return utils.transUnitToPx(Y)}),W}function z(W){return W.replace(/[\t\r\n]+/g,' ').replace(/<!--[\s\S]*?-->/ig,'').replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(Y){if(browser.opera)return'';try{if(/Bitmap/i.test(Y))return'';var Z=Y.match(/width:([ \d.]*p[tx])/i)[1],ee=Y.match(/height:([ \d.]*p[tx])/i)[1],te=Y.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+$(Z)+'" height="'+$(ee)+'" src="'+te+'" />'}catch(ne){return''}}).replace(/<\/?div[^>]*>/g,'').replace(/v:\w+=(["']?)[^'"]+\1/g,'').replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,'').replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,'<p><strong>$1</strong></p>').replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(Y,Z,ee,te){return'class'==Z&&'MsoListParagraph'==te?Y:''}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(Y,Z,ee){return ee.replace(/[\t\r\n ]+/g,' ')}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(Y,Z,ee,te){for(var ne=[],ae=te.replace(/^\s+|\s+$/,'').replace(/&#39;/g,'\'').replace(/&quot;/gi,'\'').replace(/[\d.]+(cm|pt)/g,function(ce){return utils.transUnitToPx(ce)}).split(/;\s*/g),oe=0,re;re=ae[oe];oe++){var de=re.split(':'),le,se;if(2==de.length){if(le=de[0].toLowerCase(),se=de[1].toLowerCase(),/^(background)\w*/.test(le)&&0==se.replace(/(initial|\s)/g,'').length||/^(margin)\w*/.test(le)&&/^0\w+$/.test(se))continue;switch(le){case'mso-padding-alt':case'mso-padding-top-alt':case'mso-padding-right-alt':case'mso-padding-bottom-alt':case'mso-padding-left-alt':case'mso-margin-alt':case'mso-margin-top-alt':case'mso-margin-right-alt':case'mso-margin-bottom-alt':case'mso-margin-left-alt':case'mso-height':case'mso-width':case'mso-vertical-align-alt':/<table/.test(Z)||(ne[oe]=le.replace(/^mso-|-alt$/g,'')+':'+$(se));continue;case'horiz-align':ne[oe]='text-align:'+se;continue;case'vert-align':ne[oe]='vertical-align:'+se;continue;case'font-color':case'mso-foreground':ne[oe]='color:'+se;continue;case'mso-background':case'mso-highlight':ne[oe]='background:'+se;continue;case'mso-default-height':ne[oe]='min-height:'+$(se);continue;case'mso-default-width':ne[oe]='min-width:'+$(se);continue;case'mso-padding-between-alt':ne[oe]='border-collapse:separate;border-spacing:'+$(se);continue;case'text-line-through':('single'==se||'double'==se)&&(ne[oe]='text-decoration:line-through');continue;case'mso-zero-height':'yes'==se&&(ne[oe]='display:none');continue;case'margin':if(!/[1-9]/.test(se))continue;}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(le)||/text\-indent|padding|margin/.test(le)&&/\-[\d.]+/.test(se))continue;ne[oe]=le+':'+de[1]}}return Z+(ne.length?' style="'+ne.join(';').replace(/;{2,}/g,';')+'"':'')})}return function(W){return o(W)?z(W):W}}();(function(){function o(de,ce,ue){return de.push(se),ce+(ue?1:-1)}function $(de,ce){for(var ue=0;ue<ce;ue++)de.push(le)}function z(de,ce,ue,ge){switch(de.type){case'root':for(var he=0,fe;fe=de.children[he++];)ue&&'element'==fe.type&&!dtd.$inlineWithA[fe.tagName]&&1<he&&(o(ce,ge,!0),$(ce,ge)),z(fe,ce,ue,ge);break;case'text':W(de,ce);break;case'element':Y(de,ce,ue,ge);break;case'comment':Z(de,ce,ue);}return ce}function W(de,ce){'pre'==de.parentNode.tagName?ce.push(de.data):ce.push(re[de.parentNode.tagName]?utils.html(de.data):de.data.replace(/[ ]{2}/g,' &nbsp;'))}function Y(de,ce,ue,ge){var he='';if(de.attrs){he=[];var fe=de.attrs;for(var ye in fe)he.push(ye+(void 0===fe[ye]?'':'="'+(oe[ye]?utils.html(fe[ye]).replace(/["]/g,function(){return'&quot;'}):utils.unhtml(fe[ye]))+'"'));he=he.join(' ')}if(ce.push('<'+de.tagName+(he?' '+he:'')+(dtd.$empty[de.tagName]?'/':'')+'>'),ue&&!dtd.$inlineWithA[de.tagName]&&'pre'!=de.tagName&&de.children&&de.children.length&&(ge=o(ce,ge,!0),$(ce,ge)),de.children&&de.children.length)for(var be=0,Ce;Ce=de.children[be++];)ue&&'element'==Ce.type&&!dtd.$inlineWithA[Ce.tagName]&&1<be&&(o(ce,ge),$(ce,ge)),z(Ce,ce,ue,ge);dtd.$empty[de.tagName]||(ue&&!dtd.$inlineWithA[de.tagName]&&'pre'!=de.tagName&&de.children&&de.children.length&&(ge=o(ce,ge),$(ce,ge)),ce.push('</'+de.tagName+'>'))}function Z(de,ce){ce.push('<!--'+de.data+'-->')}function ee(de,ce){var ue;if('element'==de.type&&de.getAttr('id')==ce)return de;if(de.children&&de.children.length)for(var ge=0,he;he=de.children[ge++];)if(ue=ee(he,ce))return ue}function te(de,ce,ue){if('element'==de.type&&de.tagName==ce&&ue.push(de),de.children&&de.children.length)for(var ge=0,he;he=de.children[ge++];)te(he,ce,ue)}function ne(de,ce){if(de.children&&de.children.length)for(var ue=0,ge;ge=de.children[ue];)ne(ge,ce),ge.parentNode&&(ge.children&&ge.children.length&&ce(ge),ge.parentNode&&ue++);else ce(de)}var ae=UE.uNode=function(de){this.type=de.type,this.data=de.data,this.tagName=de.tagName,this.parentNode=de.parentNode,this.attrs=de.attrs||{},this.children=de.children},oe={href:1,src:1,_src:1,_href:1,cdata_data:1},re={style:1,script:1},le='    ',se='\n';ae.createElement=function(de){return /[<>]/.test(de)?UE.htmlparser(de).children[0]:new ae({type:'element',children:[],tagName:de})},ae.createText=function(de,ce){return new UE.uNode({type:'text',data:ce?de:utils.unhtml(de||'')})},ae.prototype={toHtml:function(de){var ce=[];return z(this,ce,de,0),ce.join('')},innerHTML:function(de){if('element'!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(de)){if(this.children)for(var ce=0,ue;ue=this.children[ce++];)ue.parentNode=null;this.children=[];for(var ge=UE.htmlparser(de),ce=0,ue;ue=ge.children[ce++];)this.children.push(ue),ue.parentNode=this;return this}var ge=new UE.uNode({type:'root',children:this.children});return ge.toHtml()},innerText:function(de,ce){if('element'!=this.type||dtd.$empty[this.tagName])return this;if(de){if(this.children)for(var ue=0,ge;ge=this.children[ue++];)ge.parentNode=null;return this.children=[],this.appendChild(ae.createText(de,ce)),this}return this.toHtml().replace(/<[^>]+>/g,'')},getData:function(){return'element'==this.type?'':this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var de=this.parentNode,ce=0,ue;ue=de.children[ce];ce++)if(ue===this)return 0==ce?null:de.children[ce-1]},nextSibling:function(){for(var de=this.parentNode,ce=0,ue;ue=de.children[ce++];)if(ue===this)return de.children[ce]},replaceChild:function(de,ce){if(this.children){de.parentNode&&de.parentNode.removeChild(de);for(var ue=0,ge;ge=this.children[ue];ue++)if(ge===ce)return this.children.splice(ue,1,de),ce.parentNode=null,de.parentNode=this,de}},appendChild:function(de){if('root'==this.type||'element'==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),de.parentNode&&de.parentNode.removeChild(de);for(var ce=0,ue;ue=this.children[ce];ce++)if(ue===de){this.children.splice(ce,1);break}return this.children.push(de),de.parentNode=this,de}},insertBefore:function(de,ce){if(this.children){de.parentNode&&de.parentNode.removeChild(de);for(var ue=0,ge;ge=this.children[ue];ue++)if(ge===ce)return this.children.splice(ue,0,de),de.parentNode=this,de}},insertAfter:function(de,ce){if(this.children){de.parentNode&&de.parentNode.removeChild(de);for(var ue=0,ge;ge=this.children[ue];ue++)if(ge===ce)return this.children.splice(ue+1,0,de),de.parentNode=this,de}},removeChild:function(de,ce){if(this.children)for(var ue=0,ge;ge=this.children[ue];ue++)if(ge===de){if(this.children.splice(ue,1),ge.parentNode=null,ce&&ge.children&&ge.children.length)for(var he=0,fe;fe=ge.children[he];he++)this.children.splice(ue+he,0,fe),fe.parentNode=this;return ge}},getAttr:function(de){return this.attrs&&this.attrs[de.toLowerCase()]},setAttr:function(de,ce){if(!de)return void delete this.attrs;if(this.attrs||(this.attrs={}),utils.isObject(de))for(var ue in de)de[ue]?this.attrs[ue.toLowerCase()]=de[ue]:delete this.attrs[ue];else ce?this.attrs[de.toLowerCase()]=ce:delete this.attrs[de]},getIndex:function(){for(var de=this.parentNode,ce=0,ue;ue=de.children[ce];ce++)if(ue===this)return ce;return-1},getNodeById:function(de){var ce;if(this.children&&this.children.length)for(var ue=0,ge;ge=this.children[ue++];)if(ce=ee(ge,de))return ce},getNodesByTagName:function(de){de=utils.trim(de).replace(/[ ]{2,}/g,' ').split(' ');var ce=[],ue=this;return utils.each(de,function(ge){if(ue.children&&ue.children.length)for(var he=0,fe;fe=ue.children[he++];)te(fe,ge,ce)}),ce},getStyle:function(de){var ce=this.getAttr('style');if(!ce)return'';var ue=new RegExp('(^|;)\\s*'+de+':([^;]+)','i'),ge=ce.match(ue);return ge&&ge[0]?ge[2]:''},setStyle:function(de,ce){function ue(fe,ye){var be=new RegExp('(^|;)\\s*'+fe+':([^;]+;?)','gi');ge=ge.replace(be,'$1'),ye&&(ge=fe+':'+utils.unhtml(ye)+';'+ge)}var ge=this.getAttr('style');if(ge||(ge=''),utils.isObject(de))for(var he in de)ue(he,de[he]);else ue(de,ce);this.setAttr('style',utils.trim(ge))},traversal:function(de){return this.children&&this.children.length&&ne(this,de),this}}})();var htmlparser=UE.htmlparser=function(o,$){function z(he,fe){if(re[he.tagName]){var ye=ae.createElement(re[he.tagName]);he.appendChild(ye),ye.appendChild(ae.createText(fe)),he=ye}else he.appendChild(ae.createText(fe))}function W(he,fe,ye){var be;if(be=oe[fe]){for(var Ce=he,xe;'root'!=Ce.type;){if(utils.isArray(be)?-1!=utils.indexOf(be,Ce.tagName):be==Ce.tagName){he=Ce,xe=!0;break}Ce=Ce.parentNode}xe||(he=W(he,utils.isArray(be)?be[0]:be))}var ve=new ae({parentNode:he,type:'element',tagName:fe.toLowerCase(),children:dtd.$empty[fe]?null:[]});if(ye){for(var Ne={},we;we=ee.exec(ye);)Ne[we[1].toLowerCase()]=ne[we[1].toLowerCase()]?we[2]||we[3]||we[4]:utils.unhtml(we[2]||we[3]||we[4]);ve.attrs=Ne}return he.children.push(ve),dtd.$empty[fe]?he:ve}function Y(he,fe){he.children.push(new ae({type:'comment',data:fe,parentNode:he}))}var Z=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,ee=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,te={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};o=o.replace(new RegExp(domUtils.fillChar,'g'),''),$||(o=o.replace(new RegExp('[\\r\\t\\n'+($?'':' ')+']*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n'+($?'':' ')+']*','g'),function(he,fe){return fe&&te[fe.toLowerCase()]?he.replace(/(^[\n\r]+)|([\n\r]+$)/g,''):he.replace(new RegExp('^[\\r\\n'+($?'':' ')+']+'),'').replace(new RegExp('[\\r\\n'+($?'':' ')+']+$'),'')}));for(var ne={href:1,src:1},ae=UE.uNode,oe={td:'tr',tr:['tbody','thead','tfoot'],tbody:'table',th:'tr',thead:'table',tfoot:'table',caption:'table',li:['ul','ol'],dt:'dl',dd:'dl',option:'select'},re={ol:'li',ul:'li'},se=0,de=0,ce=new ae({type:'root',children:[]}),ue=ce,le;le=Z.exec(o);){se=le.index;try{if(se>de&&z(ue,o.slice(de,se)),le[3])dtd.$cdata[ue.tagName]?z(ue,le[0]):ue=W(ue,le[3].toLowerCase(),le[4]);else if(!le[1])le[2]&&Y(ue,le[2]);else if('root'!=ue.type)if(dtd.$cdata[ue.tagName]&&!dtd.$cdata[le[1]])z(ue,le[0]);else{for(var ge=ue;'element'==ue.type&&ue.tagName!=le[1].toLowerCase();)if(ue=ue.parentNode,'root'==ue.type)throw ue=ge,'break';ue=ue.parentNode}}catch(he){}de=Z.lastIndex}return de<o.length&&z(ue,o.slice(de)),ce},filterNode=UE.filterNode=function(){function o($,z){switch($.type){case'text':break;case'element':var W;if(W=z[$.tagName]){if('-'===W)$.parentNode.removeChild($);else if(utils.isFunction(W)){var Y=$.parentNode,Z=$.getIndex();if(W($),!$.parentNode)for(var ee=Z,te;te=Y.children[ee];)o(te,z),te.parentNode&&ee++;else if($.children)for(var ee=0,te;te=$.children[ee];)o(te,z),te.parentNode&&ee++}else{var ne=W.$;if(ne&&$.attrs){var ae={},oe;for(var re in ne){if(oe=$.getAttr(re),'style'==re&&utils.isArray(ne[re])){var le=[];utils.each(ne[re],function(se){var de;(de=$.getStyle(se))&&le.push(se+':'+de)}),oe=le.join(';')}oe&&(ae[re]=oe)}$.attrs=ae}if($.children)for(var ee=0,te;te=$.children[ee];)o(te,z),te.parentNode&&ee++}}else if(dtd.$cdata[$.tagName])$.parentNode.removeChild($);else{var Y=$.parentNode,Z=$.getIndex();$.parentNode.removeChild($,!0);for(var ee=Z,te;te=Y.children[ee];)o(te,z),te.parentNode&&ee++}break;case'comment':$.parentNode.removeChild($);}}return function($,z){if(utils.isEmptyObject(z))return $;var W;(W=z['-'])&&utils.each(W.split(' '),function(ee){z[ee]='-'});for(var Y=0,Z;Z=$.children[Y];)o(Z,z),Z.parentNode&&Y++;return $}}();UE.plugin=function(){var o={};return{register:function($,z,W,Y){W&&utils.isFunction(W)&&(Y=W,W=null),o[$]={optionName:W||$,execFn:z,afterDisabled:Y}},load:function($){utils.each(o,function(z){var W=z.execFn.call($);!1===$.options[z.optionName]?z.afterDisabled&&z.afterDisabled.call($):W&&utils.each(W,function(Y,Z){switch(Z.toLowerCase()){case'shortcutkey':$.addshortcutkey(Y);break;case'bindevents':utils.each(Y,function(ee,te){$.addListener(te,ee)});break;case'bindmultievents':utils.each(utils.isArray(Y)?Y:[Y],function(ee){var te=utils.trim(ee.type).split(/\s+/);utils.each(te,function(ne){$.addListener(ne,ee.handler)})});break;case'commands':utils.each(Y,function(ee,te){$.commands[te]=ee});break;case'outputrule':$.addOutputRule(Y);break;case'inputrule':$.addInputRule(Y);break;case'defaultoptions':$.setOpt(Y);}})}),utils.each(UE.plugins,function(z){z.call($)})},run:function($,z){var W=o[$];W&&W.exeFn.call(z)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){var $=window.localStorage||function(){var W=document.createElement('div');return(W.style.display='none',!W.addBehavior)?null:(W.addBehavior('#default#userdata'),{getItem:function(Y){var Z=null;try{document.body.appendChild(W),W.load(z),Z=W.getAttribute(Y),document.body.removeChild(W)}catch(ee){}return Z},setItem:function(Y,Z){document.body.appendChild(W),W.setAttribute(Y,Z),W.save(z),document.body.removeChild(W)},removeItem:function(Y){document.body.appendChild(W),W.removeAttribute(Y),W.save(z),document.body.removeChild(W)}})}()||null,z='localStorage';return{saveLocalData:function(W,Y){return $&&Y&&($.setItem(W,Y),!0)},getLocalData:function(W){return $?$.getItem(W):null},removeItem:function(W){$&&$.removeItem(W)}}}();(function(){var o='ueditor_preference';UE.Editor.prototype.setPreferences=function($,z){var W={};utils.isString($)?W[$]=z:W=$;var Y=LocalStorage.getLocalData(o);Y&&(Y=utils.str2json(Y))?utils.extend(Y,W):Y=W,Y&&LocalStorage.saveLocalData(o,utils.json2str(Y))},UE.Editor.prototype.getPreferences=function($){var z=LocalStorage.getLocalData(o);return z&&(z=utils.str2json(z))?$?z[$]:z:null},UE.Editor.prototype.removePreferences=function($){var z=LocalStorage.getLocalData(o);z&&(z=utils.str2json(z))&&(z[$]=void 0,delete z[$]),z&&LocalStorage.saveLocalData(o,utils.json2str(z))}})(),UE.plugins.defaultfilter=function(){var o=this;o.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),o.addInputRule(function($){function z(Z){for(;Z&&'element'==Z.type;){if('td'==Z.tagName)return!0;Z=Z.parentNode}return!1}var W=this.options.allowDivTransToP,Y;$.traversal(function(Z){if('element'==Z.type){if(!dtd.$cdata[Z.tagName]&&o.options.autoClearEmptyNode&&dtd.$inline[Z.tagName]&&!dtd.$empty[Z.tagName]&&(!Z.attrs||utils.isEmptyObject(Z.attrs)))return void(Z.firstChild()?'span'==Z.tagName&&(!Z.attrs||utils.isEmptyObject(Z.attrs))&&Z.parentNode.removeChild(Z,!0):Z.parentNode.removeChild(Z));switch(Z.tagName){case'style':case'script':Z.setAttr({cdata_tag:Z.tagName,cdata_data:Z.innerHTML()||'',_ue_custom_node_:'true'}),Z.tagName='div',Z.innerHTML('');break;case'a':(Y=Z.getAttr('href'))&&Z.setAttr('_href',Y);break;case'img':if((Y=Z.getAttr('src'))&&/^data:/.test(Y)){Z.parentNode.removeChild(Z);break}Z.setAttr('_src',Z.getAttr('src'));break;case'span':browser.webkit&&(Y=Z.getStyle('white-space'))&&/nowrap|normal/.test(Y)&&(Z.setStyle('white-space',''),o.options.autoClearEmptyNode&&utils.isEmptyObject(Z.attrs)&&Z.parentNode.removeChild(Z,!0)),Y=Z.getAttr('id'),Y&&/^_baidu_bookmark_/i.test(Y)&&Z.parentNode.removeChild(Z);break;case'p':(Y=Z.getAttr('align'))&&(Z.setAttr('align'),Z.setStyle('text-align',Y)),utils.each(Z.children,function(oe){if('element'==oe.type&&'p'==oe.tagName){var re=oe.nextSibling();Z.parentNode.insertAfter(oe,Z);for(var le=oe,se;re;)se=re.nextSibling(),Z.parentNode.insertAfter(re,le),le=re,re=se;return!1}}),Z.firstChild()||Z.innerHTML(browser.ie?'&nbsp;':'<br/>');break;case'div':if(Z.getAttr('cdata_tag'))break;if(Y=Z.getAttr('class'),Y&&/^line number\d+/.test(Y))break;if(!W)break;for(var te=UE.uNode.createElement('p'),ee;ee=Z.firstChild();)'text'!=ee.type&&UE.dom.dtd.$block[ee.tagName]?te.firstChild()?(Z.parentNode.insertBefore(te,Z),te=UE.uNode.createElement('p')):Z.parentNode.insertBefore(ee,Z):te.appendChild(ee);te.firstChild()&&Z.parentNode.insertBefore(te,Z),Z.parentNode.removeChild(Z);break;case'dl':Z.tagName='ul';break;case'dt':case'dd':Z.tagName='li';break;case'li':var ne=Z.getAttr('class');ne&&/list\-/.test(ne)||Z.setAttr();var ae=Z.getNodesByTagName('ol ul');UE.utils.each(ae,function(oe){Z.parentNode.insertAfter(oe,Z)});break;case'td':case'th':case'caption':Z.children&&Z.children.length||Z.appendChild(browser.ie11below?UE.uNode.createText(' '):UE.uNode.createElement('br'));break;case'table':o.options.disabledTableInTable&&z(Z)&&(Z.parentNode.insertBefore(UE.uNode.createText(Z.innerText()),Z),Z.parentNode.removeChild(Z));}}})}),o.addOutputRule(function($){var z;$.traversal(function(W){if('element'==W.type){if(o.options.autoClearEmptyNode&&dtd.$inline[W.tagName]&&!dtd.$empty[W.tagName]&&(!W.attrs||utils.isEmptyObject(W.attrs)))return void(W.firstChild()?'span'==W.tagName&&(!W.attrs||utils.isEmptyObject(W.attrs))&&W.parentNode.removeChild(W,!0):W.parentNode.removeChild(W));switch(W.tagName){case'div':(z=W.getAttr('cdata_tag'))&&(W.tagName=z,W.appendChild(UE.uNode.createText(W.getAttr('cdata_data'))),W.setAttr({cdata_tag:'',cdata_data:'',_ue_custom_node_:''}));break;case'a':(z=W.getAttr('_href'))&&W.setAttr({href:utils.html(z),_href:''});break;break;case'span':z=W.getAttr('id'),z&&/^_baidu_bookmark_/i.test(z)&&W.parentNode.removeChild(W);break;case'img':(z=W.getAttr('_src'))&&W.setAttr({src:W.getAttr('_src'),_src:''});}}})})},UE.commands.inserthtml={execCommand:function(o,$,z){var W=this,Y,Z;if($&&!0!==W.fireEvent('beforeinserthtml',$)){if(Y=W.selection.getRange(),Z=Y.document.createElement('div'),Z.style.display='inline',!z){var ee=UE.htmlparser($);W.options.filterRules&&UE.filterNode(ee,W.options.filterRules),W.filterInputRule(ee),$=ee.toHtml()}if(Z.innerHTML=utils.trim($),!Y.collapsed){var te=Y.startContainer;if(domUtils.isFillChar(te)&&Y.setStartBefore(te),te=Y.endContainer,domUtils.isFillChar(te)&&Y.setEndAfter(te),Y.txtToElmBoundary(),Y.endContainer&&1==Y.endContainer.nodeType&&(te=Y.endContainer.childNodes[Y.endOffset],te&&domUtils.isBr(te)&&Y.setEndAfter(te)),0==Y.startOffset&&(te=Y.startContainer,domUtils.isBoundaryNode(te,'firstChild')&&(te=Y.endContainer,Y.endOffset==(3==te.nodeType?te.nodeValue.length:te.childNodes.length)&&domUtils.isBoundaryNode(te,'lastChild')&&(W.body.innerHTML='<p>'+(browser.ie?'':'<br/>')+'</p>',Y.setStart(W.body.firstChild,0).collapse(!0)))),Y.collapsed||Y.deleteContents(),1==Y.startContainer.nodeType){var ne=Y.startContainer.childNodes[Y.startOffset],ae;if(ne&&domUtils.isBlockElm(ne)&&(ae=ne.previousSibling)&&domUtils.isBlockElm(ae)){for(Y.setEnd(ae,ae.childNodes.length).collapse();ne.firstChild;)ae.appendChild(ne.firstChild);domUtils.remove(ne)}}}var le=0,ne,oe,ae,re,se;Y.inFillChar()&&(ne=Y.startContainer,domUtils.isFillChar(ne)?(Y.setStartBefore(ne).collapse(!0),domUtils.remove(ne)):domUtils.isFillChar(ne,!0)&&(ne.nodeValue=ne.nodeValue.replace(fillCharReg,''),Y.startOffset--,Y.collapsed&&Y.collapse(!0)));var de=domUtils.findParentByTagName(Y.startContainer,'li',!0);if(de){for(var ce,ue;ne=Z.firstChild;){for(;ne&&(3==ne.nodeType||!domUtils.isBlockElm(ne)||'HR'==ne.tagName);)ce=ne.nextSibling,Y.insertNode(ne).collapse(),ue=ne,ne=ce;if(ne)if(/^(ol|ul)$/i.test(ne.tagName)){for(;ne.firstChild;)ue=ne.firstChild,domUtils.insertAfter(de,ne.firstChild),de=de.nextSibling;domUtils.remove(ne)}else{var ge;ce=ne.nextSibling,ge=W.document.createElement('li'),domUtils.insertAfter(de,ge),ge.appendChild(ne),ue=ne,ne=ce,de=ge}}de=domUtils.findParentByTagName(Y.startContainer,'li',!0),domUtils.isEmptyBlock(de)&&domUtils.remove(de),ue&&Y.setStartAfter(ue).collapse(!0).select(!0)}else{for(;ne=Z.firstChild;){if(le){for(var he=W.document.createElement('p');ne&&(3==ne.nodeType||!dtd.$block[ne.tagName]);)se=ne.nextSibling,he.appendChild(ne),ne=se;he.firstChild&&(ne=he)}if(Y.insertNode(ne),se=ne.nextSibling,!le&&ne.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(ne)&&(oe=domUtils.findParent(ne,function(fe){return domUtils.isBlockElm(fe)}),oe&&'body'!=oe.tagName.toLowerCase()&&!(dtd[oe.tagName][ne.nodeName]&&ne.parentNode===oe))){if(!dtd[oe.tagName][ne.nodeName])ae=oe;else for(re=ne.parentNode;re!==oe;)ae=re,re=re.parentNode;domUtils.breakParent(ne,ae||re);var ae=ne.previousSibling;domUtils.trimWhiteTextNode(ae),ae.childNodes.length||domUtils.remove(ae),!browser.ie&&(ce=ne.nextSibling)&&domUtils.isBlockElm(ce)&&ce.lastChild&&!domUtils.isBr(ce.lastChild)&&ce.appendChild(W.document.createElement('br')),le=1}var ce=ne.nextSibling;if(!Z.firstChild&&ce&&domUtils.isBlockElm(ce)){Y.setStart(ce,0).collapse(!0);break}Y.setEndAfter(ne).collapse()}if(ne=Y.startContainer,se&&domUtils.isBr(se)&&domUtils.remove(se),domUtils.isBlockElm(ne)&&domUtils.isEmptyNode(ne))if(se=ne.nextSibling)domUtils.remove(ne),1==se.nodeType&&dtd.$block[se.tagName]&&Y.setStart(se,0).collapse(!0).shrinkBoundary();else try{ne.innerHTML=browser.ie?domUtils.fillChar:'<br/>'}catch(fe){Y.setStartBefore(ne),domUtils.remove(ne)}try{Y.select(!0)}catch(fe){}}setTimeout(function(){Y=W.selection.getRange(),Y.scrollToView(W.autoHeightEnabled,W.autoHeightEnabled?domUtils.getXY(W.iframe).y:0),W.fireEvent('afterinserthtml',$)},200)}}},UE.plugins.autotypeset=function(){function o(le,se){return le&&3!=le.nodeType?domUtils.isBr(le)?1:le&&le.parentNode&&oe[le.tagName.toLowerCase()]?re&&re.contains(le)||le.getAttribute('pagebreak')?0:se?!domUtils.isEmptyBlock(le):domUtils.isEmptyBlock(le,new RegExp('[\\s'+domUtils.fillChar+']','g')):void 0:0}function $(le){le.style.cssText||(domUtils.removeAttributes(le,['style']),'span'==le.tagName.toLowerCase()&&domUtils.hasNoAttributes(le)&&domUtils.remove(le,!0))}function z(le,se){var de=this,ce;if(se){if(!te.pasteFilter)return;ce=de.document.createElement('div'),ce.innerHTML=se.html}else ce=de.document.body;for(var ue=domUtils.getElementsByTagName(ce,'*'),ge=0,he;he=ue[ge++];)if(!0!==de.fireEvent('excludeNodeinautotype',he)){if(te.clearFontSize&&he.style.fontSize&&(domUtils.removeStyle(he,'font-size'),$(he)),te.clearFontFamily&&he.style.fontFamily&&(domUtils.removeStyle(he,'font-family'),$(he)),o(he)){if(te.mergeEmptyline)for(var fe=he.nextSibling,be=domUtils.isBr(he),ye;o(fe)&&(ye=fe,fe=ye.nextSibling,!be||fe&&(!fe||domUtils.isBr(fe)));)domUtils.remove(ye);if(te.removeEmptyline&&domUtils.inDoc(he,ce)&&!ae[he.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(he)&&(fe=he.nextSibling,fe&&!domUtils.isBr(fe)))continue;domUtils.remove(he);continue}}if(o(he,!0)&&'SPAN'!=he.tagName&&(te.indent&&(he.style.textIndent=te.indentValue),te.textAlign&&(he.style.textAlign=te.textAlign)),te.removeClass&&he.className&&!ne[he.className.toLowerCase()]){if(re&&re.contains(he))continue;domUtils.removeAttributes(he,['class'])}if(te.imageBlockLine&&'img'==he.tagName.toLowerCase()&&!he.getAttribute('emotion'))if(se){var Ce=he;switch(te.imageBlockLine){case'left':case'right':case'none':for(var xe=Ce.parentNode,ye,ve,fe;dtd.$inline[xe.tagName]||'A'==xe.tagName;)xe=xe.parentNode;if(ye=xe,'P'==ye.tagName&&'center'==domUtils.getStyle(ye,'text-align')&&!domUtils.isBody(ye)&&1==domUtils.getChildCount(ye,function(Te){return!domUtils.isBr(Te)&&!domUtils.isWhitespace(Te)}))if(ve=ye.previousSibling,fe=ye.nextSibling,ve&&fe&&1==ve.nodeType&&1==fe.nodeType&&ve.tagName==fe.tagName&&domUtils.isBlockElm(ve)){for(ve.appendChild(ye.firstChild);fe.firstChild;)ve.appendChild(fe.firstChild);domUtils.remove(ye),domUtils.remove(fe)}else domUtils.setStyle(ye,'text-align','');domUtils.setStyle(Ce,'float',te.imageBlockLine);break;case'center':if('center'!=de.queryCommandValue('imagefloat')){for(xe=Ce.parentNode,domUtils.setStyle(Ce,'float','none'),ye=Ce;xe&&1==domUtils.getChildCount(xe,function(Te){return!domUtils.isBr(Te)&&!domUtils.isWhitespace(Te)})&&(dtd.$inline[xe.tagName]||'A'==xe.tagName);)ye=xe,xe=xe.parentNode;var Ne=de.document.createElement('p');domUtils.setAttributes(Ne,{style:'text-align:center'}),ye.parentNode.insertBefore(Ne,ye),Ne.appendChild(ye),domUtils.setStyle(ye,'float','')}}}else{var we=de.selection.getRange();we.selectNode(he).select(),de.execCommand('imagefloat',te.imageBlockLine)}te.removeEmptyNode&&te.removeTagNames[he.tagName.toLowerCase()]&&domUtils.hasNoAttributes(he)&&domUtils.isEmptyBlock(he)&&domUtils.remove(he)}if(te.tobdc){var Se=UE.htmlparser(ce.innerHTML);Se.traversal(function(Te){'text'==Te.type&&(Te.data=Y(Te.data))}),ce.innerHTML=Se.toHtml()}if(te.bdc2sb){var Se=UE.htmlparser(ce.innerHTML);Se.traversal(function(Te){'text'==Te.type&&(Te.data=W(Te.data))}),ce.innerHTML=Se.toHtml()}se&&(se.html=ce.innerHTML)}function W(le){for(var se='',de=0,ce;de<le.length;de++)ce=le.charCodeAt(de),se+=65281<=ce&&65373>=ce?_StringfromCharCode(le.charCodeAt(de)-65248):12288==ce?_StringfromCharCode(le.charCodeAt(de)-12288+32):le.charAt(de);return se}function Y(le){le=utils.html(le);for(var se='',ce=0;ce<le.length;ce++)se+=32==le.charCodeAt(ce)?'\u3000':127>le.charCodeAt(ce)?_StringfromCharCode(le.charCodeAt(ce)+65248):le.charAt(ce);return se}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:'left',imageBlockLine:'center',pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:'2em',bdc2sb:!1,tobdc:!1}});var ee=this,te=ee.options.autotypeset,ne={selectTdClass:1,pagebreak:1,anchorclass:1},ae={li:1},oe={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},re;te&&(function(){var le=ee.getPreferences('autotypeset');utils.extend(ee.options.autotypeset,le)}(),te.pasteFilter&&ee.addListener('beforepaste',z),ee.commands.autotypeset={execCommand:function(){ee.removeListener('beforepaste',z),te.pasteFilter&&ee.addListener('beforepaste',z),z.call(ee)}})},UE.plugin.register('autosubmit',function(){return{shortcutkey:{autosubmit:'ctrl+13'},commands:{autosubmit:{execCommand:function(){var o=this,$=domUtils.findParentByTagName(o.iframe,'form',!1);if($){if(!1===o.fireEvent('beforesubmit'))return;o.sync(),$.submit()}}}}}}),UE.plugin.register('background',function(){function o(te){var ne={},ae=te.split(';');return utils.each(ae,function(oe){var re=oe.indexOf(':'),le=utils.trim(oe.substr(0,re)).toLowerCase();le&&(ne[le]=utils.trim(oe.substr(re+1)||''))}),ne}function $(te){if(te){var ne=[];for(var ae in te)te.hasOwnProperty(ae)&&ne.push(ae+':'+te[ae]+'; ');utils.cssRule(W,ne.length?'body{'+ne.join('')+'}':'',z.document)}else utils.cssRule(W,'',z.document)}var z=this,W='editor_background',Z=/body[\s]*\{(.+)\}/i,ee=z.hasContents,Y;return z.hasContents=function(){return!!z.queryCommandValue('background')||ee.apply(z,arguments)},{bindEvents:{getAllHtml:function(te,ne){var ae=this.body,oe=domUtils.getComputedStyle(ae,'background-image'),re='';re=0<oe.indexOf(z.options.imagePath)?oe.substring(oe.indexOf(z.options.imagePath),oe.length-1).replace(/"|\(|\)/ig,''):'none'==oe?'':oe.replace(/url\("?|"?\)/ig,'');var le='<style type="text/css">body{',se={"background-color":domUtils.getComputedStyle(ae,'background-color')||'#ffffff',"background-image":re?'url('+re+')':'',"background-repeat":domUtils.getComputedStyle(ae,'background-repeat')||'',"background-position":browser.ie?domUtils.getComputedStyle(ae,'background-position-x')+' '+domUtils.getComputedStyle(ae,'background-position-y'):domUtils.getComputedStyle(ae,'background-position'),height:domUtils.getComputedStyle(ae,'height')};for(var de in se)se.hasOwnProperty(de)&&(le+=de+':'+se[de]+'; ');le+='}</style> ',ne.push(le)},aftersetcontent:function(){!1==Y&&$()}},inputRule:function(te){Y=!1,utils.each(te.getNodesByTagName('p'),function(ne){var ae=ne.getAttr('data-background');ae&&(Y=!0,$(o(ae)),ne.parentNode.removeChild(ne))})},outputRule:function(te){var ne=this,ae=(utils.cssRule(W,ne.document)||'').replace(/[\n\r]+/g,'').match(Z);ae&&te.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(ae[1].replace(/"/g,'').replace(/[\s]+/g,' '))+'"><br/></p>'))},commands:{background:{execCommand:function(te,ne){$(ne)},queryCommandValue:function(){var te=this,ne=(utils.cssRule(W,te.document)||'').replace(/[\n\r]+/g,'').match(Z);return ne?o(ne[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(o,$){var z=this,W=z.selection.getRange();if(!W.collapsed){var Y=W.getClosedNode();if(Y&&'IMG'==Y.tagName)switch($){case'left':case'right':case'none':for(var Z=Y.parentNode,ee,te,ne;dtd.$inline[Z.tagName]||'A'==Z.tagName;)Z=Z.parentNode;if(ee=Z,'P'==ee.tagName&&'center'==domUtils.getStyle(ee,'text-align')){if(!domUtils.isBody(ee)&&1==domUtils.getChildCount(ee,function(ae){return!domUtils.isBr(ae)&&!domUtils.isWhitespace(ae)}))if(te=ee.previousSibling,ne=ee.nextSibling,te&&ne&&1==te.nodeType&&1==ne.nodeType&&te.tagName==ne.tagName&&domUtils.isBlockElm(te)){for(te.appendChild(ee.firstChild);ne.firstChild;)te.appendChild(ne.firstChild);domUtils.remove(ee),domUtils.remove(ne)}else domUtils.setStyle(ee,'text-align','');W.selectNode(Y).select()}domUtils.setStyle(Y,'float','none'==$?'':$),'none'==$&&domUtils.removeAttributes(Y,'align');break;case'center':if('center'!=z.queryCommandValue('imagefloat')){for(Z=Y.parentNode,domUtils.setStyle(Y,'float',''),domUtils.removeAttributes(Y,'align'),ee=Y;Z&&1==domUtils.getChildCount(Z,function(ae){return!domUtils.isBr(ae)&&!domUtils.isWhitespace(ae)})&&(dtd.$inline[Z.tagName]||'A'==Z.tagName);)ee=Z,Z=Z.parentNode;W.setStartBefore(ee).setCursor(!1),Z=z.document.createElement('div'),Z.appendChild(ee),domUtils.setStyle(ee,'float',''),z.execCommand('insertHtml','<p id="_img_parent_tmp" style="text-align:center">'+Z.innerHTML+'</p>'),ee=z.document.getElementById('_img_parent_tmp'),ee.removeAttribute('id'),ee=ee.firstChild,W.selectNode(ee).select(),ne=ee.parentNode.nextSibling,ne&&domUtils.isEmptyNode(ne)&&domUtils.remove(ne)}}}},queryCommandValue:function(){var o=this.selection.getRange(),$,z;return o.collapsed?'none':($=o.getClosedNode(),$&&1==$.nodeType&&'IMG'==$.tagName?(z=domUtils.getComputedStyle($,'float')||$.getAttribute('align'),'none'==z&&(z='center'==domUtils.getComputedStyle($.parentNode,'text-align')?'center':z),{left:1,right:1,center:1}[z]?z:'none'):'none')},queryCommandState:function(){var o=this.selection.getRange(),$;return o.collapsed?-1:($=o.getClosedNode(),$&&1==$.nodeType&&'IMG'==$.tagName?0:-1)}},UE.commands.insertimage={execCommand:function(o,$){function z(le){utils.each('width,height,border,hspace,vspace'.split(','),function(se){le[se]&&(le[se]=parseInt(le[se],10)||0)}),utils.each('src,_src'.split(','),function(se){le[se]&&(le[se]=utils.unhtmlForUrl(le[se]))}),utils.each('title,alt'.split(','),function(se){le[se]&&(le[se]=utils.unhtml(le[se]))})}if($=utils.isArray($)?$:[$],!!$.length){var W=this,Y=W.selection.getRange(),Z=Y.getClosedNode();if(!0!==W.fireEvent('beforeinsertimage',$)){if(Z&&/img/i.test(Z.tagName)&&('edui-faked-video'!=Z.className||-1!=Z.className.indexOf('edui-upload-video'))&&!Z.getAttribute('word_img')){var ee=$.shift(),te=ee.floatStyle;delete ee.floatStyle,domUtils.setAttributes(Z,ee),W.execCommand('imagefloat',te),0<$.length&&(Y.setStartAfter(Z).setCursor(!1,!0),W.execCommand('insertimage',$))}else{var ne=[],ae='',oe;if(oe=$[0],1==$.length)z(oe),ae='<img src="'+oe.src+'" '+(oe._src?' _src="'+oe._src+'" ':'')+(oe.width?'width="'+oe.width+'" ':'')+(oe.height?' height="'+oe.height+'" ':'')+('left'==oe.floatStyle||'right'==oe.floatStyle?' style="float:'+oe.floatStyle+';"':'')+(oe.title&&''!=oe.title?' title="'+oe.title+'"':'')+(oe.border&&'0'!=oe.border?' border="'+oe.border+'"':'')+(oe.alt&&''!=oe.alt?' alt="'+oe.alt+'"':'')+(oe.hspace&&'0'!=oe.hspace?' hspace = "'+oe.hspace+'"':'')+(oe.vspace&&'0'!=oe.vspace?' vspace = "'+oe.vspace+'"':'')+'/>','center'==oe.floatStyle&&(ae='<p style="text-align: center">'+ae+'</p>'),ne.push(ae);else for(var re=0;oe=$[re++];)z(oe),ae='<p '+('center'==oe.floatStyle?'style="text-align: center" ':'')+'><img src="'+oe.src+'" '+(oe.width?'width="'+oe.width+'" ':'')+(oe._src?' _src="'+oe._src+'" ':'')+(oe.height?' height="'+oe.height+'" ':'')+' style="'+(oe.floatStyle&&'center'!=oe.floatStyle?'float:'+oe.floatStyle+';':'')+(oe.border||'')+'" '+(oe.title?' title="'+oe.title+'"':'')+' /></p>',ne.push(ae);W.execCommand('insertHtml',ne.join(''))}W.fireEvent('afterinsertimage',$)}}}},UE.plugins.justify=function(){var o=this,$=domUtils.isBlockElm,z={left:1,right:1,center:1,justify:1},W=function(Y,Z){var ee=Y.createBookmark(),te=function(ce){return 1==ce.nodeType?'br'!=ce.tagName.toLowerCase()&&!domUtils.isBookmarkNode(ce):!domUtils.isWhitespace(ce)};Y.enlarge(!0);for(var ne=Y.createBookmark(),ae=domUtils.getNextDomNode(ne.start,!1,te),oe=Y.cloneRange(),re;ae&&!(domUtils.getPosition(ae,ne.end)&domUtils.POSITION_FOLLOWING);)if(3==ae.nodeType||!$(ae)){for(oe.setStartBefore(ae);ae&&ae!==ne.end&&!$(ae);)re=ae,ae=domUtils.getNextDomNode(ae,!1,null,function(ce){return!$(ce)});oe.setEndAfter(re);var le=oe.getCommonAncestor();if(!domUtils.isBody(le)&&$(le))domUtils.setStyles(le,utils.isString(Z)?{"text-align":Z}:Z),ae=le;else{var se=Y.document.createElement('p');domUtils.setStyles(se,utils.isString(Z)?{"text-align":Z}:Z);var de=oe.extractContents();se.appendChild(de),oe.insertNode(se),ae=se}ae=domUtils.getNextDomNode(ae,!1,te)}else ae=domUtils.getNextDomNode(ae,!0,te);return Y.moveToBookmark(ne).moveToBookmark(ee)};UE.commands.justify={execCommand:function(Y,Z){var ee=this.selection.getRange(),te;return ee.collapsed&&(te=this.document.createTextNode('p'),ee.insertNode(te)),W(ee,Z),te&&(ee.setStartBefore(te).collapse(!0),domUtils.remove(te)),ee.select(),!0},queryCommandValue:function(){var Y=this.selection.getStart(),Z=domUtils.getComputedStyle(Y,'text-align');return z[Z]?Z:'left'},queryCommandState:function(){var Y=this.selection.getStart(),Z=Y&&domUtils.findParentByTagName(Y,['td','th','caption'],!0);return Z?-1:0}}},UE.plugins.font=function(){function o(ne){for(var ae;(ae=ne.parentNode)&&'SPAN'==ae.tagName&&1==domUtils.getChildCount(ae,function(oe){return!domUtils.isBookmarkNode(oe)&&!domUtils.isBr(oe)});)ae.style.cssText+=ne.style.cssText,domUtils.remove(ne,!0),ne=ae}function $(ne,ae,oe){if(ee[ae]&&(ne.adjustmentBoundary(),!ne.collapsed&&1==ne.startContainer.nodeType)){var re=ne.startContainer.childNodes[ne.startOffset];if(re&&domUtils.isTagNode(re,'span')){var le=ne.createBookmark();utils.each(domUtils.getElementsByTagName(re,'span'),function(se){!se.parentNode||domUtils.isBookmarkNode(se)||'backcolor'==ae&&domUtils.getComputedStyle(se,'background-color').toLowerCase()===oe||(domUtils.removeStyle(se,ee[ae]),0==se.style.cssText.replace(/^\s+$/,'').length&&domUtils.remove(se,!0))}),ne.moveToBookmark(le)}}}function z(ne,ae,oe){var re=ne.collapsed,le=ne.createBookmark(),se;if(re)for(se=le.start.parentNode;dtd.$inline[se.tagName];)se=se.parentNode;else se=domUtils.getCommonAncestor(le.start,le.end);utils.each(domUtils.getElementsByTagName(se,'span'),function(de){if(de.parentNode&&!domUtils.isBookmarkNode(de)){if(/\s*border\s*:\s*none;?\s*/i.test(de.style.cssText))return void(/^\s*border\s*:\s*none;?\s*$/.test(de.style.cssText)?domUtils.remove(de,!0):domUtils.removeStyle(de,'border'));if(/border/i.test(de.style.cssText)&&'SPAN'==de.parentNode.tagName&&/border/i.test(de.parentNode.style.cssText)&&(de.style.cssText=de.style.cssText.replace(/border[^:]*:[^;]+;?/gi,'')),'fontborder'!=ae||'none'!=oe)for(var ce=de.nextSibling;ce&&1==ce.nodeType&&'SPAN'==ce.tagName;){if(domUtils.isBookmarkNode(ce)&&'fontborder'==ae){de.appendChild(ce),ce=de.nextSibling;continue}if(ce.style.cssText==de.style.cssText&&(domUtils.moveChild(ce,de),domUtils.remove(ce)),de.nextSibling===ce)break;ce=de.nextSibling}if(o(de),browser.ie&&8<browser.version){var ue=domUtils.findParent(de,function(ge){return'SPAN'==ge.tagName&&/background-color/.test(ge.style.cssText)});ue&&!/background-color/.test(de.style.cssText)&&(de.style.backgroundColor=ue.style.backgroundColor)}}}),ne.moveToBookmark(le),$(ne,ae,oe)}var W=this,Y={forecolor:'color',backcolor:'background-color',fontsize:'font-size',fontfamily:'font-family',underline:'text-decoration',strikethrough:'text-decoration',fontborder:'border'},Z={underline:1,strikethrough:1,fontborder:1},ee={forecolor:'color',backcolor:'background-color',fontsize:'font-size',fontfamily:'font-family'};for(var te in W.setOpt({fontfamily:[{name:'songti',val:'\u5B8B\u4F53,SimSun'},{name:'yahei',val:'\u5FAE\u8F6F\u96C5\u9ED1,Microsoft YaHei'},{name:'kaiti',val:'\u6977\u4F53,\u6977\u4F53_GB2312, SimKai'},{name:'heiti',val:'\u9ED1\u4F53, SimHei'},{name:'lishu',val:'\u96B6\u4E66, SimLi'},{name:'andaleMono',val:'andale mono'},{name:'arial',val:'arial, helvetica,sans-serif'},{name:'arialBlack',val:'arial black,avant garde'},{name:'comicSansMs',val:'comic sans ms'},{name:'impact',val:'impact,chicago'},{name:'timesNewRoman',val:'times new roman'}],fontsize:[10,11,12,14,16,18,20,24,36]}),W.addInputRule(function(ne){utils.each(ne.getNodesByTagName('u s del font strike'),function(ae){if('font'==ae.tagName){var oe=[];for(var re in ae.attrs)'size'===re?oe.push('font-size:'+({1:'10',2:'12',3:'16',4:'18',5:'24',6:'32',7:'48'}[ae.attrs[re]]||ae.attrs[re])+'px'):'color'===re?oe.push('color:'+ae.attrs[re]):'face'===re?oe.push('font-family:'+ae.attrs[re]):'style'===re?oe.push(ae.attrs[re]):void 0;ae.attrs={style:oe.join(';')}}else{var le='u'==ae.tagName?'underline':'line-through';ae.attrs={style:(ae.getAttr('style')||'')+'text-decoration:'+le+';'}}ae.tagName='span'})}),Y)(function(ne,ae){UE.commands[ne]={execCommand:function(oe,re){re=re||(this.queryCommandState(oe)?'none':'underline'==oe?'underline':'fontborder'==oe?'1px solid #000':'line-through');var le=this,se=this.selection.getRange(),de;if('default'==re)se.collapsed&&(de=le.document.createTextNode('font'),se.insertNode(de).select()),le.execCommand('removeFormat','span,a',ae),de&&(se.setStartBefore(de).collapse(!0),domUtils.remove(de)),z(se,oe,re),se.select();else if(!se.collapsed)Z[ne]&&le.queryCommandValue(ne)&&le.execCommand('removeFormat','span,a',ae),se=le.selection.getRange(),se.applyInlineStyle('span',{style:ae+':'+re}),z(se,oe,re),se.select();else{var ce=domUtils.findParentByTagName(se.startContainer,'span',!0);if(de=le.document.createTextNode('font'),ce&&!ce.children.length&&!ce[browser.ie?'innerText':'textContent'].replace(fillCharReg,'').length)se.insertNode(de),Z[ne]&&(se.selectNode(de).select(),le.execCommand('removeFormat','span,a',ae,null),ce=domUtils.findParentByTagName(de,'span',!0),se.setStartBefore(de)),ce&&(ce.style.cssText+=';'+ae+':'+re),se.collapse(!0).select();else{if(se.insertNode(de),se.selectNode(de).select(),ce=se.document.createElement('span'),Z[ne]){if(domUtils.findParentByTagName(de,'a',!0))return se.setStartBefore(de).setCursor(),void domUtils.remove(de);le.execCommand('removeFormat','span,a',ae)}if(ce.style.cssText=ae+':'+re,de.parentNode.insertBefore(ce,de),!browser.ie||browser.ie&&9==browser.version)for(var ue=ce.parentNode;!domUtils.isBlockElm(ue);)'SPAN'==ue.tagName&&(ce.style.cssText=ue.style.cssText+';'+ce.style.cssText),ue=ue.parentNode;opera?setTimeout(function(){se.setStart(ce,0).collapse(!0),z(se,oe,re),se.select()}):(se.setStart(ce,0).collapse(!0),z(se,oe,re),se.select())}domUtils.remove(de)}return!0},queryCommandValue:function(oe){var re=this.selection.getStart();if('underline'==oe||'strikethrough'==oe){for(var le=re,se;le&&!domUtils.isBlockElm(le)&&!domUtils.isBody(le);){if(1==le.nodeType&&(se=domUtils.getComputedStyle(le,ae),'none'!=se))return se;le=le.parentNode}return'none'}if('fontborder'==oe){for(var de=re,ce;de&&dtd.$inline[de.tagName];){if((ce=domUtils.getComputedStyle(de,'border'))&&/1px/.test(ce)&&/solid/.test(ce))return ce;de=de.parentNode}return''}if('FontSize'==oe){var ue=domUtils.getComputedStyle(re,ae),de=/^([\d\.]+)(\w+)$/.exec(ue);return de?_Mathfloor(de[1])+de[2]:ue}return domUtils.getComputedStyle(re,ae)},queryCommandState:function(oe){if(!Z[oe])return 0;var re=this.queryCommandValue(oe);return'fontborder'==oe?/1px/.test(re)&&/solid/.test(re):'underline'==oe?/underline/.test(re):/line\-through/.test(re)}}})(te,Y[te])},UE.plugins.link=function(){function o(z){var W=z.startContainer,Y=z.endContainer;(W=domUtils.findParentByTagName(W,'a',!0))&&z.setStartBefore(W),(Y=domUtils.findParentByTagName(Y,'a',!0))&&z.setEndAfter(Y)}function $(z,W,Y){var Z=z.cloneRange(),ee=Y.queryCommandValue('link');o(z=z.adjustmentBoundary());var te=z.startContainer;if(1==te.nodeType&&ee&&(te=te.childNodes[z.startOffset],te&&1==te.nodeType&&'A'==te.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(te[browser.ie?'innerText':'textContent'])&&(te[browser.ie?'innerText':'textContent']=utils.html(W.textValue||W.href))),(!Z.collapsed||ee)&&(z.removeInlineStyle('a'),Z=z.cloneRange()),Z.collapsed){var ne=z.document.createElement('a'),ae='';W.textValue?(ae=utils.html(W.textValue),delete W.textValue):ae=utils.html(W.href),domUtils.setAttributes(ne,W),te=domUtils.findParentByTagName(Z.startContainer,'a',!0),te&&domUtils.isInNodeEndBoundary(Z,te)&&z.setStartAfter(te).collapse(!0),ne[browser.ie?'innerText':'textContent']=ae,z.insertNode(ne).selectNode(ne)}else z.applyInlineStyle('a',W)}UE.commands.unlink={execCommand:function(){var z=this.selection.getRange(),W;z.collapsed&&!domUtils.findParentByTagName(z.startContainer,'a',!0)||(W=z.createBookmark(),o(z),z.removeInlineStyle('a').moveToBookmark(W).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue('link')?0:-1}},UE.commands.link={execCommand:function(z,W){var Y;W._href&&(W._href=utils.unhtml(W._href,/[<">]/g)),W.href&&(W.href=utils.unhtml(W.href,/[<">]/g)),W.textValue&&(W.textValue=utils.unhtml(W.textValue,/[<">]/g)),$(Y=this.selection.getRange(),W,this),Y.collapse().select(!0)},queryCommandValue:function(){var z=this.selection.getRange(),W;if(!z.collapsed){z.shrinkBoundary();var Y=3!=z.startContainer.nodeType&&z.startContainer.childNodes[z.startOffset]?z.startContainer.childNodes[z.startOffset]:z.startContainer,Z=3==z.endContainer.nodeType||0==z.endOffset?z.endContainer:z.endContainer.childNodes[z.endOffset-1],ee=z.getCommonAncestor();if(W=domUtils.findParentByTagName(ee,'a',!0),!W&&1==ee.nodeType)for(var te=ee.getElementsByTagName('a'),oe=0,ne,ae,re;re=te[oe++];)if(ne=domUtils.getPosition(re,Y),ae=domUtils.getPosition(re,Z),(ne&domUtils.POSITION_FOLLOWING||ne&domUtils.POSITION_CONTAINS)&&(ae&domUtils.POSITION_PRECEDING||ae&domUtils.POSITION_CONTAINS)){W=re;break}return W}return(W=z.startContainer,W=1==W.nodeType?W:W.parentNode,W&&(W=domUtils.findParentByTagName(W,'a',!0))&&!domUtils.isInNodeEndBoundary(z,W))?W:void 0},queryCommandState:function(){var z=this.selection.getRange().getClosedNode(),W=z&&('edui-faked-video'==z.className||-1!=z.className.indexOf('edui-upload-video'));return W?-1:0}}},UE.plugins.insertframe=function(){function o(){$._iframe&&delete $._iframe}var $=this;$.addListener('selectionchange',function(){o()})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&8>=browser.version?-1:0}},UE.plugins.removeformat=function(){var o=this;o.setOpt({removeFormatTags:'b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var',removeFormatAttributes:'class,style,lang,width,height,align,hspace,valign'}),o.commands.removeformat={execCommand:function($,z,W,Y,Z){function ee(ce){if(3==ce.nodeType||'span'!=ce.tagName.toLowerCase())return 0;if(browser.ie){var ue=ce.attributes;if(ue.length){for(var ge=0,he=ue.length;ge<he;ge++)if(ue[ge].specified)return 0;return 1}}return!ce.attributes.length}var ne=new RegExp('^(?:'+(z||this.options.removeFormatTags).replace(/,/g,'|')+')$','i'),ae=W?[]:(Y||this.options.removeFormatAttributes).split(','),oe=new dom.Range(this.document),de=function(ce){return 1==ce.nodeType},re,se;oe=this.selection.getRange(),function(ce){var ue=ce.createBookmark();if(ce.collapsed&&ce.enlarge(!0),!Z){var ge=domUtils.findParentByTagName(ce.startContainer,'a',!0);ge&&ce.setStartBefore(ge),ge=domUtils.findParentByTagName(ce.endContainer,'a',!0),ge&&ce.setEndAfter(ge)}for(re=ce.createBookmark(),be=re.start;(se=be.parentNode)&&!domUtils.isBlockElm(se);)domUtils.breakParent(be,se),domUtils.clearEmptySibling(be);if(re.end){for(be=re.end;(se=be.parentNode)&&!domUtils.isBlockElm(se);)domUtils.breakParent(be,se),domUtils.clearEmptySibling(be);for(var he=domUtils.getNextDomNode(re.start,!1,de),fe;he&&he!=re.end;)fe=domUtils.getNextDomNode(he,!0,de),dtd.$empty[he.tagName.toLowerCase()]||domUtils.isBookmarkNode(he)||(ne.test(he.tagName)?W?(domUtils.removeStyle(he,W),ee(he)&&'text-decoration'!=W&&domUtils.remove(he,!0)):domUtils.remove(he,!0):!dtd.$tableContent[he.tagName]&&!dtd.$list[he.tagName]&&(domUtils.removeAttributes(he,ae),ee(he)&&domUtils.remove(he,!0))),he=fe}var ye=re.start.parentNode;!domUtils.isBlockElm(ye)||dtd.$tableContent[ye.tagName]||dtd.$list[ye.tagName]||domUtils.removeAttributes(ye,ae),ye=re.end.parentNode,re.end&&domUtils.isBlockElm(ye)&&!dtd.$tableContent[ye.tagName]&&!dtd.$list[ye.tagName]&&domUtils.removeAttributes(ye,ae),ce.moveToBookmark(re).moveToBookmark(ue);for(var be=ce.startContainer,xe=ce.collapsed,Ce;1==be.nodeType&&domUtils.isEmptyNode(be)&&dtd.$removeEmpty[be.tagName];)Ce=be.parentNode,ce.setStartBefore(be),ce.startContainer===ce.endContainer&&ce.endOffset--,domUtils.remove(be),be=Ce;if(!xe)for(be=ce.endContainer;1==be.nodeType&&domUtils.isEmptyNode(be)&&dtd.$removeEmpty[be.tagName];)Ce=be.parentNode,ce.setEndBefore(be),domUtils.remove(be),be=Ce}(oe),oe.select()}}},UE.plugins.blockquote=function(){function o(z){return domUtils.filterNodeList(z.selection.getStartElementPath(),'blockquote')}var $=this;$.commands.blockquote={execCommand:function(z,W){var Y=this.selection.getRange(),Z=o(this),ee=dtd.blockquote,te=Y.createBookmark();if(Z){var ne=Y.startContainer,ae=domUtils.isBlockElm(ne)?ne:domUtils.findParent(ne,function(be){return domUtils.isBlockElm(be)}),oe=Y.endContainer,re=domUtils.isBlockElm(oe)?oe:domUtils.findParent(oe,function(be){return domUtils.isBlockElm(be)});ae=domUtils.findParentByTagName(ae,'li',!0)||ae,re=domUtils.findParentByTagName(re,'li',!0)||re,'LI'==ae.tagName||'TD'==ae.tagName||ae===Z||domUtils.isBody(ae)?domUtils.remove(Z,!0):domUtils.breakParent(ae,Z),ae!==re&&(Z=domUtils.findParentByTagName(re,'blockquote'),Z&&('LI'==re.tagName||'TD'==re.tagName||domUtils.isBody(re)?Z.parentNode&&domUtils.remove(Z,!0):domUtils.breakParent(re,Z)));for(var le=domUtils.getElementsByTagName(this.document,'blockquote'),se=0,de;de=le[se++];)de.childNodes.length?domUtils.getPosition(de,ae)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(de,re)&domUtils.POSITION_PRECEDING&&domUtils.remove(de,!0):domUtils.remove(de)}else{for(var ce=Y.cloneRange(),ue=1==ce.startContainer.nodeType?ce.startContainer:ce.startContainer.parentNode,ge=ue,he=1;;){if(domUtils.isBody(ue)){ge===ue?ce.setStart(ue,0):Y.collapsed?(ce.selectNode(ge),he=0):ce.setStartBefore(ge);break}if(!ee[ue.tagName]){Y.collapsed?ce.selectNode(ge):ce.setStartBefore(ge);break}ge=ue,ue=ue.parentNode}if(he)for(ge=ue=ue=1==ce.endContainer.nodeType?ce.endContainer:ce.endContainer.parentNode;;){if(domUtils.isBody(ue)){ge===ue?ce.setEnd(ue,ue.childNodes.length):ce.setEndAfter(ge);break}if(!ee[ue.tagName]){ce.setEndAfter(ge);break}ge=ue,ue=ue.parentNode}ue=Y.document.createElement('blockquote'),domUtils.setAttributes(ue,W),ue.appendChild(ce.extractContents()),ce.insertNode(ue);for(var fe=domUtils.getElementsByTagName(ue,'blockquote'),se=0,ye;ye=fe[se++];)ye.parentNode&&domUtils.remove(ye,!0)}Y.moveToBookmark(te).select()},queryCommandState:function(){return o(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(o){var $=this,z=$.selection.getRange();if(z.collapsed)return z;for(var W=z.createBookmark(),Y=W.end,Z=function(te){return!domUtils.isBr(te)&&!domUtils.isWhitespace(te)},ee=domUtils.getNextDomNode(W.start,!1,Z);ee&&domUtils.getPosition(ee,Y)&domUtils.POSITION_PRECEDING&&(3==ee.nodeType&&(ee.nodeValue=ee.nodeValue['touppercase'==o?'toUpperCase':'toLowerCase']()),ee=domUtils.getNextDomNode(ee,!0,Z),ee!==Y););z.moveToBookmark(W).select()}},UE.commands.indent={execCommand:function(){var o=this,$=o.queryCommandState('indent')?'0em':o.options.indentValue||'2em';o.execCommand('Paragraph','p',{style:'text-indent:'+$})},queryCommandState:function(){var o=domUtils.filterNodeList(this.selection.getStartElementPath(),'p h1 h2 h3 h4 h5 h6');return o&&o.style.textIndent&&parseInt(o.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var o=window.open('','_blank',''),$=o.document;$.open(),$.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+'ueditor.parse.js"></script><script>setTimeout(function(){uParse(\'div\',{rootPath: \''+this.options.UEDITOR_HOME_URL+'\'})},300)</script></head><body><div>'+this.getContent(null,null,!0)+'</div></body></html>'),$.close()},notNeedUndo:1},UE.plugins.selectall=function(){var o=this;o.commands.selectall={execCommand:function(){var $=this,z=$.body,W=$.selection.getRange();W.selectNodeContents(z),domUtils.isEmptyBlock(z)&&(browser.opera&&z.firstChild&&1==z.firstChild.nodeType&&W.setStartAtFirst(z.firstChild),W.collapse(!0)),W.select(!0)},notNeedUndo:1},o.addshortcutkey({selectAll:'ctrl+65'})},UE.plugins.paragraph=function(){var o=this,$=domUtils.isBlockElm,z=['TD','LI','PRE'],W=function(Y,Z,ee,te){var ne=Y.createBookmark(),ae=function(ue){return 1==ue.nodeType?'br'!=ue.tagName.toLowerCase()&&!domUtils.isBookmarkNode(ue):!domUtils.isWhitespace(ue)},oe;Y.enlarge(!0);for(var re=Y.createBookmark(),le=domUtils.getNextDomNode(re.start,!1,ae),se=Y.cloneRange(),de;le&&!(domUtils.getPosition(le,re.end)&domUtils.POSITION_FOLLOWING);)if(3==le.nodeType||!$(le)){for(se.setStartBefore(le);le&&le!==re.end&&!$(le);)de=le,le=domUtils.getNextDomNode(le,!1,null,function(ue){return!$(ue)});se.setEndAfter(de),oe=Y.document.createElement(Z),ee&&(domUtils.setAttributes(oe,ee),te&&'customstyle'==te&&ee.style&&(oe.style.cssText=ee.style)),oe.appendChild(se.extractContents()),domUtils.isEmptyNode(oe)&&domUtils.fillChar(Y.document,oe),se.insertNode(oe);var ce=oe.parentNode;$(ce)&&!domUtils.isBody(oe.parentNode)&&-1==utils.indexOf(z,ce.tagName)&&(!(te&&'customstyle'==te)&&(ce.getAttribute('dir')&&oe.setAttribute('dir',ce.getAttribute('dir')),ce.style.cssText&&(oe.style.cssText=ce.style.cssText+';'+oe.style.cssText),ce.style.textAlign&&!oe.style.textAlign&&(oe.style.textAlign=ce.style.textAlign),ce.style.textIndent&&!oe.style.textIndent&&(oe.style.textIndent=ce.style.textIndent),ce.style.padding&&!oe.style.padding&&(oe.style.padding=ce.style.padding)),ee&&/h\d/i.test(ce.tagName)&&!/h\d/i.test(oe.tagName)?(domUtils.setAttributes(ce,ee),te&&'customstyle'==te&&ee.style&&(ce.style.cssText=ee.style),domUtils.remove(oe,!0),oe=ce):domUtils.remove(oe.parentNode,!0)),le=-1==utils.indexOf(z,ce.tagName)?oe:ce,le=domUtils.getNextDomNode(le,!1,ae)}else le=domUtils.getNextDomNode(le,!0,ae);return Y.moveToBookmark(re).moveToBookmark(ne)};o.setOpt('paragraph',{p:'',h1:'',h2:'',h3:'',h4:'',h5:'',h6:''}),o.commands.paragraph={execCommand:function(Y,Z,ee,te){var ne=this.selection.getRange();if(ne.collapsed){var ae=this.document.createTextNode('p');if(ne.insertNode(ae),browser.ie){var oe=ae.previousSibling;oe&&domUtils.isWhitespace(oe)&&domUtils.remove(oe),oe=ae.nextSibling,oe&&domUtils.isWhitespace(oe)&&domUtils.remove(oe)}}if(ne=W(ne,Z,ee,te),ae&&(ne.setStartBefore(ae).collapse(!0),pN=ae.parentNode,domUtils.remove(ae),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN)),browser.gecko&&ne.collapsed&&1==ne.startContainer.nodeType){var re=ne.startContainer.childNodes[ne.startOffset];re&&1==re.nodeType&&re.tagName.toLowerCase()==Z&&ne.setStart(re,0).collapse(!0)}return ne.select(),!0},queryCommandValue:function(){var Y=domUtils.filterNodeList(this.selection.getStartElementPath(),'p h1 h2 h3 h4 h5 h6');return Y?Y.tagName.toLowerCase():''}}},function(){var o=domUtils.isBlockElm,$=function(W){return domUtils.filterNodeList(W.selection.getStartElementPath(),function(Y){return Y&&1==Y.nodeType&&Y.getAttribute('dir')})},z=function(W,Y,Z){var te=function(ue){return 1==ue.nodeType?!domUtils.isBookmarkNode(ue):!domUtils.isWhitespace(ue)},ne=$(Y),ee;if(ne&&W.collapsed)return ne.setAttribute('dir',Z),W;ee=W.createBookmark(),W.enlarge(!0);for(var ae=W.createBookmark(),oe=domUtils.getNextDomNode(ae.start,!1,te),re=W.cloneRange(),le;oe&&!(domUtils.getPosition(oe,ae.end)&domUtils.POSITION_FOLLOWING);)if(3==oe.nodeType||!o(oe)){for(re.setStartBefore(oe);oe&&oe!==ae.end&&!o(oe);)le=oe,oe=domUtils.getNextDomNode(oe,!1,null,function(ue){return!o(ue)});re.setEndAfter(le);var se=re.getCommonAncestor();if(!domUtils.isBody(se)&&o(se))se.setAttribute('dir',Z),oe=se;else{var de=W.document.createElement('p');de.setAttribute('dir',Z);var ce=re.extractContents();de.appendChild(ce),re.insertNode(de),oe=de}oe=domUtils.getNextDomNode(oe,!1,te)}else oe=domUtils.getNextDomNode(oe,!0,te);return W.moveToBookmark(ae).moveToBookmark(ee)};UE.commands.directionality={execCommand:function(W,Y){var Z=this.selection.getRange();if(Z.collapsed){var ee=this.document.createTextNode('d');Z.insertNode(ee)}return z(Z,this,Y),ee&&(Z.setStartBefore(ee).collapse(!0),domUtils.remove(ee)),Z.select(),!0},queryCommandValue:function(){var W=$(this);return W?W.getAttribute('dir'):'ltr'}}}(),UE.plugins.horizontal=function(){var o=this;o.commands.horizontal={execCommand:function($){var z=this;if(-1!==z.queryCommandState($)){z.execCommand('insertHtml','<hr>');var W=z.selection.getRange(),Y=W.startContainer;if(1==Y.nodeType&&!Y.childNodes[W.startOffset]){var Z;(Z=Y.childNodes[W.startOffset-1])&&1==Z.nodeType&&'HR'==Z.tagName&&('p'==z.options.enterTag?(Z=z.document.createElement('p'),W.insertNode(Z),W.setStart(Z,0).setCursor()):(Z=z.document.createElement('br'),W.insertNode(Z),W.setStartBefore(Z).setCursor()))}return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),'table')?-1:0}},o.addListener('delkeydown',function($,z){var W=this.selection.getRange();if(W.txtToElmBoundary(!0),domUtils.isStartInblock(W)){var Y=W.startContainer,Z=Y.previousSibling;if(Z&&domUtils.isTagNode(Z,'hr'))return domUtils.remove(Z),W.select(),domUtils.preventDefault(z),!0}})},UE.commands.time=UE.commands.date={execCommand:function(o,$){var Y=new Date;this.execCommand('insertHtml','time'==o?function(Z,ee){var te=('0'+Z.getHours()).slice(-2),ne=('0'+Z.getMinutes()).slice(-2),ae=('0'+Z.getSeconds()).slice(-2);return ee=ee||'hh:ii:ss',ee.replace(/hh/ig,te).replace(/ii/ig,ne).replace(/ss/ig,ae)}(Y,$):function(Z,ee){var te=('000'+Z.getFullYear()).slice(-4),ne=te.slice(-2),ae=('0'+(Z.getMonth()+1)).slice(-2),oe=('0'+Z.getDate()).slice(-2);return ee=ee||'yyyy-mm-dd',ee.replace(/yyyy/ig,te).replace(/yy/ig,ne).replace(/mm/ig,ae).replace(/dd/ig,oe)}(Y,$))}},UE.plugins.rowspacing=function(){var o=this;o.setOpt({rowspacingtop:['5','10','15','20','25'],rowspacingbottom:['5','10','15','20','25']}),o.commands.rowspacing={execCommand:function($,z,W){return this.execCommand('paragraph','p',{style:'margin-'+W+':'+z+'px'}),!0},queryCommandValue:function($,z){var W=domUtils.filterNodeList(this.selection.getStartElementPath(),function(Z){return domUtils.isBlockElm(Z)}),Y;return W?(Y=domUtils.getComputedStyle(W,'margin-'+z).replace(/[^\d]/g,''),Y?Y:0):0}}},UE.plugins.lineheight=function(){var o=this;o.setOpt({lineheight:['1','1.5','1.75','2','3','4','5']}),o.commands.lineheight={execCommand:function($,z){return this.execCommand('paragraph','p',{style:'line-height:'+('1'==z?'normal':z+'em')}),!0},queryCommandValue:function(){var $=domUtils.filterNodeList(this.selection.getStartElementPath(),function(W){return domUtils.isBlockElm(W)});if($){var z=domUtils.getComputedStyle($,'line-height');return'normal'==z?1:z.replace(/[^\d.]*/ig,'')}}}},UE.plugins.insertcode=function(){var o=this;o.ready(function(){utils.cssRule('pre','pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}',o.document)}),o.setOpt('insertcode',{as3:'ActionScript3',bash:'Bash/Shell',cpp:'C/C++',css:'Css',cf:'CodeFunction',"c#":'C#',delphi:'Delphi',diff:'Diff',erlang:'Erlang',groovy:'Groovy',html:'Html',java:'Java',jfx:'JavaFx',js:'Javascript',pl:'Perl',php:'Php',plain:'Plain Text',ps:'PowerShell',python:'Python',ruby:'Ruby',scala:'Scala',sql:'Sql',vb:'Vb',xml:'Xml'}),o.commands.insertcode={execCommand:function(z,W){var Y=this,Z=Y.selection.getRange(),ee=domUtils.findParentByTagName(Z.startContainer,'pre',!0);if(ee)ee.className='brush:'+W+';toolbar:false;';else{var te='';if(Z.collapsed)te=browser.ie&&browser.ie11below?8>=browser.version?'&nbsp;':'':'<br/>';else{var ne=Z.extractContents(),ae=Y.document.createElement('div');ae.appendChild(ne),utils.each(UE.filterNode(UE.htmlparser(ae.innerHTML.replace(/[\r\t]/g,'')),Y.options.filterTxtRules).children,function(re){if(browser.ie&&browser.ie11below&&8<browser.version)'element'==re.type?'br'==re.tagName?te+='\n':!dtd.$empty[re.tagName]&&(utils.each(re.children,function(le){'element'==le.type?'br'==le.tagName?te+='\n':!dtd.$empty[re.tagName]&&(te+=le.innerText()):te+=le.data}),!/\n$/.test(te)&&(te+='\n')):te+=re.data+'\n',!re.nextSibling()&&/\n$/.test(te)&&(te=te.replace(/\n$/,''));else if(browser.ie&&browser.ie11below)'element'==re.type?'br'==re.tagName?te+='<br>':!dtd.$empty[re.tagName]&&(utils.each(re.children,function(le){'element'==le.type?'br'==le.tagName?te+='<br>':!dtd.$empty[re.tagName]&&(te+=le.innerText()):te+=le.data}),!/br>$/.test(te)&&(te+='<br>')):te+=re.data+'<br>',!re.nextSibling()&&/<br>$/.test(te)&&(te=te.replace(/<br>$/,''));else if(te+='element'==re.type?dtd.$empty[re.tagName]?'':re.innerText():re.data,!/br\/?\s*>$/.test(te)){if(!re.nextSibling())return;te+='<br>'}})}Y.execCommand('inserthtml','<pre id="coder"class="brush:'+W+';toolbar:false">'+te+'</pre>',!0),ee=Y.document.getElementById('coder'),domUtils.removeAttributes(ee,'id');var oe=ee.previousSibling;oe&&(3==oe.nodeType&&1==oe.nodeValue.length&&browser.ie&&6==browser.version||domUtils.isEmptyBlock(oe))&&domUtils.remove(oe);var Z=Y.selection.getRange();domUtils.isEmptyBlock(ee)?Z.setStart(ee,0).setCursor(!1,!0):Z.selectNodeContents(ee).select()}},queryCommandValue:function(){var z=this.selection.getStartElementPath(),W='';return utils.each(z,function(Y){if('PRE'==Y.nodeName){var Z=Y.className.match(/brush:([^;]+)/);return W=Z&&Z[1]?Z[1]:'',!1}}),W}},o.addInputRule(function(z){utils.each(z.getNodesByTagName('pre'),function(W){var Y=W.getNodesByTagName('br');if(Y.length)return void(browser.ie&&browser.ie11below&&8<browser.version&&utils.each(Y,function(ee){var te=UE.uNode.createText('\n');ee.parentNode.insertBefore(te,ee),ee.parentNode.removeChild(ee)}));if(!(browser.ie&&browser.ie11below&&8<browser.version)){var Z=W.innerText().split(/\n/);W.innerHTML(''),utils.each(Z,function(ee){ee.length&&W.appendChild(UE.uNode.createText(ee)),W.appendChild(UE.uNode.createElement('br'))})}})}),o.addOutputRule(function(z){utils.each(z.getNodesByTagName('pre'),function(W){var Y='';utils.each(W.children,function(Z){Y+='text'==Z.type?Z.data.replace(/[ ]/g,'&nbsp;').replace(/\n$/,''):'br'==Z.tagName?'\n':dtd.$empty[Z.tagName]?Z.innerText():''}),W.innerText(Y.replace(/(&nbsp;|\n)+$/,''))})}),o.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};o.queryCommandState;o.queryCommandState=function(z){var W=this;return!W.notNeedCodeQuery[z.toLowerCase()]&&W.selection&&W.queryCommandValue('insertcode')?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},o.addListener('beforeenterkeydown',function(){var z=o.selection.getRange(),W=domUtils.findParentByTagName(z.startContainer,'pre',!0);if(W){if(o.fireEvent('saveScene'),z.collapsed||z.deleteContents(),!browser.ie||browser.ie9above){var Y=o.document.createElement('br'),W;z.insertNode(Y).setStartAfter(Y).collapse(!0);var Z=Y.nextSibling;Z||browser.ie&&!(10<browser.version)?z.setStartAfter(Y):z.insertNode(Y.cloneNode(!1)),W=Y.previousSibling;for(var ee;W;)if(ee=W,W=W.previousSibling,!W||'BR'==W.nodeName){W=ee;break}if(W){for(var te='';W&&'BR'!=W.nodeName&&new RegExp('^[\\s'+domUtils.fillChar+']*$').test(W.nodeValue);)te+=W.nodeValue,W=W.nextSibling;if('BR'!=W.nodeName){var ne=W.nodeValue.match(new RegExp('^([\\s'+domUtils.fillChar+']+)'));ne&&ne[1]&&(te+=ne[1])}te&&(te=o.document.createTextNode(te),z.insertNode(te).setStartAfter(te))}z.collapse(!0).select(!0)}else if(8<browser.version){var ae=o.document.createTextNode('\n'),oe=z.startContainer;if(0==z.startOffset){var re=oe.previousSibling;if(re){z.insertNode(ae);var le=o.document.createTextNode(' ');z.setStartAfter(ae).insertNode(le).setStart(le,0).collapse(!0).select(!0)}}else{z.insertNode(ae).setStartAfter(ae);var le=o.document.createTextNode(' ');oe=z.startContainer.childNodes[z.startOffset],oe&&!/^\n/.test(oe.nodeValue)&&z.setStartBefore(ae),z.insertNode(le).setStart(le,0).collapse(!0).select(!0)}}else{var Y=o.document.createElement('br');z.insertNode(Y),z.insertNode(o.document.createTextNode(domUtils.fillChar)),z.setStartAfter(Y),W=Y.previousSibling;for(var ee;W;)if(ee=W,W=W.previousSibling,!W||'BR'==W.nodeName){W=ee;break}if(W){for(var te='';W&&'BR'!=W.nodeName&&new RegExp('^[ '+domUtils.fillChar+']*$').test(W.nodeValue);)te+=W.nodeValue,W=W.nextSibling;if('BR'!=W.nodeName){var ne=W.nodeValue.match(new RegExp('^([ '+domUtils.fillChar+']+)'));ne&&ne[1]&&(te+=ne[1])}te=o.document.createTextNode(te),z.insertNode(te).setStartAfter(te)}z.collapse(!0).select()}return o.fireEvent('saveScene'),!0}}),o.addListener('tabkeydown',function(z,W){var Y=o.selection.getRange(),Z=domUtils.findParentByTagName(Y.startContainer,'pre',!0);if(Z){if(o.fireEvent('saveScene'),W.shiftKey);else if(!Y.collapsed){for(var ee=Y.createBookmark(),te=ee.start.previousSibling;te;){if(Z.firstChild===te&&!domUtils.isBr(te)){Z.insertBefore(o.document.createTextNode('    '),te);break}if(domUtils.isBr(te)){Z.insertBefore(o.document.createTextNode('    '),te.nextSibling);break}te=te.previousSibling}var ne=ee.end;for(te=ee.start.nextSibling,Z.firstChild===ee.start&&Z.insertBefore(o.document.createTextNode('    '),te.nextSibling);te&&te!==ne;){if(domUtils.isBr(te)&&te.nextSibling){if(te.nextSibling===ne)break;Z.insertBefore(o.document.createTextNode('    '),te.nextSibling)}te=te.nextSibling}Y.moveToBookmark(ee).select()}else{var ae=o.document.createTextNode('    ');Y.insertNode(ae).setStartAfter(ae).collapse(!0).select(!0)}return o.fireEvent('saveScene'),!0}}),o.addListener('beforeinserthtml',function(z,W){var Y=this,Z=Y.selection.getRange(),ee=domUtils.findParentByTagName(Z.startContainer,'pre',!0);if(ee){Z.collapsed||Z.deleteContents();var te='';if(browser.ie&&8<browser.version){utils.each(UE.filterNode(UE.htmlparser(W),Y.options.filterTxtRules).children,function(oe){'element'==oe.type?'br'==oe.tagName?te+='\n':!dtd.$empty[oe.tagName]&&(utils.each(oe.children,function(re){'element'==re.type?'br'==re.tagName?te+='\n':!dtd.$empty[oe.tagName]&&(te+=re.innerText()):te+=re.data}),!/\n$/.test(te)&&(te+='\n')):te+=oe.data+'\n',!oe.nextSibling()&&/\n$/.test(te)&&(te=te.replace(/\n$/,''))});var ne=Y.document.createTextNode(utils.html(te.replace(/&nbsp;/g,' ')));Z.insertNode(ne).selectNode(ne).select()}else{var ae=Y.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(W),Y.options.filterTxtRules).children,function(oe){'element'==oe.type?'br'==oe.tagName?ae.appendChild(Y.document.createElement('br')):!dtd.$empty[oe.tagName]&&(utils.each(oe.children,function(re){'element'==re.type?'br'==re.tagName?ae.appendChild(Y.document.createElement('br')):!dtd.$empty[oe.tagName]&&ae.appendChild(Y.document.createTextNode(utils.html(re.innerText().replace(/&nbsp;/g,' ')))):ae.appendChild(Y.document.createTextNode(utils.html(re.data.replace(/&nbsp;/g,' '))))}),'BR'!=ae.lastChild.nodeName&&ae.appendChild(Y.document.createElement('br'))):ae.appendChild(Y.document.createTextNode(utils.html(oe.data.replace(/&nbsp;/g,' ')))),oe.nextSibling()||'BR'!=ae.lastChild.nodeName||ae.removeChild(ae.lastChild)}),Z.insertNode(ae).select()}return!0}}),o.addListener('keydown',function(z,W){var Y=this,Z=W.keyCode||W.which;if(40==Z){var ee=Y.selection.getRange(),ne=ee.startContainer,te;if(ee.collapsed&&(te=domUtils.findParentByTagName(ee.startContainer,'pre',!0))&&!te.nextSibling){for(var ae=te.lastChild;ae&&'BR'==ae.nodeName;)ae=ae.previousSibling;(ae===ne||ee.startContainer===te&&ee.startOffset==te.childNodes.length)&&(Y.execCommand('insertparagraph'),domUtils.preventDefault(W))}}}),o.addListener('delkeydown',function(z,W){var Y=this.selection.getRange();Y.txtToElmBoundary(!0);var Z=Y.startContainer;if(domUtils.isTagNode(Z,'pre')&&Y.collapsed&&domUtils.isStartInblock(Y)){var ee=o.document.createElement('p');return domUtils.fillNode(o.document,ee),Z.parentNode.insertBefore(ee,Z),domUtils.remove(Z),Y.setStart(ee,0).setCursor(!1,!0),domUtils.preventDefault(W),!0}})},UE.commands.cleardoc={execCommand:function(){var $=this,z=$.options.enterTag,W=$.selection.getRange();'br'==z?($.body.innerHTML='<br/>',W.setStart($.body,0).setCursor()):($.body.innerHTML='<p>'+(ie?'':'<br/>')+'</p>',W.setStart($.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){$.fireEvent('clearDoc')},0)}},UE.plugin.register('anchor',function(){return{bindEvents:{ready:function(){utils.cssRule('anchor','.anchorclass{background: url(\''+this.options.themePath+this.options.theme+'/images/anchor.gif\') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}',this.document)}},outputRule:function(o){utils.each(o.getNodesByTagName('img'),function($){var z;(z=$.getAttr('anchorname'))&&($.tagName='a',$.setAttr({anchorname:'',name:z,class:''}))})},inputRule:function(o){utils.each(o.getNodesByTagName('a'),function($){var z;(z=$.getAttr('name'))&&!$.getAttr('href')&&($.tagName='img',$.setAttr({anchorname:$.getAttr('name'),class:'anchorclass'}),$.setAttr('name'))})},commands:{anchor:{execCommand:function(o,$){var z=this.selection.getRange(),W=z.getClosedNode();if(W&&W.getAttribute('anchorname'))$?W.setAttribute('anchorname',$):(z.setStartBefore(W).setCursor(),domUtils.remove(W));else if($){var Y=this.document.createElement('img');z.collapse(!0),domUtils.setAttributes(Y,{anchorname:$,class:'anchorclass'}),z.insertNode(Y).setStartAfter(Y).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var o=this;o.setOpt('wordCount',!0),o.addListener('contentchange',function(){o.fireEvent('wordcount')});var $;o.addListener('ready',function(){var z=this;domUtils.on(z.body,'keyup',function(W){var Y=W.keyCode||W.which;Y in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout($),$=setTimeout(function(){z.fireEvent('wordcount')},200))})})},UE.plugins.pagebreak=function(){function o(Y){if(domUtils.isEmptyBlock(Y)){for(var Z=Y.firstChild,ee;Z&&1==Z.nodeType&&domUtils.isEmptyBlock(Z);)ee=Z,Z=Z.firstChild;ee||(ee=Y),domUtils.fillNode(z.document,ee)}}function $(Y){return Y&&1==Y.nodeType&&'HR'==Y.tagName&&'pagebreak'==Y.className}var z=this,W=['td'];z.setOpt('pageBreakTag','_ueditor_page_break_tag_'),z.ready(function(){utils.cssRule('pagebreak','.pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}',z.document)}),z.addInputRule(function(Y){Y.traversal(function(Z){if('text'==Z.type&&Z.data==z.options.pageBreakTag){var ee=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');Z.parentNode.insertBefore(ee,Z),Z.parentNode.removeChild(Z)}})}),z.addOutputRule(function(Y){utils.each(Y.getNodesByTagName('hr'),function(Z){if('pagebreak'==Z.getAttr('class')){var ee=UE.uNode.createText(z.options.pageBreakTag);Z.parentNode.insertBefore(ee,Z),Z.parentNode.removeChild(Z)}})}),z.commands.pagebreak={execCommand:function(){var Y=z.selection.getRange(),Z=z.document.createElement('hr');domUtils.setAttributes(Z,{class:'pagebreak',noshade:'noshade',size:'5'}),domUtils.unSelectable(Z);var ee=domUtils.findParentByTagName(Y.startContainer,W,!0),te=[],ne;if(ee)switch(ee.tagName){case'TD':if(ne=ee.parentNode,!ne.previousSibling){var ae=domUtils.findParentByTagName(ne,'table');ae.parentNode.insertBefore(Z,ae),te=domUtils.findParents(Z,!0)}else ne.parentNode.insertBefore(Z,ne),te=domUtils.findParents(Z);ne=te[1],Z!==ne&&domUtils.breakParent(Z,ne),z.fireEvent('afteradjusttable',z.document);}else{if(!Y.collapsed){Y.deleteContents();for(var oe=Y.startContainer;!domUtils.isBody(oe)&&domUtils.isBlockElm(oe)&&domUtils.isEmptyNode(oe);)Y.setStartBefore(oe).collapse(!0),domUtils.remove(oe),oe=Y.startContainer}Y.insertNode(Z);for(var ne=Z.parentNode,re;!domUtils.isBody(ne);)domUtils.breakParent(Z,ne),re=Z.nextSibling,re&&domUtils.isEmptyBlock(re)&&domUtils.remove(re),ne=Z.parentNode;re=Z.nextSibling;var le=Z.previousSibling;if($(le)?domUtils.remove(le):le&&o(le),!re){var se=z.document.createElement('p');Z.parentNode.appendChild(se),domUtils.fillNode(z.document,se),Y.setStart(se,0).collapse(!0)}else $(re)?domUtils.remove(re):o(re),Y.setEndAfter(Z).collapse(!1);Y.select(!0)}}}},UE.plugin.register('wordimage',function(){var o=this,$=[];return{commands:{wordimage:{execCommand:function(){for(var z=domUtils.getElementsByTagName(o.body,'img'),W=[],Y=0,Z,ee;Z=z[Y++];)ee=Z.getAttribute('word_img'),ee&&W.push(ee);return W},queryCommandState:function(){$=domUtils.getElementsByTagName(o.body,'img');for(var z=0,W;W=$[z++];)if(W.getAttribute('word_img'))return 1;return-1},notNeedUndo:!0}},inputRule:function(z){utils.each(z.getNodesByTagName('img'),function(W){var Y=W.attrs,Z=128>parseInt(Y.width)||43>parseInt(Y.height),ee=o.options,te=ee.UEDITOR_HOME_URL+'themes/default/images/spacer.gif';Y.src&&/^(?:(file:\/+))/.test(Y.src)&&W.setAttr({width:Y.width,height:Y.height,alt:Y.alt,word_img:Y.src,src:te,style:'background:url('+(Z?ee.themePath+ee.theme+'/images/word.gif':ee.langPath+ee.lang+'/images/localimage.png')+') no-repeat center center;border:1px solid #ddd'})})}}}),UE.plugins.dragdrop=function(){var o=this;o.ready(function(){domUtils.on(this.body,'dragend',function(){var $=o.selection.getRange(),z=$.getClosedNode()||o.selection.getStart();if(z&&'IMG'==z.tagName){for(var W=z.previousSibling,Y;(Y=z.nextSibling)&&1==Y.nodeType&&'SPAN'==Y.tagName&&!Y.firstChild;)domUtils.remove(Y);(!W||1!=W.nodeType||domUtils.isEmptyBlock(W))&&W||Y&&(!Y||domUtils.isEmptyBlock(Y))||(W&&'P'==W.tagName&&!domUtils.isEmptyBlock(W)?(W.appendChild(z),domUtils.moveChild(Y,W),domUtils.remove(Y)):Y&&'P'==Y.tagName&&!domUtils.isEmptyBlock(Y)&&Y.insertBefore(z,Y.firstChild),W&&'P'==W.tagName&&domUtils.isEmptyBlock(W)&&domUtils.remove(W),Y&&'P'==Y.tagName&&domUtils.isEmptyBlock(Y)&&domUtils.remove(Y),$.selectNode(z).select(),o.fireEvent('saveScene'))}})}),o.addListener('keyup',function($,z){var W=z.keyCode||z.which;if(13==W){var Y=o.selection.getRange(),Z;(Z=domUtils.findParentByTagName(Y.startContainer,'p',!0))&&'center'==domUtils.getComputedStyle(Z,'text-align')&&domUtils.removeStyle(Z,'text-align')}})},UE.plugins.undo=function(){function o(ue,ge){if(ue.length!=ge.length)return 0;for(var he=0,fe=ue.length;he<fe;he++)if(ue[he]!=ge[he])return 0;return 1}function $(ue,ge){return ue.collapsed==ge.collapsed?o(ue.startAddress,ge.startAddress)&&o(ue.endAddress,ge.endAddress)?1:0:0}var Z=this,ee=Z.options.maxUndoCount||20,te=Z.options.maxInputCount||20,ne=new RegExp(domUtils.fillChar+'|</hr>','gi'),ae={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},oe=Z.options.autoClearEmptyNode,Y;Z.undoManger=new function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return void this.reset();for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var ue=this.editor,ge=this.list[this.index],he=UE.htmlparser(ge.content.replace(ne,''));ue.options.autoClearEmptyNode=!1,ue.filterInputRule(he),ue.options.autoClearEmptyNode=oe,ue.document.body.innerHTML=he.toHtml(),ue.fireEvent('afterscencerestore'),browser.ie&&utils.each(domUtils.getElementsByTagName(ue.document,'td th caption p'),function(ye){domUtils.isEmptyNode(ye)&&domUtils.fillNode(ue.document,ye)});try{var fe=new dom.Range(ue.document).moveToAddress(ge.address);fe.select(ae[fe.startContainer.nodeName.toLowerCase()])}catch(ye){}this.update(),this.clearKey(),ue.fireEvent('reset',!0)},this.getScene=function(){var ue=this.editor,ge=ue.selection.getRange(),he=ge.createAddress(!1,!0);ue.fireEvent('beforegetscene');var fe=UE.htmlparser(ue.body.innerHTML);ue.options.autoClearEmptyNode=!1,ue.filterOutputRule(fe),ue.options.autoClearEmptyNode=oe;var ye=fe.toHtml();return ue.fireEvent('aftergetscene'),{address:he,content:ye}},this.save=function(ue,ge){clearTimeout(Y);var he=this.getScene(ge),fe=this.list[this.index];fe&&fe.content!=he.content&&Z.trigger('contentchange');fe&&fe.content==he.content&&(ue?1:$(fe.address,he.address))||(this.list=this.list.slice(0,this.index+1),this.list.push(he),this.list.length>ee&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){le=0,se=null}},Z.undoManger.editor=Z,Z.addListener('saveScene',function(){var ue=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,ue)}),Z.addListener('reset',function(ue,ge){ge||this.undoManger.reset()}),Z.commands.redo=Z.commands.undo={execCommand:function(ue){this.undoManger[ue]()},queryCommandState:function(ue){return this.undoManger['has'+('undo'==ue.toLowerCase()?'Undo':'Redo')]?0:-1},notNeedUndo:1};var re={16:1,17:1,18:1,37:1,38:1,39:1,40:1},le=0,de=!1,se;Z.addListener('ready',function(){domUtils.on(this.body,'compositionstart',function(){de=!0}),domUtils.on(this.body,'compositionend',function(){de=!1})}),Z.addshortcutkey({Undo:'ctrl+90',Redo:'ctrl+89'});var ce=!0;Z.addListener('keydown',function(ue,ge){var he=this,fe=ge.keyCode||ge.which;if(!re[fe]&&!ge.ctrlKey&&!ge.metaKey&&!ge.shiftKey&&!ge.altKey){function ye(be){be.undoManger.save(!1,!0),be.fireEvent('selectionchange')}if(de)return;if(!he.selection.getRange().collapsed)return he.undoManger.save(!1,!0),void(ce=!1);0==he.undoManger.list.length&&he.undoManger.save(!0),clearTimeout(Y),Y=setTimeout(function(){if(de){var be=setInterval(function(){de||(ye(he),clearInterval(be))},300);return}ye(he)},200),se=fe,le++,le>=te&&ye(he)}}),Z.addListener('keyup',function(ue,ge){var he=ge.keyCode||ge.which;if(!re[he]&&!ge.ctrlKey&&!ge.metaKey&&!ge.shiftKey&&!ge.altKey){if(de)return;ce||(this.undoManger.save(!1,!0),ce=!0)}}),Z.stopCmdUndo=function(){Z.__hasEnterExecCommand=!0},Z.startCmdUndo=function(){Z.__hasEnterExecCommand=!1}},UE.plugin.register('copy',function(){function o(){ZeroClipboard.config({debug:!1,swfPath:$.options.UEDITOR_HOME_URL+'third-party/zeroclipboard/ZeroClipboard.swf'});var z=$.zeroclipboard=new ZeroClipboard;z.on('copy',function(W){var Y=W.client,Z=$.selection.getRange(),ee=document.createElement('div');ee.appendChild(Z.cloneContents()),Y.setText(ee.innerText||ee.textContent),Y.setHtml(ee.innerHTML),Z.select()}),z.on('mouseover mouseout',function(W){var Y=W.target;'mouseover'==W.type?domUtils.addClass(Y,'edui-state-hover'):'mouseout'==W.type&&domUtils.removeClasses(Y,'edui-state-hover')}),z.on('wrongflash noflash',function(){ZeroClipboard.destroy()})}var $=this;return{bindEvents:{ready:function(){browser.ie||(window.ZeroClipboard?o():utils.loadFile(document,{src:$.options.UEDITOR_HOME_URL+'third-party/zeroclipboard/ZeroClipboard.min.js',tag:'script',type:'text/javascript',defer:'defer'},function(){o()}))}},commands:{copy:{execCommand:function(){$.document.execCommand('copy')||alert($.getLang('copymsg'))}}}}}),UE.plugins.paste=function(){function o(te){var ne=this.document;if(!ne.getElementById('baidu_pastebin')){var ae=this.selection.getRange(),oe=ae.createBookmark(),re=ne.createElement('div');re.id='baidu_pastebin',browser.webkit&&re.appendChild(ne.createTextNode(domUtils.fillChar+domUtils.fillChar)),ne.body.appendChild(re),oe.start.style.display='',re.style.cssText='position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:'+domUtils.getXY(oe.start).y+'px',ae.selectNodeContents(re).select(!0),setTimeout(function(){if(browser.webkit)for(var le=0,se=ne.querySelectorAll('#baidu_pastebin'),de;de=se[le++];)if(domUtils.isEmptyNode(de))domUtils.remove(de);else{re=de;break}try{re.parentNode.removeChild(re)}catch(ce){}ae.moveToBookmark(oe).select(!0),te(re)},0)}}function $(te){return te.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(ne,ae,oe,re){return(oe=oe.toLowerCase(),{img:1}[oe])?ne:(re=re.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(le,se,de){return{src:1,href:1,name:1}[se.toLowerCase()]?se+'='+de+' ':''}),{span:1,div:1}[oe]?'':'<'+ae+oe+' '+utils.trim(re)+'>')})}function z(te){var ne;if(te.firstChild){for(var ae=domUtils.getElementsByTagName(te,'span'),oe=0,re;re=ae[oe++];)('_baidu_cut_start'==re.id||'_baidu_cut_end'==re.id)&&domUtils.remove(re);if(browser.webkit){for(var le=te.querySelectorAll('div br'),oe=0,se,de;se=le[oe++];)de=se.parentNode,'DIV'==de.tagName&&1==de.childNodes.length&&(de.innerHTML='<p><br/></p>',domUtils.remove(de));for(var ce=te.querySelectorAll('#baidu_pastebin'),oe=0,ue,ge;ue=ce[oe++];){for(ge=W.document.createElement('p'),ue.parentNode.insertBefore(ge,ue);ue.firstChild;)ge.appendChild(ue.firstChild);domUtils.remove(ue)}for(var he=te.querySelectorAll('meta'),oe=0,fe;fe=he[oe++];)domUtils.remove(fe);var le=te.querySelectorAll('br');for(oe=0;fe=le[oe++];)/^apple-/i.test(fe.className)&&domUtils.remove(fe)}if(browser.gecko){var ye=te.querySelectorAll('[_moz_dirty]');for(oe=0;fe=ye[oe++];)fe.removeAttribute('_moz_dirty')}if(!browser.ie)for(var be=te.querySelectorAll('span.Apple-style-span'),oe=0,fe;fe=be[oe++];)domUtils.remove(fe,!0);ne=te.innerHTML,ne=UE.filterWord(ne);var Ce=UE.htmlparser(ne);if(W.options.filterRules&&UE.filterNode(Ce,W.options.filterRules),W.filterInputRule(Ce),browser.webkit){var xe=Ce.lastChild();xe&&'element'==xe.type&&'br'==xe.tagName&&Ce.removeChild(xe),utils.each(W.body.querySelectorAll('div'),function(ve){domUtils.isEmptyBlock(ve)&&domUtils.remove(ve,!0)})}if(ne={html:Ce.toHtml()},W.fireEvent('beforepaste',ne,Ce),!ne.html)return;Ce=UE.htmlparser(ne.html,!0),1===W.queryCommandState('pasteplain')?W.execCommand('insertHtml',UE.filterNode(Ce,W.options.filterTxtRules).toHtml(),!0):(UE.filterNode(Ce,W.options.filterTxtRules),Y=Ce.toHtml(),Z=ne.html,ee=W.selection.getRange().createAddress(!0),W.execCommand('insertHtml',!0===W.getOpt('retainOnlyLabelPasted')?$(Z):Z,!0)),W.fireEvent('afterpaste',ne)}}var W=this;W.setOpt({retainOnlyLabelPasted:!1});var Y,Z,ee;W.addListener('pasteTransfer',function(te,ne){if(ee&&Y&&Z&&Y!=Z){var ae=W.selection.getRange();if(ae.moveToAddress(ee,!0),!ae.collapsed){for(;!domUtils.isBody(ae.startContainer);){var oe=ae.startContainer;if(1==oe.nodeType){if(oe=oe.childNodes[ae.startOffset],!oe){ae.setStartBefore(ae.startContainer);continue}var re=oe.previousSibling;re&&3==re.nodeType&&new RegExp('^[\n\r\t '+domUtils.fillChar+']*$').test(re.nodeValue)&&ae.setStartBefore(re)}if(0==ae.startOffset)ae.setStartBefore(ae.startContainer);else break}for(;!domUtils.isBody(ae.endContainer);){var le=ae.endContainer;if(1==le.nodeType){if(le=le.childNodes[ae.endOffset],!le){ae.setEndAfter(ae.endContainer);continue}var se=le.nextSibling;se&&3==se.nodeType&&new RegExp('^[\n\r\t'+domUtils.fillChar+']*$').test(se.nodeValue)&&ae.setEndAfter(se)}if(ae.endOffset==ae.endContainer[3==ae.endContainer.nodeType?'nodeValue':'childNodes'].length)ae.setEndAfter(ae.endContainer);else break}}ae.deleteContents(),ae.select(!0),W.__hasEnterExecCommand=!0;var de=Z;2===ne?de=$(de):ne&&(de=Y),W.execCommand('inserthtml',de,!0),W.__hasEnterExecCommand=!1;for(var ce=W.selection.getRange();!domUtils.isBody(ce.startContainer)&&!ce.startOffset&&ce.startContainer[3==ce.startContainer.nodeType?'nodeValue':'childNodes'].length;)ce.setStartBefore(ce.startContainer);var ue=ce.createAddress(!0);ee.endAddress=ue.startAddress}}),W.addListener('ready',function(){domUtils.on(W.body,'cut',function(){var te=W.selection.getRange();!te.collapsed&&W.undoManger&&W.undoManger.save()}),domUtils.on(W.body,browser.ie||browser.opera?'keydown':'paste',function(te){(browser.ie||browser.opera)&&(!te.ctrlKey&&!te.metaKey||'86'!=te.keyCode)||o.call(W,function(ne){z(ne)})})}),W.commands.paste={execCommand:function(){browser.ie?(o.call(W,function(ne){z(ne)}),W.document.execCommand('paste')):alert(W.getLang('pastemsg'))}}},UE.plugins.pasteplain=function(){var o=this;o.setOpt({pasteplain:!1,filterTxtRules:function(){function z(Y){Y.tagName='p',Y.setStyle()}function W(Y){Y.parentNode.removeChild(Y,!0)}return{"-":'script style object iframe embed input select',p:{$:{}},br:{$:{}},div:function(Y){for(var ee=UE.uNode.createElement('p'),Z;Z=Y.firstChild();)'text'!=Z.type&&UE.dom.dtd.$block[Z.tagName]?ee.firstChild()?(Y.parentNode.insertBefore(ee,Y),ee=UE.uNode.createElement('p')):Y.parentNode.insertBefore(Z,Y):ee.appendChild(Z);ee.firstChild()&&Y.parentNode.insertBefore(ee,Y),Y.parentNode.removeChild(Y)},ol:W,ul:W,dl:W,dt:W,dd:W,li:W,caption:z,th:z,tr:z,h1:z,h2:z,h3:z,h4:z,h5:z,h6:z,td:function(Y){var Z=!!Y.innerText();Z&&Y.parentNode.insertAfter(UE.uNode.createText(' &nbsp; &nbsp;'),Y),Y.parentNode.removeChild(Y,Y.innerText())}}}()});var $=o.options.pasteplain;o.commands.pasteplain={queryCommandState:function(){return $?1:0},execCommand:function(){$=0|!$},notNeedUndo:1}},UE.plugins.list=function(){function o(se){var de=[];for(var ce in se)de.push(ce);return de}function $(se){var de=se.className;return domUtils.hasClass(se,/custom_/)?de.match(/custom_(\w+)/)[1]:domUtils.getStyle(se,'list-style-type')}function z(se,de){utils.each(domUtils.getElementsByTagName(se,'ol ul'),function(ce){if(domUtils.inDoc(ce,se)){var ue=ce.parentNode;if(ue.tagName==ce.tagName){var ge=$(ce)||('OL'==ce.tagName?'decimal':'disc'),he=$(ue)||('OL'==ue.tagName?'decimal':'disc');if(ge==he){var fe=utils.indexOf(oe[ce.tagName],ge);fe=fe+1==oe[ce.tagName].length?0:fe+1,Y(ce,oe[ce.tagName][fe])}}var ye=0,be=2;domUtils.hasClass(ce,/custom_/)?!(/[ou]l/i.test(ue.tagName)&&domUtils.hasClass(ue,/custom_/))&&(be=1):/[ou]l/i.test(ue.tagName)&&domUtils.hasClass(ue,/custom_/)&&(be=3);var Ce=domUtils.getStyle(ce,'list-style-type');Ce&&(ce.style.cssText='list-style-type:'+Ce),ce.className=utils.trim(ce.className.replace(/list-paddingleft-\w+/,''))+' list-paddingleft-'+be,utils.each(domUtils.getElementsByTagName(ce,'li'),function(xe){if(xe.style.cssText&&(xe.style.cssText=''),!xe.firstChild)return void domUtils.remove(xe);if(xe.parentNode===ce){if(ye++,domUtils.hasClass(ce,/custom_/)){var ve=1,Ne=$(ce);'OL'==ce.tagName?(Ne&&('cn'===Ne||'cn1'===Ne||'cn2'===Ne?10<ye&&(0==ye%10||10<ye&&20>ye)?ve=2:20<ye&&(ve=3):'num2'===Ne?9<ye&&(ve=2):void 0),xe.className='list-'+ae[Ne]+ye+' list-'+Ne+'-paddingleft-'+ve):xe.className='list-'+ae[Ne]+' list-'+Ne+'-paddingleft'}else xe.className=xe.className.replace(/list-[\w\-]+/gi,'');var we=xe.getAttribute('class');null===we||we.replace(/\s/g,'')||domUtils.removeAttributes(xe,'class')}}),de||W(ce,ce.tagName.toLowerCase(),$(ce)||domUtils.getStyle(ce,'list-style-type'),!0)}})}function W(se,de,ce,ue){var ge=se.nextSibling;ge&&1==ge.nodeType&&ge.tagName.toLowerCase()==de&&($(ge)||domUtils.getStyle(ge,'list-style-type')||('ol'==de?'decimal':'disc'))==ce&&(domUtils.moveChild(ge,se),0==ge.childNodes.length&&domUtils.remove(ge)),ge&&domUtils.isFillChar(ge)&&domUtils.remove(ge);var he=se.previousSibling;he&&1==he.nodeType&&he.tagName.toLowerCase()==de&&($(he)||domUtils.getStyle(he,'list-style-type')||('ol'==de?'decimal':'disc'))==ce&&domUtils.moveChild(se,he),he&&domUtils.isFillChar(he)&&domUtils.remove(he),!ue&&domUtils.isEmptyBlock(se)&&domUtils.remove(se),$(se)&&z(se.ownerDocument,!0)}function Y(se,de){ae[de]&&(se.className='custom_'+de);try{domUtils.setStyle(se,'list-style-type',de)}catch(ce){}}function Z(se){var de=se.previousSibling;de&&domUtils.isEmptyBlock(de)&&domUtils.remove(de),de=se.nextSibling,de&&domUtils.isEmptyBlock(de)&&domUtils.remove(de)}function ee(se){for(;se&&!domUtils.isBody(se);){if('TABLE'==se.nodeName)return null;if('LI'==se.nodeName)return se;se=se.parentNode}}var te=this,ne={TD:1,PRE:1,BLOCKQUOTE:1},ae={cn:'cn-1-',cn1:'cn-2-',cn2:'cn-3-',num:'num-1-',num1:'num-2-',num2:'num-3-',dash:'dash',dot:'dot'};te.setOpt({autoTransWordToList:!1,insertorderedlist:{num:'',num1:'',num2:'',cn:'',cn1:'',cn2:'',decimal:'',"lower-alpha":'',"lower-roman":'',"upper-alpha":'',"upper-roman":''},insertunorderedlist:{circle:'',disc:'',square:'',dash:'',dot:''},listDefaultPaddingLeft:'30',listiconpath:'http://bs.baidu.com/listicon/',maxListLevel:-1,disablePInList:!1});var oe={OL:o(te.options.insertorderedlist),UL:o(te.options.insertunorderedlist)},re=te.options.listiconpath;for(var le in ae)te.options.insertorderedlist.hasOwnProperty(le)||te.options.insertunorderedlist.hasOwnProperty(le)||delete ae[le];te.ready(function(){var se=[];for(var de in ae){if('dash'==de||'dot'==de)se.push('li.list-'+ae[de]+'{background-image:url('+re+ae[de]+'.gif)}'),se.push('ul.custom_'+de+'{list-style:none;}ul.custom_'+de+' li{background-position:0 3px;background-repeat:no-repeat}');else{for(var ce=0;99>ce;ce++)se.push('li.list-'+ae[de]+ce+'{background-image:url('+re+'list-'+ae[de]+ce+'.gif)}');se.push('ol.custom_'+de+'{list-style:none;}ol.custom_'+de+' li{background-position:0 3px;background-repeat:no-repeat}')}'cn'==de?(se.push('li.list-'+de+'-paddingleft-1{padding-left:25px}'),se.push('li.list-'+de+'-paddingleft-2{padding-left:40px}'),se.push('li.list-'+de+'-paddingleft-3{padding-left:55px}')):'cn1'==de?(se.push('li.list-'+de+'-paddingleft-1{padding-left:30px}'),se.push('li.list-'+de+'-paddingleft-2{padding-left:40px}'),se.push('li.list-'+de+'-paddingleft-3{padding-left:55px}')):'cn2'==de?(se.push('li.list-'+de+'-paddingleft-1{padding-left:40px}'),se.push('li.list-'+de+'-paddingleft-2{padding-left:55px}'),se.push('li.list-'+de+'-paddingleft-3{padding-left:68px}')):'num'==de||'num1'==de?se.push('li.list-'+de+'-paddingleft-1{padding-left:25px}'):'num2'==de?(se.push('li.list-'+de+'-paddingleft-1{padding-left:35px}'),se.push('li.list-'+de+'-paddingleft-2{padding-left:40px}')):'dash'==de?se.push('li.list-'+de+'-paddingleft{padding-left:35px}'):'dot'==de?se.push('li.list-'+de+'-paddingleft{padding-left:20px}'):void 0}se.push('.list-paddingleft-1{padding-left:0}'),se.push('.list-paddingleft-2{padding-left:'+te.options.listDefaultPaddingLeft+'px}'),se.push('.list-paddingleft-3{padding-left:'+2*te.options.listDefaultPaddingLeft+'px}'),utils.cssRule('list','ol,ul{margin:0;pading:0;'+(browser.ie?'':'width:95%')+'}li{clear:both;}'+se.join('\n'),te.document)}),te.ready(function(){domUtils.on(te.body,'cut',function(){setTimeout(function(){var se=te.selection.getRange(),de;if(!se.collapsed&&(de=domUtils.findParentByTagName(se.startContainer,'li',!0))&&!de.nextSibling&&domUtils.isEmptyBlock(de)){var ce=de.parentNode,ue;if(ue=ce.previousSibling)domUtils.remove(ce),se.setStartAtLast(ue).collapse(!0),se.select(!0);else if(ue=ce.nextSibling)domUtils.remove(ce),se.setStartAtFirst(ue).collapse(!0),se.select(!0);else{var ge=te.document.createElement('p');domUtils.fillNode(te.document,ge),ce.parentNode.insertBefore(ge,ce),domUtils.remove(ce),se.setStart(ge,0).collapse(!0),se.select(!0)}}})})}),te.addListener('beforepaste',function(se,de){var ce=this,ue=ce.selection.getRange(),he=UE.htmlparser(de.html,!0),ge;if(ge=domUtils.findParentByTagName(ue.startContainer,'li',!0)){var fe=ge.parentNode,ye='OL'==fe.tagName?'ul':'ol';utils.each(he.getNodesByTagName(ye),function(be){if(be.tagName=fe.tagName,be.setAttr(),be.parentNode===he)se=$(fe)||('OL'==fe.tagName?'decimal':'disc');else{var Ce=be.parentNode.getAttr('class');se=Ce&&/custom_/.test(Ce)?Ce.match(/custom_(\w+)/)[1]:be.parentNode.getStyle('list-style-type'),se||(se='OL'==fe.tagName?'decimal':'disc')}var xe=utils.indexOf(oe[fe.tagName],se);be.parentNode!==he&&(xe=xe+1==oe[fe.tagName].length?0:xe+1);var ve=oe[fe.tagName][xe];ae[ve]?be.setAttr('class','custom_'+ve):be.setStyle('list-style-type',ve)})}de.html=he.toHtml()}),!0===te.getOpt('disablePInList')&&te.addOutputRule(function(se){utils.each(se.getNodesByTagName('li'),function(de){var ce=[],ue=0;utils.each(de.children,function(ge){if('p'==ge.tagName){for(var he;he=ge.children.pop();)ce.splice(ue,0,he),he.parentNode=de,lastNode=he;if(he=ce[ce.length-1],!he||'element'!=he.type||'br'!=he.tagName){var fe=UE.uNode.createElement('br');fe.parentNode=de,ce.push(fe)}ue=ce.length}}),ce.length&&(de.children=ce)})}),te.addInputRule(function(se){if(utils.each(se.getNodesByTagName('li'),function(ue){for(var ge=UE.uNode.createElement('p'),he=0,fe;fe=ue.children[he];)'text'==fe.type||dtd.p[fe.tagName]?ge.appendChild(fe):ge.firstChild()?(ue.insertBefore(ge,fe),ge=UE.uNode.createElement('p'),he+=2):he++;(!ge.firstChild()||ge.parentNode)&&ue.firstChild()||ue.appendChild(ge),ge.firstChild()||ge.innerHTML(browser.ie?'&nbsp;':'<br/>');var ye=ue.firstChild(),be=ye.lastChild();be&&'text'==be.type&&/^\s*$/.test(be.data)&&ye.removeChild(be)}),te.options.autoTransWordToList){function ue(ge,he){var fe=he.firstChild();if(fe&&'element'==fe.type&&'span'==fe.tagName&&/Wingdings|Symbol/.test(fe.getStyle('font-family'))){for(var ye in ce)if(ce[ye]==fe.data)return ye;return'disc'}for(var ye in de)if(de[ye].test(ge))return ye}var de={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},ce={square:'n'};utils.each(se.getNodesByTagName('p'),function(ge){function he(ve,Ne,we){if('ol'!=ve.tagName)Ne.removeChild(Ne.firstChild());else if(browser.ie){var Se=Ne.firstChild();'element'==Se.type&&'span'==Se.tagName&&de[we].test(Se.innerText())&&Ne.removeChild(Se)}else Ne.innerHTML(Ne.innerHTML().replace(de[we],''));var Te=UE.uNode.createElement('li');Te.appendChild(Ne),ve.appendChild(Te)}if('MsoListParagraph'==ge.getAttr('class')){ge.setStyle('margin',''),ge.setStyle('margin-left',''),ge.setAttr('class','');var fe=ge,be=ge,ye;if('li'!=ge.parentNode.tagName&&(ye=ue(ge.innerText(),ge))){var Ce=UE.uNode.createElement(te.options.insertorderedlist.hasOwnProperty(ye)?'ol':'ul');for(ae[ye]?Ce.setAttr('class','custom_'+ye):Ce.setStyle('list-style-type',ye);ge&&'li'!=ge.parentNode.tagName&&ue(ge.innerText(),ge);)fe=ge.nextSibling(),fe||ge.parentNode.insertBefore(Ce,ge),he(Ce,ge,ye),ge=fe;!Ce.parentNode&&ge&&ge.parentNode&&ge.parentNode.insertBefore(Ce,ge)}var xe=be.firstChild();xe&&'element'==xe.type&&'span'==xe.tagName&&/^\s*(&nbsp;)+\s*$/.test(xe.innerText())&&xe.parentNode.removeChild(xe)}})}}),te.addListener('contentchange',function(){z(te.document)}),te.addListener('keydown',function(se,de){function ce(){de.preventDefault?de.preventDefault():de.returnValue=!1,te.fireEvent('contentchange'),te.undoManger&&te.undoManger.save()}function ue(Ie,Ae){for(;Ie&&!domUtils.isBody(Ie);){if(Ae(Ie))return null;if(1==Ie.nodeType&&/[ou]l/i.test(Ie.tagName))return Ie;Ie=Ie.parentNode}return null}var ge=de.keyCode||de.which;if(13==ge&&!de.shiftKey){var he=te.selection.getRange(),fe=domUtils.findParent(he.startContainer,function(Ie){return domUtils.isBlockElm(Ie)},!0),ye=domUtils.findParentByTagName(he.startContainer,'li',!0);if(fe&&'PRE'!=fe.tagName&&!ye){var be=fe.innerHTML.replace(new RegExp(domUtils.fillChar,'g'),'');/^\s*1\s*\.[^\d]/.test(be)&&(fe.innerHTML=be.replace(/^\s*1\s*\./,''),he.setStartAtLast(fe).collapse(!0).select(),te.__hasEnterExecCommand=!0,te.execCommand('insertorderedlist'),te.__hasEnterExecCommand=!1)}var Ce=te.selection.getRange(),xe=ue(Ce.startContainer,function(Ie){return'TABLE'==Ie.tagName}),ve=Ce.collapsed?xe:ue(Ce.endContainer,function(Ie){return'TABLE'==Ie.tagName});if(xe&&ve&&xe===ve){if(!Ce.collapsed){if(xe=domUtils.findParentByTagName(Ce.startContainer,'li',!0),ve=domUtils.findParentByTagName(Ce.endContainer,'li',!0),!(xe&&ve&&xe===ve)){var Ne=Ce.cloneRange(),we=Ne.collapse(!1).createBookmark();Ce.deleteContents(),Ne.moveToBookmark(we);var ye=domUtils.findParentByTagName(Ne.startContainer,'li',!0);return Z(ye),Ne.select(),void ce()}if(Ce.deleteContents(),ye=domUtils.findParentByTagName(Ce.startContainer,'li',!0),ye&&domUtils.isEmptyBlock(ye))return Be=ye.previousSibling,next=ye.nextSibling,Ee=te.document.createElement('p'),domUtils.fillNode(te.document,Ee),Se=ye.parentNode,Be&&next?(Ce.setStart(next,0).collapse(!0).select(!0),domUtils.remove(ye)):((Be||next)&&Be?ye.parentNode.parentNode.insertBefore(Ee,Se.nextSibling):Se.parentNode.insertBefore(Ee,Se),domUtils.remove(ye),!Se.firstChild&&domUtils.remove(Se),Ce.setStart(Ee,0).setCursor()),void ce()}if(ye=domUtils.findParentByTagName(Ce.startContainer,'li',!0),ye){if(domUtils.isEmptyBlock(ye)){we=Ce.createBookmark();var Se=ye.parentNode;if(ye===Se.lastChild?(Se.parentNode.insertBefore(ye,Se.nextSibling),domUtils.isEmptyNode(Se)&&domUtils.remove(Se)):(domUtils.breakParent(ye,Se),Z(ye)),!dtd.$list[ye.parentNode.tagName])if(!domUtils.isBlockElm(ye.firstChild)){for(Ee=te.document.createElement('p'),ye.parentNode.insertBefore(Ee,ye);ye.firstChild;)Ee.appendChild(ye.firstChild);domUtils.remove(ye)}else domUtils.remove(ye,!0);Ce.moveToBookmark(we).select()}else{var Te=ye.firstChild;if(!Te||!domUtils.isBlockElm(Te)){var Ee=te.document.createElement('p');for(ye.firstChild||domUtils.fillNode(te.document,Ee);ye.firstChild;)Ee.appendChild(ye.firstChild);ye.appendChild(Ee),Te=Ee}var ke=te.document.createElement('span');Ce.insertNode(ke),domUtils.breakParent(ke,ye);var _e=ke.nextSibling;Te=_e.firstChild,Te||(Ee=te.document.createElement('p'),domUtils.fillNode(te.document,Ee),_e.appendChild(Ee),Te=Ee),domUtils.isEmptyNode(Te)&&(Te.innerHTML='',domUtils.fillNode(te.document,Te)),Ce.setStart(Te,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(ke);var Be=_e.previousSibling;Be&&domUtils.isEmptyBlock(Be)&&(Be.innerHTML='<p></p>',domUtils.fillNode(te.document,Be.firstChild))}ce()}}}if(8==ge&&(Ce=te.selection.getRange(),Ce.collapsed&&domUtils.isStartInblock(Ce)&&(Ne=Ce.cloneRange().trimBoundary(),ye=domUtils.findParentByTagName(Ce.startContainer,'li',!0),ye&&domUtils.isStartInblock(Ne)))){if(xe=domUtils.findParentByTagName(Ce.startContainer,'p',!0),xe&&xe!==ye.firstChild){var Se=domUtils.findParentByTagName(xe,['ol','ul']);return domUtils.breakParent(xe,Se),Z(xe),te.fireEvent('contentchange'),Ce.setStart(xe,0).setCursor(!1,!0),te.fireEvent('saveScene'),void domUtils.preventDefault(de)}if(ye&&(Be=ye.previousSibling)){if(46==ge&&ye.childNodes.length)return;if(dtd.$list[Be.tagName]&&(Be=Be.lastChild),te.undoManger&&te.undoManger.save(),Te=ye.firstChild,domUtils.isBlockElm(Te)){if(domUtils.isEmptyNode(Te))for(Be.appendChild(Te),Ce.setStart(Te,0).setCursor(!1,!0);ye.firstChild;)Be.appendChild(ye.firstChild);else ke=te.document.createElement('span'),Ce.insertNode(ke),domUtils.isEmptyBlock(Be)&&(Be.innerHTML=''),domUtils.moveChild(ye,Be),Ce.setStartBefore(ke).collapse(!0).select(!0),domUtils.remove(ke);}else if(domUtils.isEmptyNode(ye)){var Ee=te.document.createElement('p');Be.appendChild(Ee),Ce.setStart(Ee,0).setCursor()}else for(Ce.setEnd(Be,Be.childNodes.length).collapse().select(!0);ye.firstChild;)Be.appendChild(ye.firstChild);return domUtils.remove(ye),te.fireEvent('contentchange'),te.fireEvent('saveScene'),void domUtils.preventDefault(de)}if(ye&&!ye.previousSibling){var Se=ye.parentNode,we=Ce.createBookmark();if(domUtils.isTagNode(Se.parentNode,'ol ul'))Se.parentNode.insertBefore(ye,Se),domUtils.isEmptyNode(Se)&&domUtils.remove(Se);else{for(;ye.firstChild;)Se.parentNode.insertBefore(ye.firstChild,Se);domUtils.remove(ye),domUtils.isEmptyNode(Se)&&domUtils.remove(Se)}return Ce.moveToBookmark(we).setCursor(!1,!0),te.fireEvent('contentchange'),te.fireEvent('saveScene'),void domUtils.preventDefault(de)}}}),te.addListener('keyup',function(se,de){var ce=de.keyCode||de.which;if(8==ce){var ue=te.selection.getRange(),ge;(ge=domUtils.findParentByTagName(ue.startContainer,['ol','ul'],!0))&&W(ge,ge.tagName.toLowerCase(),$(ge)||domUtils.getComputedStyle(ge,'list-style-type'),!0)}}),te.addListener('tabkeydown',function(){function se(Se){if(-1!=te.options.maxListLevel){for(var Te=Se.parentNode,Ee=0;/[ou]l/i.test(Te.tagName);)Ee++,Te=Te.parentNode;if(Ee>=te.options.maxListLevel)return!0}}var de=te.selection.getRange(),ce=domUtils.findParentByTagName(de.startContainer,'li',!0);if(ce){var ue;if(de.collapsed){if(se(ce))return!0;var ge=ce.parentNode,he=te.document.createElement(ge.tagName),fe=utils.indexOf(oe[he.tagName],$(ge)||domUtils.getComputedStyle(ge,'list-style-type'));fe=fe+1==oe[he.tagName].length?0:fe+1;var ye=oe[he.tagName][fe];if(Y(he,ye),domUtils.isStartInblock(de))return te.fireEvent('saveScene'),ue=de.createBookmark(),ge.insertBefore(he,ce),he.appendChild(ce),W(he,he.tagName.toLowerCase(),ye),te.fireEvent('contentchange'),de.moveToBookmark(ue).select(!0),!0}else{te.fireEvent('saveScene'),ue=de.createBookmark();for(var be=0,xe=domUtils.findParents(ce),Ce,ve;ve=xe[be++];)if(domUtils.isTagNode(ve,'ol ul')){Ce=ve;break}var Ne=ce;if(ue.end)for(;Ne&&!(domUtils.getPosition(Ne,ue.end)&domUtils.POSITION_FOLLOWING);){if(se(Ne)){Ne=domUtils.getNextDomNode(Ne,!1,null,function(Se){return Se!==Ce});continue}var ge=Ne.parentNode,he=te.document.createElement(ge.tagName),fe=utils.indexOf(oe[he.tagName],$(ge)||domUtils.getComputedStyle(ge,'list-style-type')),we=fe+1==oe[he.tagName].length?0:fe+1,ye=oe[he.tagName][we];for(Y(he,ye),ge.insertBefore(he,Ne);Ne&&!(domUtils.getPosition(Ne,ue.end)&domUtils.POSITION_FOLLOWING);){if(ce=Ne.nextSibling,he.appendChild(Ne),!ce||domUtils.isTagNode(ce,'ol ul')){if(ce)for(;(ce=ce.firstChild)&&'LI'!=ce.tagName;);else ce=domUtils.getNextDomNode(Ne,!1,null,function(Se){return Se!==Ce});break}Ne=ce}W(he,he.tagName.toLowerCase(),ye),Ne=ce}return te.fireEvent('contentchange'),de.moveToBookmark(ue).select(),!0}}}),te.commands.insertorderedlist=te.commands.insertunorderedlist={execCommand:function(se,de){de||(de='insertorderedlist'==se.toLowerCase()?'decimal':'disc');var ce=this,ue=this.selection.getRange(),ge=function(je){return 1==je.nodeType?'br'!=je.tagName.toLowerCase():!domUtils.isWhitespace(je)},he='insertorderedlist'==se.toLowerCase()?'ol':'ul',fe=ce.document.createDocumentFragment();ue.adjustmentBoundary().shrinkBoundary();var ye=ue.createBookmark(!0),be=ee(ce.document.getElementById(ye.start)),Ce=0,xe=ee(ce.document.getElementById(ye.end)),ve=0,Ne,we,Se,Te;if(be||xe){if(be&&(Ne=be.parentNode),ye.end||(xe=be),xe&&(we=xe.parentNode),Ne===we){for(;be!==xe;){if(Te=be,be=be.nextSibling,!domUtils.isBlockElm(Te.firstChild)){for(var Ee=ce.document.createElement('p');Te.firstChild;)Ee.appendChild(Te.firstChild);Te.appendChild(Ee)}fe.appendChild(Te)}if(Te=ce.document.createElement('span'),Ne.insertBefore(Te,xe),!domUtils.isBlockElm(xe.firstChild)){for(Ee=ce.document.createElement('p');xe.firstChild;)Ee.appendChild(xe.firstChild);xe.appendChild(Ee)}fe.appendChild(xe),domUtils.breakParent(Te,Ne),domUtils.isEmptyNode(Te.previousSibling)&&domUtils.remove(Te.previousSibling),domUtils.isEmptyNode(Te.nextSibling)&&domUtils.remove(Te.nextSibling);var ke=$(Ne)||domUtils.getComputedStyle(Ne,'list-style-type')||('insertorderedlist'==se.toLowerCase()?'decimal':'disc');if(Ne.tagName.toLowerCase()==he&&ke==de){for(var _e=0,Ie=ce.document.createDocumentFragment(),Be;Be=fe.firstChild;)if(domUtils.isTagNode(Be,'ol ul'))Ie.appendChild(Be);else for(;Be.firstChild;)Ie.appendChild(Be.firstChild),domUtils.remove(Be);Te.parentNode.insertBefore(Ie,Te)}else Se=ce.document.createElement(he),Y(Se,de),Se.appendChild(fe),Te.parentNode.insertBefore(Se,Te);return domUtils.remove(Te),Se&&W(Se,he,de),void ue.moveToBookmark(ye).select()}if(be){for(;be;){if(Te=be.nextSibling,domUtils.isTagNode(be,'ol ul'))fe.appendChild(be);else{for(var Ae=ce.document.createDocumentFragment(),Le=0;be.firstChild;)domUtils.isBlockElm(be.firstChild)&&(Le=1),Ae.appendChild(be.firstChild);if(!Le){var Re=ce.document.createElement('p');Re.appendChild(Ae),fe.appendChild(Re)}else fe.appendChild(Ae);domUtils.remove(be)}be=Te}Ne.parentNode.insertBefore(fe,Ne.nextSibling),domUtils.isEmptyNode(Ne)?(ue.setStartBefore(Ne),domUtils.remove(Ne)):ue.setStartAfter(Ne),Ce=1}if(xe&&domUtils.inDoc(we,ce.document)){for(be=we.firstChild;be&&be!==xe;){if(Te=be.nextSibling,domUtils.isTagNode(be,'ol ul'))fe.appendChild(be);else{for(Ae=ce.document.createDocumentFragment(),Le=0;be.firstChild;)domUtils.isBlockElm(be.firstChild)&&(Le=1),Ae.appendChild(be.firstChild);Le?fe.appendChild(Ae):(Re=ce.document.createElement('p'),Re.appendChild(Ae),fe.appendChild(Re)),domUtils.remove(be)}be=Te}var Oe=domUtils.createElement(ce.document,'div',{tmpDiv:1});domUtils.moveChild(xe,Oe),fe.appendChild(Oe),domUtils.remove(xe),we.parentNode.insertBefore(fe,we),ue.setEndBefore(we),domUtils.isEmptyNode(we)&&domUtils.remove(we),ve=1}}Ce||ue.setStartBefore(ce.document.getElementById(ye.start)),ye.end&&!ve&&ue.setEndAfter(ce.document.getElementById(ye.end)),ue.enlarge(!0,function(je){return ne[je.tagName]}),fe=ce.document.createDocumentFragment();for(var Pe=ue.createBookmark(),De=domUtils.getNextDomNode(Pe.start,!1,ge),Me=ue.cloneRange(),Fe=domUtils.isBlockElm,He;De&&De!==Pe.end&&domUtils.getPosition(De,Pe.end)&domUtils.POSITION_PRECEDING;)if(3==De.nodeType||dtd.li[De.tagName]){if(1==De.nodeType&&dtd.$list[De.tagName]){for(;De.firstChild;)fe.appendChild(De.firstChild);He=domUtils.getNextDomNode(De,!1,ge),domUtils.remove(De),De=He;continue}for(He=De,Me.setStartBefore(De);De&&De!==Pe.end&&(!Fe(De)||domUtils.isBookmarkNode(De));)He=De,De=domUtils.getNextDomNode(De,!1,null,function(je){return!ne[je.tagName]});De&&Fe(De)&&(Te=domUtils.getNextDomNode(He,!1,ge),Te&&domUtils.isBookmarkNode(Te)&&(De=domUtils.getNextDomNode(Te,!1,ge),He=Te)),Me.setEndAfter(He),De=domUtils.getNextDomNode(He,!1,ge);var Ue=ue.document.createElement('li');if(Ue.appendChild(Me.extractContents()),domUtils.isEmptyNode(Ue)){for(var He=ue.document.createElement('p');Ue.firstChild;)He.appendChild(Ue.firstChild);Ue.appendChild(He)}fe.appendChild(Ue)}else De=domUtils.getNextDomNode(De,!0,ge);ue.moveToBookmark(Pe).collapse(!0),Se=ce.document.createElement(he),Y(Se,de),Se.appendChild(fe),ue.insertNode(Se),W(Se,he,de);for(var _e=0,qe=domUtils.getElementsByTagName(Se,'div'),Be;Be=qe[_e++];)Be.getAttribute('tmpDiv')&&domUtils.remove(Be,!0);ue.moveToBookmark(ye).select()},queryCommandState:function(se){for(var de='insertorderedlist'==se.toLowerCase()?'ol':'ul',ce=this.selection.getStartElementPath(),ue=0,ge;ge=ce[ue++];){if('TABLE'==ge.nodeName)return 0;if(de==ge.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(se){for(var de='insertorderedlist'==se.toLowerCase()?'ol':'ul',ce=this.selection.getStartElementPath(),ge=0,ue,he;he=ce[ge++];){if('TABLE'==he.nodeName){ue=null;break}if(de==he.nodeName.toLowerCase()){ue=he;break}}return ue?$(ue)||domUtils.getComputedStyle(ue,'list-style-type'):null}}},function(){var o={textarea:function($,z){var W=z.ownerDocument.createElement('textarea');return W.style.cssText='position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;',browser.ie&&8>browser.version&&(W.style.width=z.offsetWidth+'px',W.style.height=z.offsetHeight+'px',z.onresize=function(){W.style.width=z.offsetWidth+'px',W.style.height=z.offsetHeight+'px'}),z.appendChild(W),{setContent:function(Y){W.value=Y},getContent:function(){return W.value},select:function(){var Y;browser.ie?(Y=W.createTextRange(),Y.collapse(!0),Y.select()):(W.setSelectionRange(0,0),W.focus())},dispose:function(){z.removeChild(W),z.onresize=null,W=null,z=null}}},codemirror:function($,z){var W=window.CodeMirror(z,{mode:'text/html',tabMode:'indent',lineNumbers:!0,lineWrapping:!0}),Y=W.getWrapperElement();return Y.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',W.getScrollerElement().style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;',W.refresh(),{getCodeMirror:function(){return W},setContent:function(Z){W.setValue(Z)},getContent:function(){return W.getValue()},select:function(){W.focus()},dispose:function(){z.removeChild(Y),Y=null,W=null}}}};UE.plugins.source=function(){function $(re){return o['codemirror'==W.sourceEditor&&window.CodeMirror?'codemirror':'textarea'](z,re)}var z=this,W=this.options,Y=!1,Z,ee;W.sourceEditor=browser.ie?'textarea':W.sourceEditor||'codemirror',z.setOpt({sourceEditorFirst:!1});var te,ne,ae;z.commands.source={execCommand:function(){if(Y=!Y,Y){ae=z.selection.getRange().createAddress(!1,!0),z.undoManger&&z.undoManger.save(!0),browser.gecko&&(z.body.contentEditable=!1),te=z.iframe.style.cssText,z.iframe.style.cssText+='position:absolute;left:-32768px;top:-32768px;',z.fireEvent('beforegetcontent');var re=UE.htmlparser(z.body.innerHTML);z.filterOutputRule(re),re.traversal(function(ue){if('element'==ue.type)switch(ue.tagName){case'td':case'th':case'caption':ue.children&&1==ue.children.length&&'br'==ue.firstChild().tagName&&ue.removeChild(ue.firstChild());;break;case'pre':ue.innerText(ue.innerText().replace(/&nbsp;/g,' '));}}),z.fireEvent('aftergetcontent');var le=re.toHtml(!0);Z=$(z.iframe.parentNode),Z.setContent(le),ee=z.setContent,z.setContent=function(ue){var ge=UE.htmlparser(ue);z.filterInputRule(ge),ue=ge.toHtml(),Z.setContent(ue)},setTimeout(function(){Z.select(),z.addListener('fullscreenchanged',function(){try{Z.getCodeMirror().refresh()}catch(ue){}})}),ne=z.getContent,z.getContent=function(){return Z.getContent()||'<p>'+(browser.ie?'':'<br/>')+'</p>'}}else{z.iframe.style.cssText=te;var se=Z.getContent()||'<p>'+(browser.ie?'':'<br/>')+'</p>';se=se.replace(/[\r\t\n ]*<\/?(\w+)\s*(?:[^>]*)>/g,function(ue,ge){return ge&&!dtd.$inlineWithA[ge.toLowerCase()]?ue.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,''):ue.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,'')}),z.setContent=ee,z.setContent(se),Z.dispose(),Z=null,z.getContent=ne;var de=z.body.firstChild;if(de||(z.body.innerHTML='<p>'+(browser.ie?'':'<br/>')+'</p>',de=z.body.firstChild),z.undoManger&&z.undoManger.save(!0),browser.gecko){var ce=document.createElement('input');ce.style.cssText='position:absolute;left:0;top:-32768px',document.body.appendChild(ce),z.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(ce,{left:-32768,top:0}),ce.focus(),setTimeout(function(){z.body.contentEditable=!0,z.selection.getRange().moveToAddress(ae).select(!0),domUtils.remove(ce)})})}else try{z.selection.getRange().moveToAddress(ae).select(!0)}catch(ue){}}this.fireEvent('sourcemodechanged',Y)},queryCommandState:function(){return 0|Y},notNeedUndo:1};var oe=z.queryCommandState;z.queryCommandState=function(re){return re=re.toLowerCase(),Y?re in{source:1,fullscreen:1}?1:-1:oe.apply(this,arguments)},'codemirror'==W.sourceEditor&&z.addListener('ready',function(){utils.loadFile(document,{src:W.codeMirrorJsUrl||W.UEDITOR_HOME_URL+'third-party/codemirror/codemirror.js',tag:'script',type:'text/javascript',defer:'defer'},function(){W.sourceEditorFirst&&setTimeout(function(){z.execCommand('source')},0)}),utils.loadFile(document,{tag:'link',rel:'stylesheet',type:'text/css',href:W.codeMirrorCssUrl||W.UEDITOR_HOME_URL+'third-party/codemirror/codemirror.css'})})}}(),UE.plugins.enterkey=function(){var $=this,z=$.options.enterTag,o;$.addListener('keyup',function(W,Y){var Z=Y.keyCode||Y.which;if(13==Z){var ee=$.selection.getRange(),te=ee.startContainer,ne;if(!browser.ie){if(/h\d/i.test(o)){if(browser.gecko){var ae=domUtils.findParentByTagName(te,['h1','h2','h3','h4','h5','h6','blockquote','caption','table'],!0);ae||($.document.execCommand('formatBlock',!1,'<p>'),ne=1)}else if(1==te.nodeType){var oe=$.document.createTextNode(''),re;if(ee.insertNode(oe),re=domUtils.findParentByTagName(oe,'div',!0),re){for(var le=$.document.createElement('p');re.firstChild;)le.appendChild(re.firstChild);re.parentNode.insertBefore(le,re),domUtils.remove(re),ee.setStartBefore(oe).setCursor(),ne=1}domUtils.remove(oe)}$.undoManger&&ne&&$.undoManger.save()}browser.opera&&ee.select()}else $.fireEvent('saveScene',!0,!0)}}),$.addListener('keydown',function(W,Y){var Z=Y.keyCode||Y.which;if(13==Z){if($.fireEvent('beforeenterkeydown'))return void domUtils.preventDefault(Y);$.fireEvent('saveScene',!0,!0),o='';var ee=$.selection.getRange();if(!ee.collapsed){var te=ee.startContainer,ne=ee.endContainer,ae=domUtils.findParentByTagName(te,'td',!0),oe=domUtils.findParentByTagName(ne,'td',!0);if(ae&&oe&&ae!==oe||!ae&&oe||ae&&!oe)return void(Y.preventDefault?Y.preventDefault():Y.returnValue=!1)}if('p'==z)browser.ie||(te=domUtils.findParentByTagName(ee.startContainer,['ol','ul','p','h1','h2','h3','h4','h5','h6','blockquote','caption'],!0),te||browser.opera?(o=te.tagName,'p'==te.tagName.toLowerCase()&&browser.gecko&&domUtils.removeDirtyAttr(te)):($.document.execCommand('formatBlock',!1,'<p>'),browser.gecko&&(ee=$.selection.getRange(),te=domUtils.findParentByTagName(ee.startContainer,'p',!0),te&&domUtils.removeDirtyAttr(te))));else if(Y.preventDefault?Y.preventDefault():Y.returnValue=!1,!!ee.collapsed){re=ee.document.createElement('br'),ee.insertNode(re);var le=re.parentNode;le.lastChild===re?(re.parentNode.insertBefore(re.cloneNode(!0),re),ee.setStartBefore(re)):ee.setStartAfter(re),ee.setCursor()}else if(ee.deleteContents(),te=ee.startContainer,1==te.nodeType&&(te=te.childNodes[ee.startOffset])){for(;1==te.nodeType;){if(dtd.$empty[te.tagName])return ee.setStartBefore(te).setCursor(),$.undoManger&&$.undoManger.save(),!1;if(!te.firstChild){var re=ee.document.createElement('br');return te.appendChild(re),ee.setStart(te,0).setCursor(),$.undoManger&&$.undoManger.save(),!1}te=te.firstChild}te===ee.startContainer.childNodes[ee.startOffset]?(re=ee.document.createElement('br'),ee.insertNode(re).setCursor()):ee.setStart(te,0).setCursor()}else re=ee.document.createElement('br'),ee.insertNode(re).setStartAfter(re).setCursor()}})},UE.plugins.keystrokes=function(){var o=this,$=!0;o.addListener('keydown',function(z,W){var Y=W.keyCode||W.which,Z=o.selection.getRange();if(!Z.collapsed&&!(W.ctrlKey||W.shiftKey||W.altKey||W.metaKey)&&(65<=Y&&90>=Y||48<=Y&&57>=Y||96<=Y&&111>=Y||{8:1,13:1,46:1}[Y])){var ee=Z.startContainer;if(domUtils.isFillChar(ee)&&Z.setStartBefore(ee),ee=Z.endContainer,domUtils.isFillChar(ee)&&Z.setEndAfter(ee),Z.txtToElmBoundary(),Z.endContainer&&1==Z.endContainer.nodeType&&(ee=Z.endContainer.childNodes[Z.endOffset],ee&&domUtils.isBr(ee)&&Z.setEndAfter(ee)),0==Z.startOffset&&(ee=Z.startContainer,domUtils.isBoundaryNode(ee,'firstChild')&&(ee=Z.endContainer,Z.endOffset==(3==ee.nodeType?ee.nodeValue.length:ee.childNodes.length)&&domUtils.isBoundaryNode(ee,'lastChild'))))return o.fireEvent('saveScene'),o.body.innerHTML='<p>'+(browser.ie?'':'<br/>')+'</p>',Z.setStart(o.body.firstChild,0).setCursor(!1,!0),void o._selectionChange()}if(Y==keymap.Backspace){if(Z=o.selection.getRange(),$=Z.collapsed,o.fireEvent('delkeydown',W))return;var te,ne;if(Z.collapsed&&Z.inFillChar()&&(te=Z.startContainer,domUtils.isFillChar(te)?(Z.setStartBefore(te).shrinkBoundary(!0).collapse(!0),domUtils.remove(te)):(te.nodeValue=te.nodeValue.replace(new RegExp('^'+domUtils.fillChar),''),Z.startOffset--,Z.collapse(!0).select(!0))),te=Z.getClosedNode())return o.fireEvent('saveScene'),Z.setStartBefore(te),domUtils.remove(te),Z.setCursor(),o.fireEvent('saveScene'),void domUtils.preventDefault(W);if(!browser.ie&&(te=domUtils.findParentByTagName(Z.startContainer,'table',!0),ne=domUtils.findParentByTagName(Z.endContainer,'table',!0),te&&!ne||!te&&ne||te!==ne))return void W.preventDefault()}if(Y==keymap.Tab){var ae={ol:1,ul:1,table:1};if(o.fireEvent('tabkeydown',W))return void domUtils.preventDefault(W);var oe=o.selection.getRange();o.fireEvent('saveScene');for(var re=0,le='',se=o.options.tabSize||4,de=o.options.tabNode||'&nbsp;';re<se;re++)le+=de;var ce=o.document.createElement('span');if(ce.innerHTML=le+domUtils.fillChar,oe.collapsed)oe.insertNode(ce.cloneNode(!0).firstChild).setCursor(!0);else{var ue=function(be){return domUtils.isBlockElm(be)&&!ae[be.tagName.toLowerCase()]};if(te=domUtils.findParent(oe.startContainer,ue,!0),ne=domUtils.findParent(oe.endContainer,ue,!0),te&&ne&&te===ne)oe.deleteContents(),oe.insertNode(ce.cloneNode(!0).firstChild).setCursor(!0);else{var ge=oe.createBookmark();oe.enlarge(!0);for(var he=oe.createBookmark(),fe=domUtils.getNextDomNode(he.start,!1,ue);fe&&!(domUtils.getPosition(fe,he.end)&domUtils.POSITION_FOLLOWING);)fe.insertBefore(ce.cloneNode(!0).firstChild,fe.firstChild),fe=domUtils.getNextDomNode(fe,!1,ue);oe.moveToBookmark(he).moveToBookmark(ge).select()}}domUtils.preventDefault(W)}if(browser.gecko&&46==Y&&(oe=o.selection.getRange(),oe.collapsed&&(te=oe.startContainer,domUtils.isEmptyBlock(te)))){for(var ye=te.parentNode;1==domUtils.getChildCount(ye)&&!domUtils.isBody(ye);)te=ye,ye=ye.parentNode;return void(te===ye.lastChild&&W.preventDefault())}}),o.addListener('keyup',function(z,W){var Y=W.keyCode||W.which,ee=this,Z;if(Y==keymap.Backspace){if(ee.fireEvent('delkeyup'))return;if(Z=ee.selection.getRange(),Z.collapsed){var te;if((te=domUtils.findParentByTagName(Z.startContainer,['h1','h2','h3','h4','h5','h6'],!0))&&domUtils.isEmptyBlock(te)){var ae=te.previousSibling;if(ae&&'TABLE'!=ae.nodeName)return domUtils.remove(te),void Z.setStartAtLast(ae).setCursor(!1,!0);var oe=te.nextSibling;if(oe&&'TABLE'!=oe.nodeName)return domUtils.remove(te),void Z.setStartAtFirst(oe).setCursor(!1,!0)}if(domUtils.isBody(Z.startContainer)){var te=domUtils.createElement(ee.document,'p',{innerHTML:browser.ie?domUtils.fillChar:'<br/>'});Z.insertNode(te).setStart(te,0).setCursor(!1,!0)}}if(!$&&(3==Z.startContainer.nodeType||1==Z.startContainer.nodeType&&domUtils.isEmptyBlock(Z.startContainer)))if(browser.ie){var re=Z.document.createElement('span');Z.insertNode(re).setStartBefore(re).collapse(!0),Z.select(),domUtils.remove(re)}else Z.select()}})},UE.plugins.fiximgclick=function(){function o(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var $=!1;return function(){var z=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];o.prototype={init:function(W){var Y=this;Y.editor=W,Y.startPos=this.prePos={x:0,y:0},Y.dragId=-1;var Z=[],ee=Y.cover=document.createElement('div'),te=Y.resizer=document.createElement('div');for(ee.id=Y.editor.ui.id+'_imagescale_cover',ee.style.cssText='position:absolute;display:none;z-index:'+Y.editor.options.zIndex+';filter:alpha(opacity=0); opacity:0;background:#CCC;',domUtils.on(ee,'mousedown click',function(){Y.hide()}),i=0;8>i;i++)Z.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');te.id=Y.editor.ui.id+'_imagescale',te.className='edui-editor-imagescale',te.innerHTML=Z.join(''),te.style.cssText+=';display:none;border:1px solid #3b77ff;z-index:'+Y.editor.options.zIndex+';',Y.editor.ui.getDom().appendChild(ee),Y.editor.ui.getDom().appendChild(te),Y.initStyle(),Y.initEvents()},initStyle:function(){utils.cssRule('imagescale','.edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}')},initEvents:function(){var W=this;W.startPos.x=W.startPos.y=0,W.isDraging=!1},_eventHandler:function(W){var Y=this;switch(W.type){case'mousedown':var Z=W.target||W.srcElement,Z;-1!=Z.className.indexOf('edui-editor-imagescale-hand')&&-1==Y.dragId&&(Y.dragId=Z.className.slice(-1),Y.startPos.x=Y.prePos.x=W.clientX,Y.startPos.y=Y.prePos.y=W.clientY,domUtils.on(Y.doc,'mousemove',Y.proxy(Y._eventHandler,Y)));break;case'mousemove':-1!=Y.dragId&&(Y.updateContainerStyle(Y.dragId,{x:W.clientX-Y.prePos.x,y:W.clientY-Y.prePos.y}),Y.prePos.x=W.clientX,Y.prePos.y=W.clientY,$=!0,Y.updateTargetElement());break;case'mouseup':-1!=Y.dragId&&(Y.updateContainerStyle(Y.dragId,{x:W.clientX-Y.prePos.x,y:W.clientY-Y.prePos.y}),Y.updateTargetElement(),Y.target.parentNode&&Y.attachTo(Y.target),Y.dragId=-1),domUtils.un(Y.doc,'mousemove',Y.proxy(Y._eventHandler,Y)),$&&($=!1,Y.editor.fireEvent('contentchange'));break;default:}},updateTargetElement:function(){var W=this;domUtils.setStyles(W.target,{width:W.resizer.style.width,height:W.resizer.style.height}),W.target.width=parseInt(W.resizer.style.width),W.target.height=parseInt(W.resizer.style.height),W.attachTo(W.target)},updateContainerStyle:function(W,Y){var Z=this,ee=Z.resizer,te;0!=z[W][0]&&(te=parseInt(ee.style.left)+Y.x,ee.style.left=Z._validScaledProp('left',te)+'px'),0!=z[W][1]&&(te=parseInt(ee.style.top)+Y.y,ee.style.top=Z._validScaledProp('top',te)+'px'),0!=z[W][2]&&(te=ee.clientWidth+z[W][2]*Y.x,ee.style.width=Z._validScaledProp('width',te)+'px'),0!=z[W][3]&&(te=ee.clientHeight+z[W][3]*Y.y,ee.style.height=Z._validScaledProp('height',te)+'px')},_validScaledProp:function(W,Y){var Z=this.resizer,ee=document;return Y=isNaN(Y)?0:Y,'left'===W?0>Y?0:Y+Z.clientWidth>ee.clientWidth?ee.clientWidth-Z.clientWidth:Y:'top'===W?0>Y?0:Y+Z.clientHeight>ee.clientHeight?ee.clientHeight-Z.clientHeight:Y:'width'===W?0>=Y?1:Y+Z.offsetLeft>ee.clientWidth?ee.clientWidth-Z.offsetLeft:Y:'height'===W?0>=Y?1:Y+Z.offsetTop>ee.clientHeight?ee.clientHeight-Z.offsetTop:Y:void 0},hideCover:function(){this.cover.style.display='none'},showCover:function(){var W=this,Y=domUtils.getXY(W.editor.ui.getDom()),Z=domUtils.getXY(W.editor.iframe);domUtils.setStyles(W.cover,{width:W.editor.iframe.offsetWidth+'px',height:W.editor.iframe.offsetHeight+'px',top:Z.y-Y.y+'px',left:Z.x-Y.x+'px',position:'absolute',display:''})},show:function(W){var Y=this;Y.resizer.style.display='block',W&&Y.attachTo(W),domUtils.on(this.resizer,'mousedown',Y.proxy(Y._eventHandler,Y)),domUtils.on(Y.doc,'mouseup',Y.proxy(Y._eventHandler,Y)),Y.showCover(),Y.editor.fireEvent('afterscaleshow',Y),Y.editor.fireEvent('saveScene')},hide:function(){var W=this;W.hideCover(),W.resizer.style.display='none',domUtils.un(W.resizer,'mousedown',W.proxy(W._eventHandler,W)),domUtils.un(W.doc,'mouseup',W.proxy(W._eventHandler,W)),W.editor.fireEvent('afterscalehide',W)},proxy:function(W,Y){return function(){return W.apply(Y||this,arguments)}},attachTo:function(W){var Y=this,Z=Y.target=W,ee=this.resizer,te=domUtils.getXY(Z),ne=domUtils.getXY(Y.editor.iframe),ae=domUtils.getXY(ee.parentNode);domUtils.setStyles(ee,{width:Z.width+'px',height:Z.height+'px',left:ne.x+te.x-Y.editor.document.body.scrollLeft-ae.x-parseInt(ee.style.borderLeftWidth)+'px',top:ne.y+te.y-Y.editor.document.body.scrollTop-ae.y-parseInt(ee.style.borderTopWidth)+'px'})}}}(),function(){var z=this,W;z.setOpt('imageScaleEnabled',!0),!browser.ie&&z.options.imageScaleEnabled&&z.addListener('click',function(){var ee=z.selection.getRange(),te=ee.getClosedNode();if(te&&'IMG'==te.tagName&&'false'!=z.body.contentEditable){if(-1!=te.className.indexOf('edui-faked-music')||te.getAttribute('anchorname')||domUtils.hasClass(te,'loadingclass')||domUtils.hasClass(te,'loaderrorclass'))return;if(!W){W=new o,W.init(z),z.ui.getDom().appendChild(W.resizer);var ne=function(){W.hide(),W.target&&z.selection.getRange().selectNode(W.target).select()},ae=function(re){var le=re.target||re.srcElement;le&&(void 0===le.className||-1==le.className.indexOf('edui-editor-imagescale'))&&ne(re)},oe;z.addListener('afterscaleshow',function(){z.addListener('beforekeydown',ne),z.addListener('beforemousedown',ae),domUtils.on(document,'keydown',ne),domUtils.on(document,'mousedown',ae),z.selection.getNative().removeAllRanges()}),z.addListener('afterscalehide',function(){z.removeListener('beforekeydown',ne),z.removeListener('beforemousedown',ae),domUtils.un(document,'keydown',ne),domUtils.un(document,'mousedown',ae);var le=W.target;le.parentNode&&z.selection.getRange().selectNode(le).select()}),domUtils.on(W.resizer,'mousedown',function(re){z.selection.getNative().removeAllRanges();var le=re.target||re.srcElement;le&&-1==le.className.indexOf('edui-editor-imagescale-hand')&&(oe=setTimeout(function(){W.hide(),W.target&&z.selection.getRange().selectNode(le).select()},200))}),domUtils.on(W.resizer,'mouseup',function(re){var le=re.target||re.srcElement;le&&-1==le.className.indexOf('edui-editor-imagescale-hand')&&clearTimeout(oe)})}W.show(te)}else W&&'none'!=W.resizer.style.display&&W.hide()}),browser.webkit&&z.addListener('click',function(Y,Z){if('IMG'==Z.target.tagName&&'false'!=z.body.contentEditable){var ee=new dom.Range(z.document);ee.selectNode(Z.target).select()}})}}(),UE.plugin.register('autolink',function(){return browser.ie?{}:{bindEvents:{reset:function(){},keydown:function($,z){var W=this,Y=z.keyCode||z.which;if(32==Y||13==Y){for(var Z=W.selection.getNative(),ee=Z.getRangeAt(0).cloneRange(),ae=ee.startContainer,te,ne;1==ae.nodeType&&0<ee.startOffset&&(ae=ee.startContainer.childNodes[ee.startOffset-1],!!ae);)ee.setStart(ae,1==ae.nodeType?ae.childNodes.length:ae.nodeValue.length),ee.collapse(!0),ae=ee.startContainer;do{if(0==ee.startOffset){for(ae=ee.startContainer.previousSibling;ae&&1==ae.nodeType;)ae=ae.lastChild;if(!ae||domUtils.isFillChar(ae))break;te=ae.nodeValue.length}else ae=ee.startContainer,te=ee.startOffset;ee.setStart(ae,te-1),ne=ee.toString().charCodeAt(0)}while(160!=ne&&32!=ne);if(ee.toString().replace(new RegExp(domUtils.fillChar,'g'),'').match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;ee.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(ee.toString());)try{ee.setStart(ee.startContainer,ee.startOffset+1)}catch(se){for(var ae=ee.startContainer;!(next=ae.nextSibling);){if(domUtils.isBody(ae))return;ae=ae.parentNode}ee.setStart(next,0)}if(domUtils.findParentByTagName(ee.startContainer,'a',!0))return;var oe=W.document.createElement('a'),re=W.document.createTextNode(' '),le;W.undoManger&&W.undoManger.save(),oe.appendChild(ee.extractContents()),oe.href=oe.innerHTML=oe.innerHTML.replace(/<[^>]+>/g,''),le=oe.getAttribute('href').replace(new RegExp(domUtils.fillChar,'g'),''),le=/^(?:https?:\/\/)/ig.test(le)?le:'http://'+le,oe.setAttribute('_src',utils.html(le)),oe.href=utils.html(le),ee.insertNode(oe),oe.parentNode.insertBefore(re,oe.nextSibling),ee.setStart(re,0),ee.collapse(!0),Z.removeAllRanges(),Z.addRange(ee),W.undoManger&&W.undoManger.save()}}}}}},function(){function o(z){if(3==z.nodeType)return null;if('A'==z.nodeName)return z;for(var W=z.lastChild;W;){if('A'==W.nodeName)return W;if(3==W.nodeType){if(domUtils.isWhitespace(W)){W=W.previousSibling;continue}return null}W=W.lastChild}}var $={13:1,32:1,37:1,38:1,39:1,40:1};browser.ie&&this.addListener('keyup',function(z,W){var Y=this,Z=W.keyCode;if($[Z]){var ee=Y.selection.getRange(),te=ee.startContainer;if(13==Z){for(;te&&!domUtils.isBody(te)&&!domUtils.isBlockElm(te);)te=te.parentNode;if(te&&!domUtils.isBody(te)&&'P'==te.nodeName){var ne=te.previousSibling;if(ne&&1==ne.nodeType){var ne=o(ne);ne&&!ne.getAttribute('_href')&&domUtils.remove(ne,!0)}}}else if(32==Z)3==te.nodeType&&/^\s$/.test(te.nodeValue)&&(te=te.previousSibling,te&&'A'==te.nodeName&&!te.getAttribute('_href')&&domUtils.remove(te,!0));else if(te=domUtils.findParentByTagName(te,'a',!0),te&&!te.getAttribute('_href')){var ae=ee.createBookmark();domUtils.remove(te,!0),ee.moveToBookmark(ae).select(!0)}}})}),UE.plugins.autoheight=function(){function o(){var ne=this;clearTimeout(ee),te||(!ne.queryCommandState||ne.queryCommandState&&1!=ne.queryCommandState('source'))&&(ee=setTimeout(function(){for(var ae=ne.body.lastChild;ae&&1!=ae.nodeType;)ae=ae.previousSibling;ae&&1==ae.nodeType&&(ae.style.clear='both',Z=_Mathmax(domUtils.getXY(ae).y+ae.offsetHeight+25,_Mathmax(Y.minFrameHeight,Y.initialFrameHeight)),Z!=W&&(Z!==parseInt(ne.iframe.parentNode.style.height)&&(ne.iframe.parentNode.style.height=Z+'px'),ne.body.style.height=Z+'px',W=Z),domUtils.removeStyle(ae,'clear'))},50))}var $=this;if($.autoHeightEnabled=!1!==$.options.autoHeightEnabled,!!$.autoHeightEnabled){var W=0,Y=$.options,z,Z,ee,te;$.addListener('fullscreenchanged',function(ne,ae){te=ae}),$.addListener('destroy',function(){$.removeListener('contentchange afterinserthtml keyup mouseup',o)}),$.enableAutoHeight=function(){var ne=this;if(ne.autoHeightEnabled){var ae=ne.document;ne.autoHeightEnabled=!0,z=ae.body.style.overflowY,ae.body.style.overflowY='hidden',ne.addListener('contentchange afterinserthtml keyup mouseup',o),setTimeout(function(){o.call(ne)},browser.gecko?100:0),ne.fireEvent('autoheightchanged',ne.autoHeightEnabled)}},$.disableAutoHeight=function(){$.body.style.overflowY=z||'',$.removeListener('contentchange',o),$.removeListener('keyup',o),$.removeListener('mouseup',o),$.autoHeightEnabled=!1,$.fireEvent('autoheightchanged',$.autoHeightEnabled)},$.on('setHeight',function(){$.disableAutoHeight()}),$.addListener('ready',function(){$.enableAutoHeight();var ne;domUtils.on(browser.ie?$.body:$.document,browser.webkit?'dragover':'drop',function(){clearTimeout(ne),ne=setTimeout(function(){o.call($)},100)});var ae;window.onscroll=function(){null===ae?ae=this.scrollY:0==this.scrollY&&0!=ae&&($.window.scrollTo(0,0),ae=null)}})}},UE.plugins.autofloat=function(){function o(){return UE.ui?1:(alert(ee.autofloatMsg),0)}function $(){var fe=document.body.style;fe.backgroundImage='url("about:blank")',fe.backgroundAttachment='fixed'}function z(){var fe=domUtils.getXY(de),ye=domUtils.getComputedStyle(de,'position'),be=domUtils.getComputedStyle(de,'left');de.style.width=de.offsetWidth+'px',de.style.zIndex=1*Z.options.zIndex+1,de.parentNode.insertBefore(se,de),oe||re&&browser.ie?('absolute'!=de.style.position&&(de.style.position='absolute'),de.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-ce+ne+'px'):(browser.ie7Compat&&ge&&(ge=!1,de.style.left=domUtils.getXY(de).x-document.documentElement.getBoundingClientRect().left+2+'px'),'fixed'!=de.style.position&&(de.style.position='fixed',de.style.top=ne+'px',('absolute'==ye||'relative'==ye)&&parseFloat(be)&&(de.style.left=fe.x+'px')))}function W(){ge=!0,se.parentNode&&se.parentNode.removeChild(se),de.style.cssText=le}function Y(){var fe=ue(Z.container),ye=Z.options.toolbarTopOffset||0;0>fe.top&&fe.bottom-de.offsetHeight>ye?z():W()}var Z=this,ee=Z.getLang();Z.setOpt({topOffset:0});var te=!1!==Z.options.autoFloatEnabled,ne=Z.options.topOffset;if(te){var ae=UE.ui.uiUtils,oe=browser.ie&&6>=browser.version,re=browser.quirks,se=document.createElement('div'),ge=!0,he=utils.defer(function(){Y()},browser.ie?200:100,!0),le,de,ce,ue;Z.addListener('destroy',function(){domUtils.un(window,['scroll','resize'],Y),Z.removeListener('keydown',he)}),Z.addListener('ready',function(){if(o(Z)){if(!Z.ui)return;ue=ae.getClientRect,de=Z.ui.getDom('toolbarbox'),ce=ue(de).top,le=de.style.cssText,se.style.height=de.offsetHeight+'px',oe&&$(),domUtils.on(window,['scroll','resize'],Y),Z.addListener('keydown',he),Z.addListener('beforefullscreenchange',function(fe,ye){ye&&W()}),Z.addListener('fullscreenchanged',function(fe,ye){ye||Y()}),Z.addListener('sourcemodechanged',function(){setTimeout(function(){Y()},0)}),Z.addListener('clearDoc',function(){setTimeout(function(){Y()},0)})}})}},UE.plugins.video=function(){function o(W,Y,Z,ee,te,ne,ae){W=utils.unhtmlForUrl(W),te=utils.unhtml(te),ne=utils.unhtml(ne),Y=parseInt(Y,10)||0,Z=parseInt(Z,10)||0;var oe;switch(ae){case'image':oe='<img '+(ee?'id="'+ee+'"':'')+' width="'+Y+'" height="'+Z+'" _url="'+W+'" class="'+ne.replace(/\bvideo-js\b/,'')+'" src="'+z.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+z.options.UEDITOR_HOME_URL+'themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;'+(te?'float:'+te+';':'')+'" />';break;case'embed':oe='<embed type="application/x-shockwave-flash" class="'+ne+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(W)+'" width="'+Y+'" height="'+Z+'"'+(te?' style="float:'+te+'"':'')+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case'video':var re=W.substr(W.lastIndexOf('.')+1);'ogv'==re&&(re='ogg'),oe='<video'+(ee?' id="'+ee+'"':'')+' class="'+ne+' video-js" '+(te?' style="float:'+te+'"':'')+' controls preload="none" width="'+Y+'" height="'+Z+'" src="'+W+'" data-setup="{}"><source src="'+W+'" type="video/'+re+'" /></video>';}return oe}function $(W,Y){utils.each(W.getNodesByTagName(Y?'img':'embed video'),function(Z){var ee=Z.getAttr('class');if(ee&&-1!=ee.indexOf('edui-faked-video')){var te=o(Y?Z.getAttr('_url'):Z.getAttr('src'),Z.getAttr('width'),Z.getAttr('height'),null,Z.getStyle('float')||'',ee,Y?'embed':'image');Z.parentNode.replaceChild(UE.uNode.createElement(te),Z)}if(ee&&-1!=ee.indexOf('edui-upload-video')){var te=o(Y?Z.getAttr('_url'):Z.getAttr('src'),Z.getAttr('width'),Z.getAttr('height'),null,Z.getStyle('float')||'',ee,Y?'video':'image');Z.parentNode.replaceChild(UE.uNode.createElement(te),Z)}})}var z=this;z.addOutputRule(function(W){$(W,!0)}),z.addInputRule(function(W){$(W)}),z.commands.insertvideo={execCommand:function(W,Y,Z){Y=utils.isArray(Y)?Y:[Y];for(var ee=[],ae=0,re=Y.length,ne,oe;ae<re;ae++)oe=Y[ae],ne='upload'==Z?'edui-upload-video video-js vjs-default-skin':'edui-faked-video',ee.push(o(oe.url,oe.width||420,oe.height||280,'tmpVedio'+ae,null,ne,'image'));z.execCommand('inserthtml',ee.join(''),!0);for(var le=this.selection.getRange(),ae=0,re=Y.length,se;ae<re;ae++)se=this.document.getElementById('tmpVedio'+ae),domUtils.removeAttributes(se,'id'),le.selectNode(se).select(),z.execCommand('imagefloat',Y[ae].align)},queryCommandState:function(){var W=z.selection.getRange().getClosedNode(),Y=W&&('edui-faked-video'==W.className||-1!=W.className.indexOf('edui-upload-video'));return Y?1:0}}},function(){function o(){}var $=UE.UETable=function(z){this.table=z,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(z)};$.removeSelectedClass=function(z){utils.each(z,function(W){domUtils.removeClasses(W,'selectTdClass')})},$.addSelectedClass=function(z){utils.each(z,function(W){domUtils.addClass(W,'selectTdClass')})},$.isEmptyBlock=function(z){var W=new RegExp(domUtils.fillChar,'g');if(0<z[browser.ie?'innerText':'textContent'].replace(/^\s*$/,'').replace(W,'').length)return 0;for(var Y in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(Y)&&z.getElementsByTagName(Y).length)return 0;return 1},$.getWidth=function(z){return z?parseInt(domUtils.getComputedStyle(z,'width'),10):0},$.getTableCellAlignState=function(z){utils.isArray(z)||(z=[z]);var W={},Y=['align','valign'],Z=null,ee=!0;return utils.each(z,function(te){return utils.each(Y,function(ne){if(Z=te.getAttribute(ne),!W[ne]&&Z)W[ne]=Z;else if(!W[ne]||Z!==W[ne])return ee=!1,!1}),ee}),ee?W:null},$.getTableItemsByRange=function(z){var W=z.selection.getStart();W&&W.id&&0===W.id.indexOf('_baidu_bookmark_start_')&&W.nextSibling&&(W=W.nextSibling);var Y=W&&domUtils.findParentByTagName(W,['td','th'],!0),Z=Y&&Y.parentNode,ee=W&&domUtils.findParentByTagName(W,'caption',!0),te=ee?ee.parentNode:Z&&Z.parentNode.parentNode;return{cell:Y,tr:Z,table:te,caption:ee}},$.getUETableBySelected=function(z){var W=$.getTableItemsByRange(z).table;return W&&W.ueTable&&W.ueTable.selectedTds.length?W.ueTable:null},$.getDefaultValue=function(z,W){var Y={thin:'0px',medium:'1px',thick:'2px'},Z,ee,te,ne;if(!W){W=z.document.createElement('table'),W.insertRow(0).insertCell(0).innerHTML='xxx',z.body.appendChild(W);var ae=W.getElementsByTagName('td')[0];return ne=domUtils.getComputedStyle(W,'border-left-width'),Z=parseInt(Y[ne]||ne,10),ne=domUtils.getComputedStyle(ae,'padding-left'),ee=parseInt(Y[ne]||ne,10),ne=domUtils.getComputedStyle(ae,'border-left-width'),te=parseInt(Y[ne]||ne,10),domUtils.remove(W),{tableBorder:Z,tdPadding:ee,tdBorder:te}}return ae=W.getElementsByTagName('td')[0],ne=domUtils.getComputedStyle(W,'border-left-width'),Z=parseInt(Y[ne]||ne,10),ne=domUtils.getComputedStyle(ae,'padding-left'),ee=parseInt(Y[ne]||ne,10),ne=domUtils.getComputedStyle(ae,'border-left-width'),te=parseInt(Y[ne]||ne,10),{tableBorder:Z,tdPadding:ee,tdBorder:te}},$.getUETable=function(z){var W=z.tagName.toLowerCase();return z='td'==W||'th'==W||'caption'==W?domUtils.findParentByTagName(z,'table',!0):z,z.ueTable||(z.ueTable=new $(z)),z.ueTable},$.cloneCell=function(z,W,Y){if(!z||utils.isString(z))return this.table.ownerDocument.createElement(z||'td');var Z=domUtils.hasClass(z,'selectTdClass');Z&&domUtils.removeClasses(z,'selectTdClass');var ee=z.cloneNode(!0);return W&&(ee.rowSpan=ee.colSpan=1),Y||domUtils.removeAttributes(ee,'width height'),Y||domUtils.removeAttributes(ee,'style'),ee.style.borderLeftStyle='',ee.style.borderTopStyle='',ee.style.borderLeftColor=z.style.borderRightColor,ee.style.borderLeftWidth=z.style.borderRightWidth,ee.style.borderTopColor=z.style.borderBottomColor,ee.style.borderTopWidth=z.style.borderBottomWidth,Z&&domUtils.addClass(z,'selectTdClass'),ee},$.prototype={getMaxRows:function(){for(var z=this.table.rows,W=1,Y=0,Z,ee;Z=z[Y];Y++){ee=1;for(var te=0,ne;ne=Z.cells[te++];)ee=_Mathmax(ne.rowSpan||1,ee);W=_Mathmax(ee+Y,W)}return W},getMaxCols:function(){for(var z=this.table.rows,W=0,Y={},Z=0,ee,te;ee=z[Z];Z++){te=0;for(var ne=0,ae;ae=ee.cells[ne++];)if(te+=ae.colSpan||1,ae.rowSpan&&1<ae.rowSpan)for(var oe=1;oe<ae.rowSpan;oe++)Y['row_'+(Z+oe)]?Y['row_'+(Z+oe)]++:Y['row_'+(Z+oe)]=ae.colSpan||1;te+=Y['row_'+Z]||0,W=_Mathmax(te,W)}return W},getCellColIndex:function(){},getHSideCell:function(z,W){try{var Y=this.getCellInfo(z),te=this.selectedTds.length,ne=this.cellsRange,Z,ee;return!W&&(te?!ne.beginColIndex:!Y.colIndex)||W&&(te?ne.endColIndex==this.colsNum-1:Y.colIndex==this.colsNum-1)?null:(Z=te?ne.beginRowIndex:Y.rowIndex,ee=W?te?ne.endColIndex+1:Y.colIndex+1:te?ne.beginColIndex-1:1>Y.colIndex?0:Y.colIndex-1,this.getCell(this.indexTable[Z][ee].rowIndex,this.indexTable[Z][ee].cellIndex))}catch(ae){o(ae)}},getTabNextCell:function(z,W){var Y=this.getCellInfo(z),Z=W||Y.rowIndex,ee=Y.colIndex+1+(Y.colSpan-1),te;try{te=this.getCell(this.indexTable[Z][ee].rowIndex,this.indexTable[Z][ee].cellIndex)}catch(ne){try{Z=1*Z+1,ee=0,te=this.getCell(this.indexTable[Z][ee].rowIndex,this.indexTable[Z][ee].cellIndex)}catch(ae){}}return te},getVSideCell:function(z,W,Y){try{var Z=this.getCellInfo(z),ne=this.selectedTds.length&&!Y,ae=this.cellsRange,ee,te;return!W&&0==Z.rowIndex||W&&(ne?ae.endRowIndex==this.rowsNum-1:Z.rowIndex+Z.rowSpan>this.rowsNum-1)?null:(ee=W?ne?ae.endRowIndex+1:Z.rowIndex+Z.rowSpan:ne?ae.beginRowIndex-1:Z.rowIndex-1,te=ne?ae.beginColIndex:Z.colIndex,this.getCell(this.indexTable[ee][te].rowIndex,this.indexTable[ee][te].cellIndex))}catch(oe){o(oe)}},getSameEndPosCells:function(z,W){try{for(var Y='x'===W.toLowerCase(),Z=domUtils.getXY(z)[Y?'x':'y']+z['offset'+(Y?'Width':'Height')],ee=this.table.rows,te=null,ne=[],ae=0;ae<this.rowsNum;ae++){te=ee[ae].cells;for(var oe=0,re,le;(re=te[oe++])&&(le=domUtils.getXY(re)[Y?'x':'y']+re['offset'+(Y?'Width':'Height')],!(le>Z&&Y))&&!((z==re||Z==le)&&(1==re[Y?'colSpan':'rowSpan']&&ne.push(re),Y)););}return ne}catch(se){o(se)}},setCellContent:function(z,W){z.innerHTML=W||(browser.ie?domUtils.fillChar:'<br />')},cloneCell:$.cloneCell,getSameStartPosXCells:function(z){try{for(var W=domUtils.getXY(z).x+z.offsetWidth,Y=this.table.rows,ee=[],te=0,Z;te<this.rowsNum;te++){Z=Y[te].cells;for(var ne=0,ae,oe;(ae=Z[ne++])&&(oe=domUtils.getXY(ae).x,!(oe>W));)if(oe==W&&1==ae.colSpan){ee.push(ae);break}}return ee}catch(re){o(re)}},update:function(z){this.table=z||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var W=this.table.rows,Y=this.getMaxRows(),Z=Y-W.length,ee=this.getMaxCols();Z--;)this.table.insertRow(W.length);this.rowsNum=Y,this.colsNum=ee;for(var te=0,ne=W.length;te<ne;te++)this.indexTable[te]=Array(ee);for(var ae=0,oe;oe=W[ae];ae++)for(var re=0,se=oe.cells,le;le=se[re];re++){le.rowSpan>Y&&(le.rowSpan=Y);for(var de=re,ce=le.rowSpan||1,ue=le.colSpan||1;this.indexTable[ae][de];)de++;for(var ge=0;ge<ce;ge++)for(var he=0;he<ue;he++)this.indexTable[ae+ge][de+he]={rowIndex:ae,cellIndex:re,colIndex:de,rowSpan:ce,colSpan:ue}}for(ge=0;ge<Y;ge++)for(he=0;he<ee;he++)void 0===this.indexTable[ge][he]&&(oe=W[ge],le=oe.cells[oe.cells.length-1],le=le?le.cloneNode(!0):this.table.ownerDocument.createElement('td'),this.setCellContent(le),1!==le.colSpan&&(le.colSpan=1),1!==le.rowSpan&&(le.rowSpan=1),oe.appendChild(le),this.indexTable[ge][he]={rowIndex:ge,cellIndex:le.cellIndex,colIndex:he,rowSpan:1,colSpan:1});var fe=domUtils.getElementsByTagName(this.table,'td'),ye=[];if(utils.each(fe,function(Ne){domUtils.hasClass(Ne,'selectTdClass')&&ye.push(Ne)}),ye.length){var be=ye[0],Ce=ye[ye.length-1],xe=this.getCellInfo(be),ve=this.getCellInfo(Ce);this.selectedTds=ye,this.cellsRange={beginRowIndex:xe.rowIndex,beginColIndex:xe.colIndex,endRowIndex:ve.rowIndex+ve.rowSpan-1,endColIndex:ve.colIndex+ve.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],'firstRow')){domUtils.addClass(this.table.rows[0],'firstRow');for(var te=1;te<this.table.rows.length;te++)domUtils.removeClasses(this.table.rows[te],'firstRow')}},getCellInfo:function(z){if(z)for(var W=z.cellIndex,Y=z.parentNode.rowIndex,Z=this.indexTable[Y],ee=this.colsNum,te=W,ne;te<ee;te++)if(ne=Z[te],ne.rowIndex===Y&&ne.cellIndex===W)return ne},getCell:function(z,W){return z<this.rowsNum&&this.table.rows[z].cells[W]||null},deleteCell:function(z,W){W='number'==typeof W?W:z.parentNode.rowIndex;var Y=this.table.rows[W];Y.deleteCell(z.cellIndex)},getCellsRange:function(z,W){function Y(le,se,de,ce){var ue=le,ge=se,he=de,fe=ce,ye,be,Ce;if(0<le)for(be=se;be<ce;be++)ye=Z.indexTable[le][be],Ce=ye.rowIndex,Ce<le&&(ue=_Mathmin(Ce,ue));if(ce<Z.colsNum)for(Ce=le;Ce<de;Ce++)ye=Z.indexTable[Ce][ce],be=ye.colIndex+ye.colSpan-1,be>ce&&(fe=_Mathmax(be,fe));if(de<Z.rowsNum)for(be=se;be<ce;be++)ye=Z.indexTable[de][be],Ce=ye.rowIndex+ye.rowSpan-1,Ce>de&&(he=_Mathmax(Ce,he));if(0<se)for(Ce=le;Ce<de;Ce++)ye=Z.indexTable[Ce][se],be=ye.colIndex,be<se&&(ge=_Mathmin(ye.colIndex,ge));return ue!=le||ge!=se||he!=de||fe!=ce?Y(ue,ge,he,fe):{beginRowIndex:le,beginColIndex:se,endRowIndex:de,endColIndex:ce}}try{var Z=this,ee=Z.getCellInfo(z);if(z===W)return{beginRowIndex:ee.rowIndex,beginColIndex:ee.colIndex,endRowIndex:ee.rowIndex+ee.rowSpan-1,endColIndex:ee.colIndex+ee.colSpan-1};var te=Z.getCellInfo(W),ne=_Mathmin(ee.rowIndex,te.rowIndex),ae=_Mathmin(ee.colIndex,te.colIndex),oe=_Mathmax(ee.rowIndex+ee.rowSpan-1,te.rowIndex+te.rowSpan-1),re=_Mathmax(ee.colIndex+ee.colSpan-1,te.colIndex+te.colSpan-1);return Y(ne,ae,oe,re)}catch(le){}},getCells:function(z){this.clearSelected();for(var W=z.beginRowIndex,Y=z.beginColIndex,Z=z.endRowIndex,ee=z.endColIndex,oe={},re=[],le=W,te,ne,ae;le<=Z;le++)for(var se=Y;se<=ee;se++){te=this.indexTable[le][se],ne=te.rowIndex,ae=te.colIndex;var de=ne+'|'+ae;if(!oe[de]){if(oe[de]=1,ne<le||ae<se||ne+te.rowSpan-1>Z||ae+te.colSpan-1>ee)return null;re.push(this.getCell(ne,te.cellIndex))}}return re},clearSelected:function(){$.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(z){var W=this.getCells(z);$.addSelectedClass(W),this.selectedTds=W,this.cellsRange=z},isFullRow:function(){var z=this.cellsRange;return z.endColIndex-z.beginColIndex+1==this.colsNum},isFullCol:function(){var z=this.cellsRange,W=this.table,Y=W.getElementsByTagName('th'),Z=z.endRowIndex-z.beginRowIndex+1;return Y.length?Z==this.rowsNum||Z==this.rowsNum-1:Z==this.rowsNum},getNextCell:function(z,W,Y){try{var Z=this.getCellInfo(z),ne=this.selectedTds.length&&!Y,ae=this.cellsRange,ee,te;return!W&&0==Z.rowIndex||W&&(ne?ae.endRowIndex==this.rowsNum-1:Z.rowIndex+Z.rowSpan>this.rowsNum-1)?null:(ee=W?ne?ae.endRowIndex+1:Z.rowIndex+Z.rowSpan:ne?ae.beginRowIndex-1:Z.rowIndex-1,te=ne?ae.beginColIndex:Z.colIndex,this.getCell(this.indexTable[ee][te].rowIndex,this.indexTable[ee][te].cellIndex))}catch(oe){o(oe)}},getPreviewCell:function(z,W){try{var Y=this.getCellInfo(z),te=this.selectedTds.length,ne=this.cellsRange,Z,ee;return!W&&(te?!ne.beginColIndex:!Y.colIndex)||W&&(te?ne.endColIndex==this.colsNum-1:Y.rowIndex>this.colsNum-1)?null:(Z=W?te?ne.beginRowIndex:1>Y.rowIndex?0:Y.rowIndex-1:te?ne.beginRowIndex:Y.rowIndex,ee=W?te?ne.endColIndex+1:Y.colIndex:te?ne.beginColIndex-1:1>Y.colIndex?0:Y.colIndex-1,this.getCell(this.indexTable[Z][ee].rowIndex,this.indexTable[Z][ee].cellIndex))}catch(ae){o(ae)}},moveContent:function(z,W){if(!$.isEmptyBlock(W)){if($.isEmptyBlock(z))return void(z.innerHTML=W.innerHTML);var Y=z.lastChild;for(3!=Y.nodeType&&dtd.$block[Y.tagName]||z.appendChild(z.ownerDocument.createElement('br'));Y=W.firstChild;)z.appendChild(Y)}},mergeRight:function(z){var W=this.getCellInfo(z),Y=W.colIndex+W.colSpan,Z=this.indexTable[W.rowIndex][Y],ee=this.getCell(Z.rowIndex,Z.cellIndex);z.colSpan=W.colSpan+Z.colSpan,z.removeAttribute('width'),this.moveContent(z,ee),this.deleteCell(ee,Z.rowIndex),this.update()},mergeDown:function(z){var W=this.getCellInfo(z),Y=W.rowIndex+W.rowSpan,Z=this.indexTable[Y][W.colIndex],ee=this.getCell(Z.rowIndex,Z.cellIndex);z.rowSpan=W.rowSpan+Z.rowSpan,z.removeAttribute('height'),this.moveContent(z,ee),this.deleteCell(ee,Z.rowIndex),this.update()},mergeRange:function(){var z=this.cellsRange,W=this.getCell(z.beginRowIndex,this.indexTable[z.beginRowIndex][z.beginColIndex].cellIndex);if('TH'==W.tagName&&z.endRowIndex!==z.beginRowIndex){var Y=this.indexTable,Z=this.getCellInfo(W);W=this.getCell(1,Y[1][Z.colIndex].cellIndex),z=this.getCellsRange(W,this.getCell(Y[this.rowsNum-1][Z.colIndex].rowIndex,Y[this.rowsNum-1][Z.colIndex].cellIndex))}for(var ee=this.getCells(z),te=0,ne;ne=ee[te++];)ne!==W&&(this.moveContent(W,ne),this.deleteCell(ne));if(W.rowSpan=z.endRowIndex-z.beginRowIndex+1,1<W.rowSpan&&W.removeAttribute('height'),W.colSpan=z.endColIndex-z.beginColIndex+1,1<W.colSpan&&W.removeAttribute('width'),W.rowSpan==this.rowsNum&&1!=W.colSpan&&(W.colSpan=1),W.colSpan==this.colsNum&&1!=W.rowSpan){var ae=W.parentNode.rowIndex;if(this.table.deleteRow)for(var te=ae+1,re=W.rowSpan;te<re;te++)this.table.deleteRow(ae+1);else for(var te=0,re=W.rowSpan-1,le;te<re;te++)le=this.table.rows[ae+1],le.parentNode.removeChild(le);W.rowSpan=1}this.update()},insertRow:function(z,W){function Y(de,ce,ue){if(0==de){var ge=ue.nextSibling||ue.previousSibling,he=ge.cells[de];'TH'==he.tagName&&(he=ce.ownerDocument.createElement('th'),he.appendChild(ce.firstChild),ue.insertBefore(he,ce),domUtils.remove(ce))}else if('TH'==ce.tagName){var fe=ce.ownerDocument.createElement('td');fe.appendChild(ce.firstChild),ue.insertBefore(fe,ce),domUtils.remove(ce)}}var Z=this.colsNum,ee=this.table,te=ee.insertRow(z),ae='string'==typeof W&&'TH'==W.toUpperCase(),ne;if(0==z||z==this.rowsNum)for(var oe=0;oe<Z;oe++)ne=this.cloneCell(W,!0),this.setCellContent(ne),ne.getAttribute('vAlign')&&ne.setAttribute('vAlign',ne.getAttribute('vAlign')),te.appendChild(ne),ae||Y(oe,ne,te);else{var re=this.indexTable[z];for(oe=0;oe<Z;oe++){var se=re[oe];se.rowIndex<z?(ne=this.getCell(se.rowIndex,se.cellIndex),ne.rowSpan=se.rowSpan+1):(ne=this.cloneCell(W,!0),this.setCellContent(ne),te.appendChild(ne)),ae||Y(oe,ne,te)}}return this.update(),te},deleteRow:function(z){for(var W=this.table.rows[z],Y=this.indexTable[z],Z=this.colsNum,ee=0,te=0;te<Z;){var ne=Y[te],ae=this.getCell(ne.rowIndex,ne.cellIndex);if(1<ae.rowSpan&&ne.rowIndex==z){var oe=ae.cloneNode(!0);oe.rowSpan=ae.rowSpan-1,oe.innerHTML='',ae.rowSpan=1;var re=z+1,le=this.table.rows[re],de=this.getPreviewMergedCellsNum(re,te)-ee,se;de<te?(se=te-de-1,domUtils.insertAfter(le.cells[se],oe)):le.cells.length&&le.insertBefore(oe,le.cells[0]),ee+=1}te+=ae.colSpan||1}var ce=[],ue={};for(te=0;te<Z;te++){var ge=Y[te].rowIndex,he=Y[te].cellIndex,fe=ge+'_'+he;ue[fe]||(ue[fe]=1,ae=this.getCell(ge,he),ce.push(ae))}var ye=[];utils.each(ce,function(be){1==be.rowSpan?be.parentNode.removeChild(be):ye.push(be)}),utils.each(ye,function(be){be.rowSpan--}),W.parentNode.removeChild(W),this.update()},insertCol:function(z,W,Y){function Z(de,ce,ue){if(0==de){var ge=ce.nextSibling||ce.previousSibling;'TH'==ge.tagName&&(ge=ce.ownerDocument.createElement('th'),ge.appendChild(ce.firstChild),ue.insertBefore(ge,ce),domUtils.remove(ce))}else if('TH'==ce.tagName){var he=ce.ownerDocument.createElement('td');he.appendChild(ce.firstChild),ue.insertBefore(he,ce),domUtils.remove(ce)}}var ee=this.rowsNum,te=0,oe=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),re='string'==typeof W&&'TH'==W.toUpperCase(),ne,ae,le;if(0==z||z==this.colsNum)for(;te<ee;te++)ne=this.table.rows[te],le=ne.cells[0==z?z:ne.cells.length],ae=this.cloneCell(W,!0),this.setCellContent(ae),ae.setAttribute('vAlign',ae.getAttribute('vAlign')),le&&ae.setAttribute('width',le.getAttribute('width')),z?domUtils.insertAfter(ne.cells[ne.cells.length-1],ae):ne.insertBefore(ae,ne.cells[0]),re||Z(te,ae,ne);else for(;te<ee;te++){var se=this.indexTable[te][z];se.colIndex<z?(ae=this.getCell(se.rowIndex,se.cellIndex),ae.colSpan=se.colSpan+1):(ne=this.table.rows[te],le=ne.cells[se.cellIndex],ae=this.cloneCell(W,!0),this.setCellContent(ae),ae.setAttribute('vAlign',ae.getAttribute('vAlign')),le&&ae.setAttribute('width',le.getAttribute('width')),le?ne.insertBefore(ae,le):ne.appendChild(ae)),re||Z(te,ae,ne)}this.update(),this.updateWidth(oe,Y||{tdPadding:10,tdBorder:1})},updateWidth:function(z,W){var Y=this.table,Z=$.getWidth(Y)-2*W.tdPadding-W.tdBorder+z;if(Z<Y.ownerDocument.body.offsetWidth)return void Y.setAttribute('width',Z);var ee=domUtils.getElementsByTagName(this.table,'td th');utils.each(ee,function(te){te.setAttribute('width',z)})},deleteCol:function(z){for(var W=this.indexTable,Y=this.table.rows,Z=this.table.getAttribute('width'),ee=0,te=this.rowsNum,ne={},ae=0;ae<te;){var oe=W[ae],re=oe[z],le=re.rowIndex+'_'+re.colIndex;if(!ne[le]){ne[le]=1;var se=this.getCell(re.rowIndex,re.cellIndex);ee||(ee=se&&parseInt(se.offsetWidth/se.colSpan,10).toFixed(0)),1<se.colSpan?se.colSpan--:Y[ae].deleteCell(re.cellIndex),ae+=re.rowSpan||1}}this.table.setAttribute('width',Z-ee),this.update()},splitToCells:function(z){var W=this,Y=this.splitToRows(z);utils.each(Y,function(Z){W.splitToCols(Z)})},splitToRows:function(z){var W=this.getCellInfo(z),Y=W.rowIndex,Z=W.colIndex,ee=[];z.rowSpan=1,ee.push(z);for(var te=Y,ne=Y+W.rowSpan;te<ne;te++)if(te!=Y){var ae=this.table.rows[te],oe=ae.insertCell(Z-this.getPreviewMergedCellsNum(te,Z));oe.colSpan=W.colSpan,this.setCellContent(oe),oe.setAttribute('vAlign',z.getAttribute('vAlign')),oe.setAttribute('align',z.getAttribute('align')),z.style.cssText&&(oe.style.cssText=z.style.cssText),ee.push(oe)}return this.update(),ee},getPreviewMergedCellsNum:function(z,W){for(var Y=this.indexTable[z],Z=0,ee=0;ee<W;){var te=Y[ee].colSpan,ne=Y[ee].rowIndex;Z+=te-(ne==z?1:0),ee+=te}return Z},splitToCols:function(z){var W=(z.offsetWidth/z.colSpan-22).toFixed(0),Y=this.getCellInfo(z),Z=Y.rowIndex,ee=Y.colIndex,te=[];z.colSpan=1,z.setAttribute('width',W),te.push(z);for(var ne=ee,ae=ee+Y.colSpan;ne<ae;ne++)if(ne!=ee){var oe=this.table.rows[Z],re=oe.insertCell(this.indexTable[Z][ne].cellIndex+1);if(re.rowSpan=Y.rowSpan,this.setCellContent(re),re.setAttribute('vAlign',z.getAttribute('vAlign')),re.setAttribute('align',z.getAttribute('align')),re.setAttribute('width',W),z.style.cssText&&(re.style.cssText=z.style.cssText),'TH'==z.tagName){var le=z.ownerDocument.createElement('th');le.appendChild(re.firstChild),le.setAttribute('vAlign',z.getAttribute('vAlign')),le.rowSpan=re.rowSpan,oe.insertBefore(le,re),domUtils.remove(re)}te.push(re)}return this.update(),te},isLastCell:function(z,W,Y){W=W||this.rowsNum,Y=Y||this.colsNum;var Z=this.getCellInfo(z);return Z.rowIndex+Z.rowSpan==W&&Z.colIndex+Z.colSpan==Y},getLastCell:function(z){z=z||this.table.getElementsByTagName('td');var W=this.getCellInfo(z[0]),Y=this,Z=z[0],ee=Z.parentNode,te=0,ne=0,ae;return utils.each(z,function(oe){oe.parentNode==ee&&(ne+=oe.colSpan||1),te+=oe.rowSpan*oe.colSpan||1}),ae=te/ne,utils.each(z,function(oe){if(Y.isLastCell(oe,ae,ne))return Z=oe,!1}),Z},selectRow:function(z){var W=this.indexTable[z],Y=this.getCell(W[0].rowIndex,W[0].cellIndex),Z=this.getCell(W[this.colsNum-1].rowIndex,W[this.colsNum-1].cellIndex),ee=this.getCellsRange(Y,Z);this.setSelected(ee)},selectTable:function(){var z=this.table.getElementsByTagName('td'),W=this.getCellsRange(z[0],z[z.length-1]);this.setSelected(W)},setBackground:function(z,W){if('string'==typeof W)utils.each(z,function(re){re.style.backgroundColor=W});else if('object'==typeof W){W=utils.extend({repeat:!0,colorList:['#ddd','#fff']},W);for(var Y=this.getCellInfo(z[0]).rowIndex,Z=0,ee=W.colorList,te=function(re,le,se){return re[le]?re[le]:se?re[le%re.length]:''},ne=0,ae,oe;ae=z[ne++];)oe=this.getCellInfo(ae),ae.style.backgroundColor=te(ee,Y+Z==oe.rowIndex?Z:++Z,W.repeat)}},removeBackground:function(z){utils.each(z,function(W){W.style.backgroundColor=''})}}}();(function(){function o(ne,ae){var oe=domUtils.getElementsByTagName(ne,'td th');utils.each(oe,function(le){le.removeAttribute('width')}),ne.setAttribute('width',$(ae,!0,ee(ae,ne)));var re=[];setTimeout(function(){utils.each(oe,function(le){1==le.colSpan&&re.push(le.offsetWidth)}),utils.each(oe,function(le,se){1==le.colSpan&&le.setAttribute('width',re[se]+'')})},0)}function $(ne,ae,oe){var re=ne.body;return re.offsetWidth-(ae?2*parseInt(domUtils.getComputedStyle(re,'margin-left'),10):0)-2*oe.tableBorder-(ne.options.offsetWidth||0)}function z(ne){var ae=Y(ne).cell;if(ae){var oe=te(ae);return oe.selectedTds.length?oe.selectedTds:[ae]}return[]}var W=UE.UETable,Y=function(ne){return W.getTableItemsByRange(ne)},Z=function(ne){return W.getUETableBySelected(ne)},ee=function(ne,ae){return W.getDefaultValue(ne,ae)},te=function(ne){return W.getUETable(ne)};UE.commands.inserttable={queryCommandState:function(){return Y(this).table?-1:0},execCommand:function(ne,ae){ae||(ae=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var re=this,le=this.selection.getRange(),se=le.startContainer,de=domUtils.findParent(se,function(he){return domUtils.isBlockElm(he)},!0)||re.body,ce=ee(re),ue=de.offsetWidth,ge=_Mathfloor(ue/ae.numCols-2*ce.tdPadding-ce.tdBorder);ae.tdvalign||(ae.tdvalign=re.options.tdvalign),re.execCommand('inserthtml',function(he,fe){for(var ye=[],be=he.numRows,Ce=he.numCols,xe=0;xe<be;xe++){ye.push('<tr'+(0==xe?' class="firstRow"':'')+'>');for(var ve=0;ve<Ce;ve++)ye.push('<td width="'+fe+'"  vAlign="'+he.tdvalign+'" >'+(browser.ie&&11>browser.version?domUtils.fillChar:'<br/>')+'</td>');ye.push('</tr>')}return'<table><tbody>'+ye.join('')+'</tbody></table>'}(ae,ge))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return Y(this).cell?0:-1},execCommand:function(){var ne=Y(this).table;if(ne){var ae=this.document.createElement('p');ae.innerHTML=browser.ie?'&nbsp;':'<br />',ne.parentNode.insertBefore(ae,ne),this.selection.getRange().setStart(ae,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var ne=this.selection.getRange();return domUtils.findParentByTagName(ne.startContainer,'table',!0)?0:-1},execCommand:function(ne,ae){var oe=this.selection.getRange();if(ae=ae||domUtils.findParentByTagName(oe.startContainer,'table',!0),ae){var re=ae.nextSibling;re||(re=domUtils.createElement(this.document,'p',{innerHTML:browser.ie?domUtils.fillChar:'<br/>'}),ae.parentNode.insertBefore(re,ae)),domUtils.remove(ae),oe=this.selection.getRange(),3==re.nodeType?oe.setStartBefore(re):oe.setStart(re,0),oe.setCursor(!1,!0),this.fireEvent('tablehasdeleted')}}},UE.commands.cellalign={queryCommandState:function(){return z(this).length?0:-1},execCommand:function(ne,ae){var oe=z(this);if(oe.length)for(var re=0,le;le=oe[re++];)le.setAttribute('align',ae)}},UE.commands.cellvalign={queryCommandState:function(){return z(this).length?0:-1},execCommand:function(ne,ae){var oe=z(this);if(oe.length)for(var re=0,le;le=oe[re++];)le.setAttribute('vAlign',ae)}},UE.commands.insertcaption={queryCommandState:function(){var ne=Y(this).table;return ne?0==ne.getElementsByTagName('caption').length?1:-1:-1},execCommand:function(){var ne=Y(this).table;if(ne){var ae=this.document.createElement('caption');ae.innerHTML=browser.ie?domUtils.fillChar:'<br/>',ne.insertBefore(ae,ne.firstChild);var oe=this.selection.getRange();oe.setStart(ae,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var ne=this.selection.getRange(),ae=domUtils.findParentByTagName(ne.startContainer,'table');return ae?0==ae.getElementsByTagName('caption').length?-1:1:-1},execCommand:function(){var ne=this.selection.getRange(),ae=domUtils.findParentByTagName(ne.startContainer,'table');if(ae){domUtils.remove(ae.getElementsByTagName('caption')[0]);var oe=this.selection.getRange();oe.setStart(ae.rows[0].cells[0],0).setCursor()}}},UE.commands.inserttitle={queryCommandState:function(){var ne=Y(this).table;if(ne){var ae=ne.rows[0];return'th'==ae.cells[ae.cells.length-1].tagName.toLowerCase()?-1:0}return-1},execCommand:function(){var ne=Y(this).table;ne&&te(ne).insertRow(0,'th');var ae=ne.getElementsByTagName('th')[0];this.selection.getRange().setStart(ae,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var ne=Y(this).table;if(ne){var ae=ne.rows[0];return'th'==ae.cells[ae.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var ne=Y(this).table;ne&&domUtils.remove(ne.rows[0]);var ae=ne.getElementsByTagName('td')[0];this.selection.getRange().setStart(ae,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var ne=Y(this).table;if(ne){var ae=ne.rows[ne.rows.length-1];return ae.getElementsByTagName('th').length?-1:0}return-1},execCommand:function(){var ae=Y(this).table;ae&&te(ae).insertCol(0,'th'),o(ae,this);var oe=ae.getElementsByTagName('th')[0];this.selection.getRange().setStart(oe,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var ne=Y(this).table;if(ne){var ae=ne.rows[ne.rows.length-1];return ae.getElementsByTagName('th').length?0:-1}return-1},execCommand:function(){var ne=Y(this).table;if(ne)for(var ae=0;ae<ne.rows.length;ae++)domUtils.remove(ne.rows[ae].children[0]);o(ne,this);var oe=ne.getElementsByTagName('td')[0];this.selection.getRange().setStart(oe,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(){var ae=Y(this),oe=ae.table,re=ae.cell;if(!oe||!re)return-1;var le=te(oe);if(le.selectedTds.length)return-1;var se=le.getCellInfo(re),de=se.colIndex+se.colSpan;if(de>=le.colsNum)return-1;var ce=le.indexTable[se.rowIndex][de],ue=oe.rows[ce.rowIndex].cells[ce.cellIndex];return ue&&re.tagName==ue.tagName?ce.rowIndex==se.rowIndex&&ce.rowSpan==se.rowSpan?0:-1:-1},execCommand:function(){var ae=this.selection.getRange(),oe=ae.createBookmark(!0),re=Y(this).cell,le=te(re);le.mergeRight(re),ae.moveToBookmark(oe).select()}},UE.commands.mergedown={queryCommandState:function(){var ae=Y(this),oe=ae.table,re=ae.cell;if(!oe||!re)return-1;var le=te(oe);if(le.selectedTds.length)return-1;var se=le.getCellInfo(re),de=se.rowIndex+se.rowSpan;if(de>=le.rowsNum)return-1;var ce=le.indexTable[de][se.colIndex],ue=oe.rows[ce.rowIndex].cells[ce.cellIndex];return ue&&re.tagName==ue.tagName?ce.colIndex==se.colIndex&&ce.colSpan==se.colSpan?0:-1:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this).cell,re=te(oe);re.mergeDown(oe),ne.moveToBookmark(ae).select()}},UE.commands.mergecells={queryCommandState:function(){return Z(this)?0:-1},execCommand:function(){var ne=Z(this);if(ne&&ne.selectedTds.length){var ae=ne.selectedTds[0];ne.mergeRange();var oe=this.selection.getRange();domUtils.isEmptyBlock(ae)?oe.setStart(ae,0).collapse(!0):oe.selectNodeContents(ae),oe.select()}}},UE.commands.insertrow={queryCommandState:function(){var ne=Y(this),ae=ne.cell;return ae&&('TD'==ae.tagName||'TH'==ae.tagName&&ne.tr!==ne.table.rows[0])&&te(ne.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this),re=oe.cell,le=oe.table,se=te(le),de=se.getCellInfo(re);if(!se.selectedTds.length)se.insertRow(de.rowIndex,re);else for(var ce=se.cellsRange,ue=0,ge=ce.endRowIndex-ce.beginRowIndex+1;ue<ge;ue++)se.insertRow(ce.beginRowIndex,re);ne.moveToBookmark(ae).select(),'enabled'===le.getAttribute('interlaced')&&this.fireEvent('interlacetable',le)}},UE.commands.insertrownext={queryCommandState:function(){var ne=Y(this),ae=ne.cell;return ae&&'TD'==ae.tagName&&te(ne.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this),re=oe.cell,le=oe.table,se=te(le),de=se.getCellInfo(re);if(!se.selectedTds.length)se.insertRow(de.rowIndex+de.rowSpan,re);else for(var ce=se.cellsRange,ue=0,ge=ce.endRowIndex-ce.beginRowIndex+1;ue<ge;ue++)se.insertRow(ce.endRowIndex+1,re);ne.moveToBookmark(ae).select(),'enabled'===le.getAttribute('interlaced')&&this.fireEvent('interlacetable',le)}},UE.commands.deleterow={queryCommandState:function(){var ne=Y(this);return ne.cell?0:-1},execCommand:function(){var ne=Y(this).cell,ae=te(ne),oe=ae.cellsRange,re=ae.getCellInfo(ne),le=ae.getVSideCell(ne),se=ae.getVSideCell(ne,!0),de=this.selection.getRange();if(utils.isEmptyObject(oe))ae.deleteRow(re.rowIndex);else for(var ce=oe.beginRowIndex;ce<oe.endRowIndex+1;ce++)ae.deleteRow(oe.beginRowIndex);var ue=ae.table;if(!ue.getElementsByTagName('td').length){var ge=ue.nextSibling;domUtils.remove(ue),ge&&de.setStart(ge,0).setCursor(!1,!0)}else if(1==re.rowSpan||re.rowSpan==oe.endRowIndex-oe.beginRowIndex+1)(se||le)&&de.selectNodeContents(se||le).setCursor(!1,!0);else{var he=ae.getCell(re.rowIndex,ae.indexTable[re.rowIndex][re.colIndex].cellIndex);he&&de.selectNodeContents(he).setCursor(!1,!0)}'enabled'===ue.getAttribute('interlaced')&&this.fireEvent('interlacetable',ue)}},UE.commands.insertcol={queryCommandState:function(){var ae=Y(this),oe=ae.cell;return oe&&('TD'==oe.tagName||'TH'==oe.tagName&&oe!==ae.tr.cells[0])&&te(ae.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(ne){var ae=this.selection.getRange(),oe=ae.createBookmark(!0);if(-1!=this.queryCommandState(ne)){var re=Y(this).cell,le=te(re),se=le.getCellInfo(re);if(!le.selectedTds.length)le.insertCol(se.colIndex,re);else for(var de=le.cellsRange,ce=0,ue=de.endColIndex-de.beginColIndex+1;ce<ue;ce++)le.insertCol(de.beginColIndex,re);ae.moveToBookmark(oe).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var ne=Y(this),ae=ne.cell;return ae&&te(ne.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this).cell,re=te(oe),le=re.getCellInfo(oe);if(!re.selectedTds.length)re.insertCol(le.colIndex+le.colSpan,oe);else for(var se=re.cellsRange,de=0,ce=se.endColIndex-se.beginColIndex+1;de<ce;de++)re.insertCol(se.endColIndex+1,oe);ne.moveToBookmark(ae).select()}},UE.commands.deletecol={queryCommandState:function(){var ne=Y(this);return ne.cell?0:-1},execCommand:function(){var ne=Y(this).cell,ae=te(ne),oe=ae.cellsRange,re=ae.getCellInfo(ne),le=ae.getHSideCell(ne),se=ae.getHSideCell(ne,!0);if(utils.isEmptyObject(oe))ae.deleteCol(re.colIndex);else for(var de=oe.beginColIndex;de<oe.endColIndex+1;de++)ae.deleteCol(oe.beginColIndex);var ce=ae.table,ue=this.selection.getRange();if(!ce.getElementsByTagName('td').length){var ge=ce.nextSibling;domUtils.remove(ce),ge&&ue.setStart(ge,0).setCursor(!1,!0)}else domUtils.inDoc(ne,this.document)?ue.setStart(ne,0).setCursor(!1,!0):se&&domUtils.inDoc(se,this.document)?ue.selectNodeContents(se).setCursor(!1,!0):le&&domUtils.inDoc(le,this.document)&&ue.selectNodeContents(le).setCursor(!0,!0)}},UE.commands.splittocells={queryCommandState:function(){var ne=Y(this),ae=ne.cell;if(!ae)return-1;var oe=te(ne.table);return 0<oe.selectedTds.length?-1:ae&&(1<ae.colSpan||1<ae.rowSpan)?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this).cell,re=te(oe);re.splitToCells(oe),ne.moveToBookmark(ae).select()}},UE.commands.splittorows={queryCommandState:function(){var ne=Y(this),ae=ne.cell;if(!ae)return-1;var oe=te(ne.table);return 0<oe.selectedTds.length?-1:ae&&1<ae.rowSpan?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this).cell,re=te(oe);re.splitToRows(oe),ne.moveToBookmark(ae).select()}},UE.commands.splittocols={queryCommandState:function(){var ne=Y(this),ae=ne.cell;if(!ae)return-1;var oe=te(ne.table);return 0<oe.selectedTds.length?-1:ae&&1<ae.colSpan?0:-1},execCommand:function(){var ne=this.selection.getRange(),ae=ne.createBookmark(!0),oe=Y(this).cell,re=te(oe);re.splitToCols(oe),ne.moveToBookmark(ae).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return Y(this).table?0:-1},execCommand:function(ne){var ae=Y(this),oe=ae.table;if(oe)if('adaptbywindow'==ne)o(oe,this);else{var re=domUtils.getElementsByTagName(oe,'td th');utils.each(re,function(le){le.removeAttribute('width')}),oe.removeAttribute('width')}}},UE.commands.averagedistributecol={queryCommandState:function(){var ne=Z(this);return ne?ne.isFullRow()||ne.isFullCol()?0:-1:-1},execCommand:function(){var re=this,le=Z(re);le&&le.selectedTds.length&&function(se){utils.each(domUtils.getElementsByTagName(le.table,'th'),function(ce){ce.setAttribute('width','')});var de=le.isFullRow()?domUtils.getElementsByTagName(le.table,'td'):le.selectedTds;utils.each(de,function(ce){1==ce.colSpan&&ce.setAttribute('width',se)})}(function(){var se=le.table,ce=0,ue=0,ge=ee(re,se),de;if(le.isFullRow())ce=se.offsetWidth,ue=le.colsNum;else for(var he=le.cellsRange.beginColIndex,fe=le.cellsRange.endColIndex,be=he,ye;be<=fe;)ye=le.selectedTds[be],ce+=ye.offsetWidth,be+=ye.colSpan,ue+=1;return de=_Mathceil(ce/ue)-2*ge.tdBorder-2*ge.tdPadding,de}())}},UE.commands.averagedistributerow={queryCommandState:function(){var ne=Z(this);return ne?ne.selectedTds&&/th/ig.test(ne.selectedTds[0].tagName)?-1:ne.isFullRow()||ne.isFullCol()?0:-1:-1},execCommand:function(){var re=this,le=Z(re);le&&le.selectedTds.length&&function(se){var de=le.isFullCol()?domUtils.getElementsByTagName(le.table,'td'):le.selectedTds;utils.each(de,function(ce){1==ce.rowSpan&&ce.setAttribute('height',se)})}(function(){var ce=0,ue=le.table,ge=ee(re,ue),he=parseInt(domUtils.getComputedStyle(ue.getElementsByTagName('td')[0],'padding-top')),se,de;if(le.isFullCol()){var fe=domUtils.getElementsByTagName(ue,'caption'),ye=domUtils.getElementsByTagName(ue,'th'),be,Ce;0<fe.length&&(be=fe[0].offsetHeight),0<ye.length&&(Ce=ye[0].offsetHeight),ce=ue.offsetHeight-(be||0)-(Ce||0),de=0==ye.length?le.rowsNum:le.rowsNum-1}else{for(var xe=le.cellsRange.beginRowIndex,ve=le.cellsRange.endRowIndex,Ne=0,we=domUtils.getElementsByTagName(ue,'tr'),Se=xe;Se<=ve;Se++)ce+=we[Se].offsetHeight,Ne+=1;de=Ne}return se=browser.ie&&9>browser.version?_Mathceil(ce/de):_Mathceil(ce/de)-2*ge.tdBorder-2*he,se}())}},UE.commands.cellalignment={queryCommandState:function(){return Y(this).table?0:-1},execCommand:function(ne,ae){var oe=this,re=Z(oe);if(!re){var le=oe.selection.getStart(),se=le&&domUtils.findParentByTagName(le,['td','th','caption'],!0);/caption/ig.test(se.tagName)?(se.style.textAlign=ae.align,se.style.verticalAlign=ae.vAlign):domUtils.setAttributes(se,ae),oe.selection.getRange().setCursor(!0)}else utils.each(re.selectedTds,function(de){domUtils.setAttributes(de,ae)})},queryCommandValue:function(){var ae=Y(this).cell;if(ae||(ae=z(this)[0]),!ae)return null;var oe=UE.UETable.getUETable(ae).selectedTds;return oe.length||(oe=ae),UE.UETable.getTableCellAlignState(oe)}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&8>browser.version?-1:Y(this).table?0:-1},execCommand:function(ne,ae){var oe=this,re=oe.selection.getStart(),le=re&&domUtils.findParentByTagName(re,['table'],!0);le&&le.setAttribute('align',ae)}},UE.commands.edittable={queryCommandState:function(){return Y(this).table?0:-1},execCommand:function(ne,ae){var oe=this.selection.getRange(),re=domUtils.findParentByTagName(oe.startContainer,'table');if(re){var le=domUtils.getElementsByTagName(re,'td').concat(domUtils.getElementsByTagName(re,'th'),domUtils.getElementsByTagName(re,'caption'));utils.each(le,function(se){se.style.borderColor=ae})}}},UE.commands.edittd={queryCommandState:function(){return Y(this).table?0:-1},execCommand:function(ne,ae){var oe=this,re=Z(oe);if(!re){var le=oe.selection.getStart(),se=le&&domUtils.findParentByTagName(le,['td','th','caption'],!0);se&&(se.style.backgroundColor=ae)}else utils.each(re.selectedTds,function(de){de.style.backgroundColor=ae})}},UE.commands.settablebackground={queryCommandState:function(){return 1<z(this).length?0:-1},execCommand:function(ne,ae){var oe,re;oe=z(this),re=te(oe[0]),re.setBackground(oe,ae)}},UE.commands.cleartablebackground={queryCommandState:function(){var ne=z(this);if(!ne.length)return-1;for(var ae=0,oe;oe=ne[ae++];)if(''!==oe.style.backgroundColor)return 0;return-1},execCommand:function(){var ne=z(this),ae=te(ne[0]);ae.removeBackground(ne)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(ne){var ae=Y(this).table;if(!ae)return-1;var oe=ae.getAttribute('interlaced');return'interlacetable'==ne?'enabled'===oe?-1:0:oe&&'disabled'!==oe?0:-1},execCommand:function(ne,ae){var oe=Y(this).table;'interlacetable'==ne?(oe.setAttribute('interlaced','enabled'),this.fireEvent('interlacetable',oe,ae)):(oe.setAttribute('interlaced','disabled'),this.fireEvent('uninterlacetable',oe))}},UE.commands.setbordervisible={queryCommandState:function(){var ae=Y(this).table;return ae?0:-1},execCommand:function(){var ne=Y(this).table;utils.each(domUtils.getElementsByTagName(ne,'td'),function(ae){ae.style.borderWidth='1px',ae.style.borderStyle='solid'})}}})(),UE.plugins.table=function(){function o(){}function $(Ct){z(Ct,'width',!0),z(Ct,'height',!0)}function z(Ct,xt,vt){Ct.style[xt]&&(vt&&Ct.setAttribute(xt,parseInt(Ct.style[xt],10)),Ct.style[xt]='')}function W(Ct){if('TD'==Ct.tagName||'TH'==Ct.tagName)return Ct;var xt;return(xt=domUtils.findParentByTagName(Ct,'td',!0)||domUtils.findParentByTagName(Ct,'th',!0))?xt:null}function Y(Ct){var xt=new RegExp(domUtils.fillChar,'g');if(0<Ct[browser.ie?'innerText':'textContent'].replace(/^\s*$/,'').replace(xt,'').length)return 0;for(var vt in dtd.$isNotEmpty)if(Ct.getElementsByTagName(vt).length)return 0;return 1}function Z(Ct){return Ct.pageX||Ct.pageY?{x:Ct.pageX,y:Ct.pageY}:{x:Ct.clientX+je.document.body.scrollLeft-je.document.body.clientLeft,y:Ct.clientY+je.document.body.scrollTop-je.document.body.clientTop}}function ee(Ct){if(!_e())try{var xt=W(Ct.target||Ct.srcElement),vt;if(Xe&&(je.body.style.webkitUserSelect='none',(_Mathabs(Je.x-Ct.clientX)>Ke||_Mathabs(Je.y-Ct.clientY)>Ke)&&(xe(),Xe=!1,Ge=0,Ne(Ct))),lt&&pt)return Ge=0,je.body.style.webkitUserSelect='none',je.selection.getNative()[browser.ie9below?'empty':'removeAllRanges'](),vt=Z(Ct),le(je,!0,lt,vt,xt),void('h'==lt?mt.style.left=oe(pt,Ct)+'px':'v'==lt&&(mt.style.top=re(pt,Ct)+'px'));if(xt){if(!0===je.fireEvent('excludetable',xt))return;vt=Z(Ct);var Nt=ue(xt,vt),St=domUtils.findParentByTagName(xt,'table',!0);if(ae(St,xt,Ct,!0)){if(!0===je.fireEvent('excludetable',St))return;je.body.style.cursor='url('+je.options.cursorpath+'h.png),pointer'}else if(ae(St,xt,Ct)){if(!0===je.fireEvent('excludetable',St))return;je.body.style.cursor='url('+je.options.cursorpath+'v.png),pointer'}else{je.body.style.cursor='text';/\d/.test(Nt)&&(Nt=Nt.replace(/\d/,''),xt=et(xt).getPreviewCell(xt,'v'==Nt)),le(je,!!xt&&!!Nt,xt?Nt:'',vt,xt)}}else te(!1,St,je)}catch(Et){o(Et)}}function te(Ct,xt,vt){if(!Ct){if(ct)return;setTimeout(function(){!ct&&dt&&dt.parentNode&&dt.parentNode.removeChild(dt)},2e3)}else ne(xt,vt)}function ne(Ct,xt){function vt(kt,_t){clearTimeout(Et),Et=setTimeout(function(){xt.fireEvent('tableClicked',Ct,_t)},300)}function Nt(){clearTimeout(Et);var _t=et(Ct),Bt=Ct.rows[0].cells[0],It=_t.getLastCell(),At=_t.getCellsRange(Bt,It);xt.selection.getRange().setStart(Bt,0).setCursor(!1,!0),_t.setSelected(At)}var St=domUtils.getXY(Ct),Tt=Ct.ownerDocument;if(dt&&dt.parentNode)return dt;dt=Tt.createElement('div'),dt.contentEditable=!1,dt.innerHTML='',dt.style.cssText='width:15px;height:15px;background-image:url('+xt.options.UEDITOR_HOME_URL+'dialogs/table/dragicon.png);position: absolute;cursor:move;top:'+(St.y-15)+'px;left:'+St.x+'px;',domUtils.unSelectable(dt),dt.onmouseover=function(){ct=!0},dt.onmouseout=function(){ct=!1},domUtils.on(dt,'click',function(kt,_t){vt(_t,this)}),domUtils.on(dt,'dblclick',function(kt,_t){Nt(_t)}),domUtils.on(dt,'dragstart',function(kt,_t){domUtils.preventDefault(_t)});var Et;Tt.body.appendChild(dt)}function ae(Ct,xt,vt,Nt){var St=Z(vt),Tt=ue(xt,St);if(Nt){var Et=Ct.getElementsByTagName('caption')[0],kt=Et?Et.offsetHeight:0;return'v1'==Tt&&8>St.y-domUtils.getXY(Ct).y-kt}return'h1'==Tt&&8>St.x-domUtils.getXY(Ct).x}function oe(Ct,xt){var vt=et(Ct);if(vt){var Nt=vt.getSameEndPosCells(Ct,'x')[0],St=vt.getSameStartPosXCells(Ct)[0],Tt=Z(xt).x,Et=(Nt?domUtils.getXY(Nt).x:domUtils.getXY(vt.table).x)+20,kt=St?domUtils.getXY(St).x+St.offsetWidth-20:je.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(je.body,'width'),10);return Et+=We,kt-=We,Tt<Et?Et:Tt>kt?kt:Tt}}function re(Ct,xt){try{var vt=domUtils.getXY(Ct).y,Nt=Z(xt).y;return Nt<vt?vt:Nt}catch(St){o(St)}}function le(Ct,xt,vt,Nt,St){try{Ct.body.style.cursor='h'==vt?'col-resize':'v'==vt?'row-resize':'text',browser.ie&&(!vt||gt||tt(Ct)?Me(Ct):(De(Ct,Ct.document),He(vt,St))),st=xt}catch(Tt){o(Tt)}}function ue(Ct,xt){var vt=domUtils.getXY(Ct);return vt?vt.x+Ct.offsetWidth-xt.x<Ye?'h':xt.x-vt.x<Ye?'h1':vt.y+Ct.offsetHeight-xt.y<Ye?'v':xt.y-vt.y<Ye?'v1':'':''}function ge(Ct,xt){if(!_e())if(Je={x:xt.clientX,y:xt.clientY},2==xt.button){var vt=tt(je),Nt=!1;if(vt){var St=qe(je,xt);utils.each(vt.selectedTds,function(Tt){Tt===St&&(Nt=!0)}),Nt?(St=vt.selectedTds[0],setTimeout(function(){je.selection.getRange().setStart(St,0).setCursor(!1,!0)},0)):(at(domUtils.getElementsByTagName(je.body,'th td')),vt.clearSelected())}}else ye(xt)}function fe(Ct){Ge=0,Ct=Ct||je.window.event;var xt=W(Ct.target||Ct.srcElement);if(xt){var vt;if(vt=ue(xt,Z(Ct))){if(Me(je),'h1'==vt)if(vt='h',ae(domUtils.findParentByTagName(xt,'table'),xt,Ct))je.execCommand('adaptbywindow');else if(xt=et(xt).getPreviewCell(xt),xt){var Nt=je.selection.getRange();Nt.selectNodeContents(xt).setCursor(!0,!0)}if('h'==vt){var St=et(xt),Tt=St.table,Et=Ie(xt,Tt,!0);Et=Ce(Et,'left'),St.width=St.offsetWidth;var kt=[],_t=[];utils.each(Et,function(Bt){kt.push(Bt.offsetWidth)}),utils.each(Et,function(Bt){Bt.removeAttribute('width')}),window.setTimeout(function(){var Bt=!0;utils.each(Et,function(At,Lt){var Rt=At.offsetWidth;return Rt>kt[Lt]?(Bt=!1,!1):void _t.push(Rt)});var It=Bt?_t:kt;utils.each(Et,function(At,Lt){At.width=It[Lt]-Pe()})},0)}}}}function ye(Ct){if(at(domUtils.getElementsByTagName(je.body,'td th')),utils.each(je.document.getElementsByTagName('table'),function(vt){vt.ueTable=null}),ot=qe(je,Ct),!!ot){var xt=domUtils.findParentByTagName(ot,'table',!0);ut=et(xt),ut&&ut.clearSelected(),st?be(Ct):(je.document.body.style.webkitUserSelect='',gt=!0,je.addListener('mouseover',Se))}}function be(Ct){browser.ie&&(Ct=ve(Ct)),xe(),Xe=!0,Ve=setTimeout(function(){Ne(Ct)},Qe)}function Ce(Ct,xt){for(var vt=[],Nt=null,St=0,Tt=Ct.length;St<Tt;St++)Nt=Ct[St][xt],Nt&&vt.push(Nt);return vt}function xe(){Ve&&clearTimeout(Ve),Ve=null}function ve(Ct){var xt=['pageX','pageY','clientX','clientY','srcElement','target'],vt={};if(Ct)for(var Nt=0,St,Tt;St=xt[Nt];Nt++)Tt=Ct[St],Tt&&(vt[St]=Tt);return vt}function Ne(Ct){if(Xe=!1,ot=Ct.target||Ct.srcElement,!!ot){var xt=ue(ot,Z(Ct));/\d/.test(xt)&&(xt=xt.replace(/\d/,''),ot=et(ot).getPreviewCell(ot,'v'==xt)),Me(je),De(je,je.document),je.fireEvent('saveScene'),He(xt,ot),gt=!0,lt=xt,pt=ot}}function we(Ct,xt){if(!_e()){if(xe(),Xe=!1,st&&(Ge=++Ge%3,Je={x:xt.clientX,y:xt.clientY},ze=setTimeout(function(){0<Ge&&Ge--},Qe),2==Ge))return Ge=0,void fe(xt);if(2!=xt.button){var vt=this,Nt=vt.selection.getRange(),St=domUtils.findParentByTagName(Nt.startContainer,'table',!0),Tt=domUtils.findParentByTagName(Nt.endContainer,'table',!0);if((St||Tt)&&(St===Tt?(St=domUtils.findParentByTagName(Nt.startContainer,['td','th','caption'],!0),Tt=domUtils.findParentByTagName(Nt.endContainer,['td','th','caption'],!0),St!==Tt&&vt.selection.clearRange()):vt.selection.clearRange()),gt=!1,vt.document.body.style.webkitUserSelect='',lt&&pt&&(vt.selection.getNative()[browser.ie9below?'empty':'removeAllRanges'](),Ge=0,mt=vt.document.getElementById('ue_tableDragLine'),mt)){var Et=domUtils.getXY(pt),kt=domUtils.getXY(mt);switch(lt){case'h':ke(pt,kt.x-Et.x);break;case'v':Be(pt,kt.y-Et.y-pt.offsetHeight);break;default:}return lt='',pt=null,Me(vt),void vt.fireEvent('saveScene')}if(!ot){var _t=domUtils.findParentByTagName(xt.target||xt.srcElement,'td',!0);if(_t||(_t=domUtils.findParentByTagName(xt.target||xt.srcElement,'th',!0)),_t&&('TD'==_t.tagName||'TH'==_t.tagName)){if(!0===vt.fireEvent('excludetable',_t))return;Nt=new dom.Range(vt.document),Nt.setStart(_t,0).setCursor(!1,!0)}}else{var Bt=et(ot),It=Bt?Bt.selectedTds[0]:null;if(It)Nt=new dom.Range(vt.document),domUtils.isEmptyBlock(It)?Nt.setStart(It,0).setCursor(!1,!0):Nt.selectNodeContents(It).shrinkBoundary().setCursor(!1,!0);else if(Nt=vt.selection.getRange().shrinkBoundary(),!Nt.collapsed){var St=domUtils.findParentByTagName(Nt.startContainer,['td','th'],!0),Tt=domUtils.findParentByTagName(Nt.endContainer,['td','th'],!0);(St&&!Tt||!St&&Tt||St&&Tt&&St!==Tt)&&Nt.setCursor(!1,!0)}ot=null,vt.removeListener('mouseover',Se)}vt._selectionChange(250,xt)}}}function Se(Ct,xt){if(!_e()){var vt=this,Nt=xt.target||xt.srcElement;if(rt=domUtils.findParentByTagName(Nt,'td',!0)||domUtils.findParentByTagName(Nt,'th',!0),ot&&rt&&('TD'==ot.tagName&&'TD'==rt.tagName||'TH'==ot.tagName&&'TH'==rt.tagName)&&domUtils.findParentByTagName(ot,'table')==domUtils.findParentByTagName(rt,'table')){var St=et(rt);if(ot!=rt){vt.document.body.style.webkitUserSelect='none',vt.selection.getNative()[browser.ie9below?'empty':'removeAllRanges']();var Tt=St.getCellsRange(ot,rt);St.setSelected(Tt)}else vt.document.body.style.webkitUserSelect='',St.clearSelected()}xt.preventDefault?xt.preventDefault():xt.returnValue=!1}}function Te(Ct,xt,vt){var Nt=parseInt(domUtils.getComputedStyle(Ct,'line-height'),10),St=vt+xt;xt=St<Nt?Nt:St,Ct.style.height&&(Ct.style.height=''),1==Ct.rowSpan?Ct.setAttribute('height',xt):Ct.removeAttribute&&Ct.removeAttribute('height')}function ke(Ct,xt){var vt=et(Ct);if(vt){var Nt=vt.table,St=Ie(Ct,Nt);if(Nt.style.width='',Nt.removeAttribute('width'),xt=Le(xt,Ct,St),Ct.nextSibling){utils.each(St,function(Et){Et.left.width=+Et.left.width+xt,Et.right&&(Et.right.width=+Et.right.width-xt)})}else utils.each(St,function(Et){Et.left.width-=-xt})}}function _e(){return'false'===je.body.contentEditable}function Be(Ct,xt){if(!(10>_Mathabs(xt))){var vt=et(Ct);if(vt)for(var Nt=vt.getSameEndPosCells(Ct,'y'),St=Nt[0]?Nt[0].offsetHeight:0,Tt=0,Et;Et=Nt[Tt++];)Te(Et,xt,St)}}function Ie(Ct,xt,vt){if(xt||(xt=domUtils.findParentByTagName(Ct,'table')),!xt)return null;for(var Nt=domUtils.getNodeIndex(Ct),St=Ct,Tt=xt.rows,Et=0;St;)1===St.nodeType&&(Et+=St.colSpan||1),St=St.previousSibling;St=null;var kt=[];return utils.each(Tt,function(_t){var Bt=_t.cells,It=0;utils.each(Bt,function(At){return(It+=At.colSpan||1,It===Et)?(kt.push({left:At,right:At.nextSibling||null}),!1):It>Et?(vt&&kt.push({left:At}),!1):void 0})}),kt}function Le(Ct,xt,vt){if(Ct-=Pe(),0>Ct)return 0;Ct-=Re(xt);var Nt=0>Ct?'left':'right';return Ct=_Mathabs(Ct),utils.each(vt,function(St){var Tt=St[Nt];Tt&&(Ct=_Mathmin(Ct,Re(Tt)-We))}),Ct=0>Ct?0:Ct,'left'==Nt?-Ct:Ct}function Re(Ct){var xt=0,xt=Ct.offsetWidth-Pe();Ct.nextSibling||(xt-=Oe(Ct)),xt=0>xt?0:xt;try{Ct.width=xt}catch(Nt){}return xt}function Oe(Ct){if(tab=domUtils.findParentByTagName(Ct,'table',!1),void 0===tab.offsetVal){var xt=Ct.previousSibling;tab.offsetVal=xt?Ct.offsetWidth-xt.offsetWidth===Ze.borderWidth?Ze.borderWidth:0:0}return tab.offsetVal}function Pe(){if(void 0===Ze.tabcellSpace){var xt=je.document.createElement('table'),vt=je.document.createElement('tbody'),Nt=je.document.createElement('tr'),St=je.document.createElement('td'),Tt=null;St.style.cssText='border: 0;',St.width=1,Nt.appendChild(St),Nt.appendChild(Tt=St.cloneNode(!1)),vt.appendChild(Nt),xt.appendChild(vt),xt.style.cssText='visibility: hidden;',je.body.appendChild(xt),Ze.paddingSpace=St.offsetWidth-1;var Et=xt.offsetWidth;St.style.cssText='',Tt.style.cssText='',Ze.borderWidth=(xt.offsetWidth-Et)/3,Ze.tabcellSpace=Ze.paddingSpace+Ze.borderWidth,je.body.removeChild(xt)}return Pe=function(){return Ze.tabcellSpace},Ze.tabcellSpace}function De(Ct){gt||(mt=Ct.document.createElement('div'),domUtils.setAttributes(mt,{id:'ue_tableDragLine',unselectable:'on',contenteditable:!1,onresizestart:'return false',ondragstart:'return false',onselectstart:'return false',style:'background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)'}),Ct.body.appendChild(mt))}function Me(Ct){if(!gt)for(var xt;xt=Ct.document.getElementById('ue_tableDragLine');)domUtils.remove(xt)}function He(Ct,xt){if(xt){var vt=domUtils.findParentByTagName(xt,'table'),Nt=vt.getElementsByTagName('caption'),St=vt.offsetWidth,Tt=vt.offsetHeight-(0<Nt.length?Nt[0].offsetHeight:0),Et=domUtils.getXY(vt),kt=domUtils.getXY(xt),_t;switch(Ct){case'h':_t='height:'+Tt+'px;top:'+(Et.y+(0<Nt.length?Nt[0].offsetHeight:0))+'px;left:'+(kt.x+xt.offsetWidth),mt.style.cssText=_t+'px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)';break;case'v':_t='width:'+St+'px;left:'+Et.x+'px;top:'+(kt.y+xt.offsetHeight),mt.style.cssText=_t+'px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)';break;default:}}}function Fe(Ct,xt){for(var vt=domUtils.getElementsByTagName(Ct.body,'table'),St=0,Nt,Tt,Et;Tt=vt[St++];)Et=domUtils.getElementsByTagName(Tt,'td'),Et[0]&&(xt?(Nt=Et[0].style.borderColor.replace(/\s/g,''),/(#ffffff)|(rgb\(255,255,255\))/ig.test(Nt)&&domUtils.addClass(Tt,'noBorderTable')):domUtils.removeClasses(Tt,'noBorderTable'))}function Ue(Ct,xt,vt){var Nt=Ct.body;return Nt.offsetWidth-(xt?2*parseInt(domUtils.getComputedStyle(Nt,'margin-left'),10):0)-2*vt.tableBorder-(Ct.options.offsetWidth||0)}function qe(Ct,xt){var vt=domUtils.findParentByTagName(xt.target||xt.srcElement,['td','th'],!0),Nt=null;if(!vt)return null;if(Nt=ue(vt,Z(xt)),!vt)return null;if('h1'===Nt&&vt.previousSibling){var St=domUtils.getXY(vt),Tt=vt.offsetWidth;_Mathabs(St.x+Tt-xt.clientX)>Tt/3&&(vt=vt.previousSibling)}else if('v1'===Nt&&vt.parentNode.previousSibling){var St=domUtils.getXY(vt),Et=vt.offsetHeight;_Mathabs(St.y+Et-xt.clientY)>Et/3&&(vt=vt.parentNode.previousSibling.firstChild)}return vt&&!0!==Ct.fireEvent('excludetable',vt)?vt:null}var je=this,$e=null,Ve=null,ze=null,We=5,Xe=!1,Ye=5,Ke=10,Ge=0,Je=null,Qe=360,Ze=UE.UETable,et=function(Ct){return Ze.getUETable(Ct)},tt=function(Ct){return Ze.getUETableBySelected(Ct)},nt=function(Ct,xt){return Ze.getDefaultValue(Ct,xt)},at=function(Ct){return Ze.removeSelectedClass(Ct)};je.ready(function(){var Ct=this,xt=Ct.selection.getText;Ct.selection.getText=function(){var vt=tt(Ct);if(vt){var Nt='';return utils.each(vt.selectedTds,function(St){Nt+=St[browser.ie?'innerText':'textContent']}),Nt}return xt.call(Ct.selection)}});var ot=null,rt=null,lt='',st=!1,dt=null,ct=!1,mt=null,pt=null,gt=!1,ft=!0;je.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:'top',cursorpath:je.options.UEDITOR_HOME_URL+'themes/default/images/cursor_',tableDragable:!1,classList:['ue-table-interlace-color-single','ue-table-interlace-color-double']}),je.getUETable=et;var yt={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};je.ready(function(){utils.cssRule('table','.selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}',je.document);var Ct,xt,vt;je.addListener('keydown',function(Et,kt){var _t=this,Bt=kt.keyCode||kt.which;if(8==Bt){var It=tt(_t);It&&It.selectedTds.length&&(It.isFullCol()?_t.execCommand('deletecol'):It.isFullRow()?_t.execCommand('deleterow'):_t.fireEvent('delcells'),domUtils.preventDefault(kt));var At=domUtils.findParentByTagName(_t.selection.getStart(),'caption',!0),Lt=_t.selection.getRange();if(Lt.collapsed&&At&&Y(At)){_t.fireEvent('saveScene');var Rt=At.parentNode;domUtils.remove(At),Rt&&Lt.setStart(Rt.rows[0].cells[0],0).setCursor(!1,!0),_t.fireEvent('saveScene')}}if(46==Bt&&(It=tt(_t),It)){_t.fireEvent('saveScene');for(var Ot=0,Pt;Pt=It.selectedTds[Ot++];)domUtils.fillNode(_t.document,Pt);_t.fireEvent('saveScene'),domUtils.preventDefault(kt)}if(13==Bt){var Dt=_t.selection.getRange(),At=domUtils.findParentByTagName(Dt.startContainer,'caption',!0);if(At){var Rt=domUtils.findParentByTagName(At,'table');return Dt.collapsed?At&&Dt.setStart(Rt.rows[0].cells[0],0).setCursor(!1,!0):(Dt.deleteContents(),_t.fireEvent('saveScene')),void domUtils.preventDefault(kt)}if(Dt.collapsed){var Rt=domUtils.findParentByTagName(Dt.startContainer,'table');if(Rt){var Mt=Rt.rows[0].cells[0],Ht=domUtils.findParentByTagName(_t.selection.getStart(),['td','th'],!0),Ft=Rt.previousSibling;if(Mt===Ht&&(!Ft||1==Ft.nodeType&&'TABLE'==Ft.tagName)&&domUtils.isStartInblock(Dt)){var Ut=domUtils.findParent(_t.selection.getStart(),function(jt){return domUtils.isBlockElm(jt)},!0);Ut&&(/t(h|d)/i.test(Ut.tagName)||Ut===Ht.firstChild)&&(_t.execCommand('insertparagraphbeforetable'),domUtils.preventDefault(kt))}}}}if((kt.ctrlKey||kt.metaKey)&&'67'==kt.keyCode){Ct=null;var It=tt(_t);if(It){var qt=It.selectedTds;xt=It.isFullCol(),vt=It.isFullRow(),Ct=[[It.cloneCell(qt[0],null,!0)]];for(var Ot=1,Pt;Pt=qt[Ot];Ot++)Pt.parentNode===qt[Ot-1].parentNode?Ct[Ct.length-1].push(It.cloneCell(Pt,null,!0)):Ct.push([It.cloneCell(Pt,null,!0)])}}}),je.addListener('tablehasdeleted',function(){le(this,!1,'',null),dt&&domUtils.remove(dt)}),je.addListener('beforepaste',function(Et,kt){var _t=this,Bt=_t.selection.getRange();if(domUtils.findParentByTagName(Bt.startContainer,'caption',!0)){var It=_t.document.createElement('div');return It.innerHTML=kt.html,void(kt.html=It[browser.ie9below?'innerText':'textContent'])}var At=tt(_t);if(Ct){_t.fireEvent('saveScene');var Bt=_t.selection.getRange(),Lt=domUtils.findParentByTagName(Bt.startContainer,['td','th'],!0),Rt,Ot;if(Lt){var Pt=et(Lt);if(vt){var Dt=Pt.getCellInfo(Lt).rowIndex;'TH'==Lt.tagName&&Dt++;for(var Mt=0,Ht,Ft;Ht=Ct[Mt++];){Ft=Pt.insertRow(Dt++,'td');for(var Ut=0,qt,jt;qt=Ht[Ut];Ut++)jt=Ft.cells[Ut],jt||(jt=Ft.insertCell(Ut)),jt.innerHTML=qt.innerHTML,qt.getAttribute('width')&&jt.setAttribute('width',qt.getAttribute('width')),qt.getAttribute('vAlign')&&jt.setAttribute('vAlign',qt.getAttribute('vAlign')),qt.getAttribute('align')&&jt.setAttribute('align',qt.getAttribute('align')),qt.style.cssText&&(jt.style.cssText=qt.style.cssText);for(var Ut=0,qt;(qt=Ft.cells[Ut])&&!!Ht[Ut];Ut++)qt.innerHTML=Ht[Ut].innerHTML,Ht[Ut].getAttribute('width')&&qt.setAttribute('width',Ht[Ut].getAttribute('width')),Ht[Ut].getAttribute('vAlign')&&qt.setAttribute('vAlign',Ht[Ut].getAttribute('vAlign')),Ht[Ut].getAttribute('align')&&qt.setAttribute('align',Ht[Ut].getAttribute('align')),Ht[Ut].style.cssText&&(qt.style.cssText=Ht[Ut].style.cssText)}}else{if(xt){zt=Pt.getCellInfo(Lt);for(var $t=0,Ut=0,Ht=Ct[0],qt;qt=Ht[Ut++];)$t+=qt.colSpan||1;for(_t.__hasEnterExecCommand=!0,Mt=0;Mt<$t;Mt++)_t.execCommand('insertcol');_t.__hasEnterExecCommand=!1,Lt=Pt.table.rows[0].cells[zt.cellIndex],'TH'==Lt.tagName&&(Lt=Pt.table.rows[1].cells[zt.cellIndex])}for(var Mt=0,Ht;Ht=Ct[Mt++];){Rt=Lt;for(var Ut=0,qt;qt=Ht[Ut++];)if(Lt)Lt.innerHTML=qt.innerHTML,qt.getAttribute('width')&&Lt.setAttribute('width',qt.getAttribute('width')),qt.getAttribute('vAlign')&&Lt.setAttribute('vAlign',qt.getAttribute('vAlign')),qt.getAttribute('align')&&Lt.setAttribute('align',qt.getAttribute('align')),qt.style.cssText&&(Lt.style.cssText=qt.style.cssText),Ot=Lt,Lt=Lt.nextSibling;else{var Vt=qt.cloneNode(!0);domUtils.removeAttributes(Vt,['class','rowSpan','colSpan']),Ot.parentNode.appendChild(Vt)}if(Lt=Pt.getNextCell(Rt,!0,!0),!Ct[Mt])break;if(!Lt){var zt=Pt.getCellInfo(Rt);Pt.table.insertRow(Pt.table.rows.length),Pt.update(),Lt=Pt.getVSideCell(Rt,!0)}}}Pt.update()}else{At=_t.document.createElement('table');for(var Mt=0,Ht,Ft;Ht=Ct[Mt++];){Ft=At.insertRow(At.rows.length);for(var Ut=0,qt;qt=Ht[Ut++];)Vt=Ze.cloneCell(qt,null,!0),domUtils.removeAttributes(Vt,['class']),Ft.appendChild(Vt);2==Ut&&1<Vt.rowSpan&&(Vt.rowSpan=1)}var Wt=nt(_t),Xt=_t.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(_t.body,'margin-left'),10)-2*Wt.tableBorder-(_t.options.offsetWidth||0);_t.execCommand('insertHTML','<table  '+(xt&&vt?'width="'+Xt+'"':'')+'>'+At.innerHTML.replace(/>\s*</g,'><').replace(/\bth\b/gi,'td')+'</table>')}return _t.fireEvent('contentchange'),_t.fireEvent('saveScene'),kt.html='',!0}var It=_t.document.createElement('div'),Yt;It.innerHTML=kt.html,Yt=It.getElementsByTagName('table'),domUtils.findParentByTagName(_t.selection.getStart(),'table')?(utils.each(Yt,function(Kt){domUtils.remove(Kt)}),domUtils.findParentByTagName(_t.selection.getStart(),'caption',!0)&&(It.innerHTML=It[browser.ie?'innerText':'textContent'])):utils.each(Yt,function(Kt){$(Kt,!0),domUtils.removeAttributes(Kt,['style','border']),utils.each(domUtils.getElementsByTagName(Kt,'td'),function(Gt){Y(Gt)&&domUtils.fillNode(_t.document,Gt),$(Gt,!0)})}),kt.html=It.innerHTML}),je.addListener('afterpaste',function(){utils.each(domUtils.getElementsByTagName(je.body,'table'),function(Et){if(Et.offsetWidth>je.body.offsetWidth){var kt=nt(je,Et);Et.style.width=je.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(je.body,'margin-left'),10)-2*kt.tableBorder-(je.options.offsetWidth||0)+'px'}})}),je.addListener('blur',function(){Ct=null});var Nt;je.addListener('keydown',function(){clearTimeout(Nt),Nt=setTimeout(function(){var Et=je.selection.getRange(),kt=domUtils.findParentByTagName(Et.startContainer,['th','td'],!0);if(kt){var _t=kt.parentNode.parentNode.parentNode;_t.offsetWidth>_t.getAttribute('width')&&(kt.style.wordBreak='break-all')}},100)}),je.addListener('selectionchange',function(){le(je,!1,'',null)}),je.addListener('contentchange',function(){var Et=this;if(Me(Et),!tt(Et)){var kt=Et.selection.getRange(),_t=kt.startContainer;_t=domUtils.findParentByTagName(_t,['td','th'],!0),utils.each(domUtils.getElementsByTagName(Et.document,'table'),function(Bt){!0===Et.fireEvent('excludetable',Bt)||(Bt.ueTable=new Ze(Bt),Bt.onmouseover=function(){Et.fireEvent('tablemouseover',Bt)},Bt.onmousemove=function(){Et.fireEvent('tablemousemove',Bt),Et.options.tableDragable&&te(!0,this,Et),utils.defer(function(){Et.fireEvent('contentchange',50)},!0)},Bt.onmouseout=function(){Et.fireEvent('tablemouseout',Bt),le(Et,!1,'',null),Me(Et)},Bt.onclick=function(It){It=Et.window.event||It;var At=W(It.target||It.srcElement);if(At){var Lt=et(At),Rt=Lt.table,Ot=Lt.getCellInfo(At),Dt=Et.selection.getRange(),Pt;if(ae(Rt,At,It,!0)){var Mt=Lt.getCell(Lt.indexTable[Lt.rowsNum-1][Ot.colIndex].rowIndex,Lt.indexTable[Lt.rowsNum-1][Ot.colIndex].cellIndex);return void(It.shiftKey&&Lt.selectedTds.length?Lt.selectedTds[0]===Mt?Dt&&Dt.selectNodeContents(Mt).select():(Pt=Lt.getCellsRange(Lt.selectedTds[0],Mt),Lt.setSelected(Pt)):At===Mt?Dt&&Dt.selectNodeContents(Mt).select():(Pt=Lt.getCellsRange(At,Mt),Lt.setSelected(Pt)))}if(ae(Rt,At,It)){var Ht=Lt.getCell(Lt.indexTable[Ot.rowIndex][Lt.colsNum-1].rowIndex,Lt.indexTable[Ot.rowIndex][Lt.colsNum-1].cellIndex);It.shiftKey&&Lt.selectedTds.length?Lt.selectedTds[0]===Ht?Dt&&Dt.selectNodeContents(Ht).select():(Pt=Lt.getCellsRange(Lt.selectedTds[0],Ht),Lt.setSelected(Pt)):At===Ht?Dt&&Dt.selectNodeContents(Ht).select():(Pt=Lt.getCellsRange(At,Ht),Lt.setSelected(Pt))}}})}),Fe(Et,!0)}}),domUtils.on(je.document,'mousemove',ee),domUtils.on(je.document,'mouseout',function(Et){var kt=Et.target||Et.srcElement;'TABLE'==kt.tagName&&le(je,!1,'',null)}),je.addListener('interlacetable',function(Et,kt,_t){if(kt)for(var Bt=this,It=kt.rows,At=It.length,Lt=function(Ot,Pt,Dt){return Ot[Pt]?Ot[Pt]:Dt?Ot[Pt%Ot.length]:''},Rt=0;Rt<At;Rt++)It[Rt].className=Lt(_t||Bt.options.classList,Rt,!0)}),je.addListener('uninterlacetable',function(Et,kt){if(kt)for(var _t=this,Bt=kt.rows,It=_t.options.classList,At=Bt.length,Lt=0;Lt<At;Lt++)domUtils.removeClasses(Bt[Lt],It)}),je.addListener('mousedown',ge),je.addListener('mouseup',we),domUtils.on(je.body,'dragstart',function(Et){we.call(je,'dragstart',Et)}),je.addOutputRule(function(Et){utils.each(Et.getNodesByTagName('div'),function(kt){'ue_tableDragLine'==kt.getAttr('id')&&kt.parentNode.removeChild(kt)})});var St=0;je.addListener('mousedown',function(){St=0}),je.addListener('tabkeydown',function(){var Et=this.selection.getRange(),kt=Et.getCommonAncestor(!0,!0),_t=domUtils.findParentByTagName(kt,'table');if(_t){if(domUtils.findParentByTagName(kt,'caption',!0)){var Bt=domUtils.getElementsByTagName(_t,'th td');Bt&&Bt.length&&Et.setStart(Bt[0],0).setCursor(!1,!0)}else{var Bt=domUtils.findParentByTagName(kt,['td','th'],!0),It=et(Bt);St=1<Bt.rowSpan?St:It.getCellInfo(Bt).rowIndex;var At=It.getTabNextCell(Bt,St);At?Y(At)?Et.setStart(At,0).setCursor(!1,!0):Et.selectNodeContents(At).select():(je.fireEvent('saveScene'),je.__hasEnterExecCommand=!0,this.execCommand('insertrownext'),je.__hasEnterExecCommand=!1,Et=this.selection.getRange(),Et.setStart(_t.rows[_t.rows.length-1].cells[0],0).setCursor(),je.fireEvent('saveScene'))}return!0}}),browser.ie&&je.addListener('selectionchange',function(){le(this,!1,'',null)}),je.addListener('keydown',function(Et,kt){var _t=this,Bt=kt.keyCode||kt.which;if(8!=Bt&&46!=Bt){var It=!kt.ctrlKey&&!kt.metaKey&&!kt.shiftKey&&!kt.altKey;It&&at(domUtils.getElementsByTagName(_t.body,'td'));var At=tt(_t);!At||It&&At.clearSelected()}}),je.addListener('beforegetcontent',function(){Fe(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName('caption'),function(Et){domUtils.isEmptyNode(Et)&&(Et.innerHTML='&nbsp;')})}),je.addListener('aftergetcontent',function(){Fe(this,!0)}),je.addListener('getAllHtml',function(){at(je.document.getElementsByTagName('td'))}),je.addListener('fullscreenchanged',function(Et,kt){if(!kt){var _t=this.body.offsetWidth/document.body.offsetWidth,Bt=domUtils.getElementsByTagName(this.body,'table');utils.each(Bt,function(It){if(It.offsetWidth<je.body.offsetWidth)return!1;var At=domUtils.getElementsByTagName(It,'td'),Lt=[];utils.each(At,function(Pt){Lt.push(Pt.offsetWidth)});for(var Rt=0,Ot;Ot=At[Rt];Rt++)Ot.setAttribute('width',_Mathfloor(Lt[Rt]*_t));It.setAttribute('width',_Mathfloor(Ue(je,ft,nt(je))))})}});var Tt=je.execCommand;je.execCommand=function(Et){var _t=this,Bt=arguments;Et=Et.toLowerCase();var It=tt(_t),Lt=new dom.Range(_t.document),Rt=_t.commands[Et]||UE.commands[Et],At,Ot;if(Rt){if(It&&!yt[Et]&&!Rt.notNeedUndo&&!_t.__hasEnterExecCommand){_t.__hasEnterExecCommand=!0,_t.fireEvent('beforeexeccommand',Et),At=It.selectedTds;for(var Pt=-2,Dt=-2,Ft=0,Mt,Ht,Ut;Ut=At[Ft];Ft++)Y(Ut)?Lt.setStart(Ut,0).setCursor(!1,!0):Lt.selectNode(Ut).select(!0),Ht=_t.queryCommandState(Et),Mt=_t.queryCommandValue(Et),-1!=Ht&&((Pt!==Ht||Dt!==Mt)&&(_t._ignoreContentChange=!0,Ot=Tt.apply(_t,arguments),_t._ignoreContentChange=!1),Pt=_t.queryCommandState(Et),Dt=_t.queryCommandValue(Et),domUtils.isEmptyBlock(Ut)&&domUtils.fillNode(_t.document,Ut));Lt.setStart(At[0],0).shrinkBoundary(!0).setCursor(!1,!0),_t.fireEvent('contentchange'),_t.fireEvent('afterexeccommand',Et),_t.__hasEnterExecCommand=!1,_t._selectionChange()}else Ot=Tt.apply(_t,arguments);return Ot}}})},UE.UETable.prototype.sortTable=function(o,$){var z=this.table,W=z.rows,Y=[],Z='TH'===W[0].cells[0].tagName,ee=0;if(this.selectedTds.length){for(var te=this.cellsRange,ne=te.endRowIndex+1,ae=te.beginRowIndex;ae<ne;ae++)Y[ae]=W[ae];Y.splice(0,te.beginRowIndex),ee=te.endRowIndex+1===this.rowsNum?0:te.endRowIndex+1}else for(var ae=0,ne=W.length;ae<ne;ae++)Y[ae]=W[ae];var oe={reversecurrent:function(){return 1},orderbyasc:function(de,ce){var ue=de.innerText||de.textContent,ge=ce.innerText||ce.textContent;return ue.localeCompare(ge)},reversebyasc:function(de,ce){var ue=de.innerHTML,ge=ce.innerHTML;return ge.localeCompare(ue)},orderbynum:function(de,ce){var ue=de[browser.ie?'innerText':'textContent'].match(/\d+/),ge=ce[browser.ie?'innerText':'textContent'].match(/\d+/);return ue&&(ue=+ue[0]),ge&&(ge=+ge[0]),(ue||0)-(ge||0)},reversebynum:function(de,ce){var ue=de[browser.ie?'innerText':'textContent'].match(/\d+/),ge=ce[browser.ie?'innerText':'textContent'].match(/\d+/);return ue&&(ue=+ue[0]),ge&&(ge=+ge[0]),(ge||0)-(ue||0)}};z.setAttribute('data-sort-type',$&&'string'==typeof $&&oe[$]?$:''),Z&&Y.splice(0,1),Y=utils.sort(Y,function(de,ce){var ue;return ue=$&&'function'==typeof $?$.call(this,de.cells[o],ce.cells[o]):$&&'number'==typeof $?1:$&&'string'==typeof $&&oe[$]?oe[$].call(this,de.cells[o],ce.cells[o]):oe.orderbyasc.call(this,de.cells[o],ce.cells[o]),ue});for(var re=z.ownerDocument.createDocumentFragment(),le=0,ne=Y.length;le<ne;le++)re.appendChild(Y[le]);var se=z.getElementsByTagName('tbody')[0];ee?se.insertBefore(re,W[ee-te.endRowIndex+te.beginRowIndex-1]):se.appendChild(re)},UE.plugins.tablesort=function(){var o=this,$=UE.UETable,z=function(Y){return $.getUETable(Y)},W=function(Y){return $.getTableItemsByRange(Y)};o.ready(function(){utils.cssRule('tablesort','table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url('+o.options.themePath+o.options.theme+'/images/sortable.png);}',o.document),o.addListener('afterexeccommand',function(Y,Z){('mergeright'==Z||'mergedown'==Z||'mergecells'==Z)&&this.execCommand('disablesort')})}),UE.commands.sorttable={queryCommandState:function(){var Y=this,Z=W(Y);if(!Z.cell)return-1;for(var ee=Z.table,te=ee.getElementsByTagName('td'),ne=0,ae;ae=te[ne++];)if(1!=ae.rowSpan||1!=ae.colSpan)return-1;return 0},execCommand:function(Y,Z){var ee=this,te=ee.selection.getRange(),ne=te.createBookmark(!0),ae=W(ee),oe=ae.cell,re=z(ae.table),le=re.getCellInfo(oe);re.sortTable(le.cellIndex,Z),te.moveToBookmark(ne);try{te.select()}catch(se){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(Y){var Z=W(this).table;if(Z&&'enablesort'==Y)for(var ee=domUtils.getElementsByTagName(Z,'th td'),te=0;te<ee.length;te++)if(1<ee[te].getAttribute('colspan')||1<ee[te].getAttribute('rowspan'))return-1;return Z?'enablesort'==Y^'sortEnabled'!=Z.getAttribute('data-sort')?-1:0:-1},execCommand:function(Y){var Z=W(this).table;Z.setAttribute('data-sort','enablesort'==Y?'sortEnabled':'sortDisabled'),'enablesort'==Y?domUtils.addClass(Z,'sortEnabled'):domUtils.removeClasses(Z,'sortEnabled')}}},UE.plugins.contextmenu=function(){var o=this;if(o.setOpt('enableContextMenu',!0),!1!==o.getOpt('enableContextMenu')){var $=o.getLang('contextMenu'),W=o.options.contextMenu||[{label:$.selectall,cmdName:'selectall'},{label:$.cleardoc,cmdName:'cleardoc',exec:function(){confirm($.confirmclear)&&this.execCommand('cleardoc')}},'-',{label:$.unlink,cmdName:'unlink'},'-',{group:$.paragraph,icon:'justifyjustify',subMenu:[{label:$.justifyleft,cmdName:'justify',value:'left'},{label:$.justifyright,cmdName:'justify',value:'right'},{label:$.justifycenter,cmdName:'justify',value:'center'},{label:$.justifyjustify,cmdName:'justify',value:'justify'}]},'-',{group:$.table,icon:'table',subMenu:[{label:$.inserttable,cmdName:'inserttable'},{label:$.deletetable,cmdName:'deletetable'},'-',{label:$.deleterow,cmdName:'deleterow'},{label:$.deletecol,cmdName:'deletecol'},{label:$.insertcol,cmdName:'insertcol'},{label:$.insertcolnext,cmdName:'insertcolnext'},{label:$.insertrow,cmdName:'insertrow'},{label:$.insertrownext,cmdName:'insertrownext'},'-',{label:$.insertcaption,cmdName:'insertcaption'},{label:$.deletecaption,cmdName:'deletecaption'},{label:$.inserttitle,cmdName:'inserttitle'},{label:$.deletetitle,cmdName:'deletetitle'},{label:$.inserttitlecol,cmdName:'inserttitlecol'},{label:$.deletetitlecol,cmdName:'deletetitlecol'},'-',{label:$.mergecells,cmdName:'mergecells'},{label:$.mergeright,cmdName:'mergeright'},{label:$.mergedown,cmdName:'mergedown'},'-',{label:$.splittorows,cmdName:'splittorows'},{label:$.splittocols,cmdName:'splittocols'},{label:$.splittocells,cmdName:'splittocells'},'-',{label:$.averageDiseRow,cmdName:'averagedistributerow'},{label:$.averageDisCol,cmdName:'averagedistributecol'},'-',{label:$.edittd,cmdName:'edittd',exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog('edittd').open()}},{label:$.edittable,cmdName:'edittable',exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog('edittable').open()}},{label:$.setbordervisible,cmdName:'setbordervisible'}]},{group:$.tablesort,icon:'tablesort',subMenu:[{label:$.enablesort,cmdName:'enablesort'},{label:$.disablesort,cmdName:'disablesort'},'-',{label:$.reversecurrent,cmdName:'sorttable',value:'reversecurrent'},{label:$.orderbyasc,cmdName:'sorttable',value:'orderbyasc'},{label:$.reversebyasc,cmdName:'sorttable',value:'reversebyasc'},{label:$.orderbynum,cmdName:'sorttable',value:'orderbynum'},{label:$.reversebynum,cmdName:'sorttable',value:'reversebynum'}]},{group:$.borderbk,icon:'borderBack',subMenu:[{label:$.setcolor,cmdName:'interlacetable',exec:function(){this.execCommand('interlacetable')}},{label:$.unsetcolor,cmdName:'uninterlacetable',exec:function(){this.execCommand('uninterlacetable')}},{label:$.setbackground,cmdName:'settablebackground',exec:function(){this.execCommand('settablebackground',{repeat:!0,colorList:['#bbb','#ccc']})}},{label:$.unsetbackground,cmdName:'cleartablebackground',exec:function(){this.execCommand('cleartablebackground')}},{label:$.redandblue,cmdName:'settablebackground',exec:function(){this.execCommand('settablebackground',{repeat:!0,colorList:['red','blue']})}},{label:$.threecolorgradient,cmdName:'settablebackground',exec:function(){this.execCommand('settablebackground',{repeat:!0,colorList:['#aaa','#bbb','#ccc']})}}]},{group:$.aligntd,icon:'aligntd',subMenu:[{cmdName:'cellalignment',value:{align:'left',vAlign:'top'}},{cmdName:'cellalignment',value:{align:'center',vAlign:'top'}},{cmdName:'cellalignment',value:{align:'right',vAlign:'top'}},{cmdName:'cellalignment',value:{align:'left',vAlign:'middle'}},{cmdName:'cellalignment',value:{align:'center',vAlign:'middle'}},{cmdName:'cellalignment',value:{align:'right',vAlign:'middle'}},{cmdName:'cellalignment',value:{align:'left',vAlign:'bottom'}},{cmdName:'cellalignment',value:{align:'center',vAlign:'bottom'}},{cmdName:'cellalignment',value:{align:'right',vAlign:'bottom'}}]},{group:$.aligntable,icon:'aligntable',subMenu:[{cmdName:'tablealignment',className:'left',label:$.tableleft,value:'left'},{cmdName:'tablealignment',className:'center',label:$.tablecenter,value:'center'},{cmdName:'tablealignment',className:'right',label:$.tableright,value:'right'}]},'-',{label:$.insertparagraphbefore,cmdName:'insertparagraph',value:!0},{label:$.insertparagraphafter,cmdName:'insertparagraph'},{label:$.copy,cmdName:'copy'},{label:$.paste,cmdName:'paste'}],z;if(W.length){var Y=UE.ui.uiUtils;o.addListener('contextmenu',function(Z,ee){var te=Y.getViewportOffsetByEvent(ee);o.fireEvent('beforeselectionchange'),z&&z.destroy();for(var ne=0,oe=[],ae;ae=W[ne];ne++){var re;(function(de){if('-'==de)(re=oe[oe.length-1])&&'-'!==re&&oe.push('-');else if(de.hasOwnProperty('group')){for(var ce=0,ge=[],ue;ue=de.subMenu[ce];ce++)(function(he){'-'==he?(re=ge[ge.length-1])&&'-'!==re?ge.push('-'):ge.splice(ge.length-1):(o.commands[he.cmdName]||UE.commands[he.cmdName]||he.query)&&-1<(he.query?he.query():o.queryCommandState(he.cmdName))&&ge.push({label:he.label||o.getLang('contextMenu.'+he.cmdName+(he.value||''))||'',className:'edui-for-'+he.cmdName+(he.className?' edui-for-'+he.cmdName+'-'+he.className:''),onclick:he.exec?function(){he.exec.call(o)}:function(){o.execCommand(he.cmdName,he.value)}})})(ue);if(ge.length){oe.push({label:function(){switch(de.icon){case'table':return o.getLang('contextMenu.table');case'justifyjustify':return o.getLang('contextMenu.paragraph');case'aligntd':return o.getLang('contextMenu.aligntd');case'aligntable':return o.getLang('contextMenu.aligntable');case'tablesort':return $.tablesort;case'borderBack':return $.borderbk;default:return'';}}(),className:'edui-for-'+de.icon,subMenu:{items:ge,editor:o}})}}else(o.commands[de.cmdName]||UE.commands[de.cmdName]||de.query)&&-1<(de.query?de.query.call(o):o.queryCommandState(de.cmdName))&&oe.push({label:de.label||o.getLang('contextMenu.'+de.cmdName),className:'edui-for-'+(de.icon?de.icon:de.cmdName+(de.value||'')),onclick:de.exec?function(){de.exec.call(o)}:function(){o.execCommand(de.cmdName,de.value)}})})(ae)}if('-'==oe[oe.length-1]&&oe.pop(),z=new UE.ui.Menu({items:oe,className:'edui-contextmenu',editor:o}),z.render(),z.showAt(te),o.fireEvent('aftershowcontextmenu',z),domUtils.preventDefault(ee),browser.ie){var le;try{le=o.selection.getNative().createRange()}catch(de){return}if(le.item){var se=new dom.Range(o.document);se.selectNode(le.item(0)).select(!0,!0)}}}),o.addListener('aftershowcontextmenu',function(Z,ee){if(o.zeroclipboard){var te=ee.items;for(var ne in te)'edui-for-copy'==te[ne].className&&o.zeroclipboard.clip(te[ne].getDom())}})}}},UE.plugins.shortcutmenu=function(){var o=this,z=o.options.shortcutMenu||[],$;z.length&&(o.addListener('contextmenu mouseup',function(W,Y){var Z=this,ee={type:W,target:Y.target||Y.srcElement,screenX:Y.screenX,screenY:Y.screenY,clientX:Y.clientX,clientY:Y.clientY};if(setTimeout(function(){var ae=Z.selection.getRange();(!1===ae.collapsed||'contextmenu'==W)&&(!$&&($=new baidu.editor.ui.ShortCutMenu({editor:Z,items:z,theme:Z.options.theme,className:'edui-shortcutmenu'}),$.render(),Z.fireEvent('afterrendershortcutmenu',$)),$.show(ee,!!UE.plugins.contextmenu))}),'contextmenu'==W&&(domUtils.preventDefault(Y),browser.ie9below)){var te;try{te=Z.selection.getNative().createRange()}catch(ae){return}if(te.item){var ne=new dom.Range(Z.document);ne.selectNode(te.item(0)).select(!0,!0)}}}),o.addListener('keydown',function(W){'keydown'==W&&$&&!$.isHidden&&$.hide()}))},UE.plugins.basestyle=function(){var o={bold:['strong','b'],italic:['em','i'],subscript:['sub'],superscript:['sup']},$=function(Y,Z){return domUtils.filterNodeList(Y.selection.getStartElementPath(),Z)},z=this;for(var W in z.addshortcutkey({Bold:'ctrl+66',Italic:'ctrl+73',Underline:'ctrl+85'}),z.addInputRule(function(Y){utils.each(Y.getNodesByTagName('b i'),function(Z){switch(Z.tagName){case'b':Z.tagName='strong';break;case'i':Z.tagName='em';}})}),o)(function(Y,Z){z.commands[Y]={execCommand:function(ee){var te=z.selection.getRange(),ne=$(this,Z);if(te.collapsed){if(ne){var ae=z.document.createTextNode('');te.insertNode(ae).removeInlineStyle(Z),te.setStartBefore(ae),domUtils.remove(ae)}else{var oe=te.document.createElement(Z[0]);('superscript'==ee||'subscript'==ee)&&(ae=z.document.createTextNode(''),te.insertNode(ae).removeInlineStyle(['sub','sup']).setStartBefore(ae).collapse(!0)),te.insertNode(oe).setStart(oe,0)}te.collapse(!0)}else'superscript'!=ee&&'subscript'!=ee||ne&&ne.tagName.toLowerCase()==ee||te.removeInlineStyle(['sub','sup']),ne?te.removeInlineStyle(Z):te.applyInlineStyle(Z[0]);te.select()},queryCommandState:function(){return $(this,Z)?1:0}}})(W,o[W])},UE.plugins.elementpath=function(){var z=this,o,$;z.setOpt('elementPathEnabled',!0);z.options.elementPathEnabled&&(z.commands.elementpath={execCommand:function(W,Y){var Z=$[Y],ee=z.selection.getRange();o=1*Y,ee.selectNode(Z).select()},queryCommandValue:function(){var W=[].concat(this.selection.getStartElementPath()).reverse(),Y=[];$=W;for(var Z=0,ee;ee=W[Z];Z++)if(3!=ee.nodeType){var te=ee.tagName.toLowerCase();if('img'==te&&ee.getAttribute('anchorname')&&(te='anchor'),Y[Z]=te,o==Z){o=-1;break}}return Y}})},UE.plugins.formatmatch=function(){function o(Z,ee){function te(de){return le&&de.selectNode(le),de.applyInlineStyle(z[z.length-1].tagName,null,z)}if(browser.webkit)var ne='IMG'==ee.target.tagName?ee.target:null;$.undoManger&&$.undoManger.save();var ae=$.selection.getRange(),oe=ne||ae.getClosedNode();if(W&&oe&&'IMG'==oe.tagName)oe.style.cssText+=';float:'+(W.style.cssFloat||W.style.styleFloat||'none')+';display:'+(W.style.display||'inline'),W=null;else if(!W){var re=ae.collapsed;if(re){var le=$.document.createTextNode('match');ae.insertNode(le).select()}$.__hasEnterExecCommand=!0;var se=$.options.removeFormatAttributes;$.options.removeFormatAttributes='',$.execCommand('removeformat'),$.options.removeFormatAttributes=se,$.__hasEnterExecCommand=!1,ae=$.selection.getRange(),z.length&&te(ae),le&&ae.setStartBefore(le).collapse(!0),ae.select(),le&&domUtils.remove(le)}$.undoManger&&$.undoManger.save(),$.removeListener('mouseup',o),Y=0}var $=this,z=[],Y=0,W;$.addListener('reset',function(){z=[],Y=0}),$.commands.formatmatch={execCommand:function(){if(Y)return Y=0,z=[],void $.removeListener('mouseup',o);var ee=$.selection.getRange();if(W=ee.getClosedNode(),!W||'IMG'!=W.tagName){ee.collapse(!0).shrinkBoundary();var te=ee.startContainer;z=domUtils.findParents(te,!0,function(oe){return!domUtils.isBlockElm(oe)&&1==oe.nodeType});for(var ne=0,ae;ae=z[ne];ne++)if('A'==ae.tagName){z.splice(ne,1);break}}$.addListener('mouseup',o),Y=1},queryCommandState:function(){return Y},notNeedUndo:1}},UE.plugin.register('searchreplace',function(){function o(te,ne,ae){var oe=ne.searchStr;-1==ne.dir&&(te=te.split('').reverse().join(''),oe=oe.split('').reverse().join(''),ae=te.length-ae);for(var re=new RegExp(oe,'g'+(ne.casesensitive?'':'i')),le;le=re.exec(te);)if(le.index>=ae)return-1==ne.dir?te.length-le.index-ne.searchStr.length:le.index;return-1}function $(te,ne,ae){var le=ae.all||1==ae.dir?'getNextDomNode':'getPreDomNode',oe,re;domUtils.isBody(te)&&(te=te.firstChild);for(var se=1;te;){if(oe=3==te.nodeType?te.nodeValue:te[browser.ie?'innerText':'textContent'],re=o(oe,ae,ne),se=0,-1!=re)return{node:te,index:re};for(te=domUtils[le](te);te&&ee[te.nodeName.toLowerCase()];)te=domUtils[le](te,!0);te&&(ne=-1==ae.dir?(3==te.nodeType?te.nodeValue:te[browser.ie?'innerText':'textContent']).length:0)}}function z(te,ne,ae){for(var oe=0,re=te.firstChild,le=0,se;re;){if(3==re.nodeType){if(le=re.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,'').length,oe+=le,oe>=ne)return{node:re,index:le-(oe-ne)};}else if(!dtd.$empty[re.tagName]&&(le=re[browser.ie?'innerText':'textContent'].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,'').length,oe+=le,oe>=ne&&(se=z(re,le-(oe-ne),ae),se)))return se;re=domUtils.getNextDomNode(re)}}function W(te,ne){var ae=te.selection.getRange(),re=ne.searchStr,le=te.document.createElement('span'),oe;if(le.innerHTML='$$ueditor_searchreplace_key$$',ae.shrinkBoundary(!0),!ae.collapsed){ae.select();var se=te.selection.getText();if(new RegExp('^'+ne.searchStr+'$',ne.casesensitive?'':'i').test(se)){if(void 0!=ne.replaceStr)return Y(ae,ne.replaceStr),ae.select(),!0;ae.collapse(-1==ne.dir)}}ae.insertNode(le),ae.enlargeToBlockElm(!0),oe=ae.startContainer;var de=oe[browser.ie?'innerText':'textContent'].indexOf('$$ueditor_searchreplace_key$$');ae.setStartBefore(le),domUtils.remove(le);var ce=$(oe,de,ne);if(ce){var ue=z(ce.node,ce.index,re),ge=z(ce.node,ce.index+re.length,re);return ae.setStart(ue.node,ue.index).setEnd(ge.node,ge.index),void 0!==ne.replaceStr&&Y(ae,ne.replaceStr),ae.select(),!0}ae.setCursor()}function Y(te,ne){ne=Z.document.createTextNode(ne),te.deleteContents().insertNode(ne)}var Z=this,ee={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(te,ne){utils.extend(ne,{all:!1,casesensitive:!1,dir:1},!0);var ae=0;if(ne.all){var oe=Z.selection.getRange(),re=Z.body.firstChild;for(re&&1==re.nodeType?(oe.setStart(re,0),oe.shrinkBoundary(!0)):3==re.nodeType&&oe.setStartBefore(re),oe.collapse(!0).select(!0),void 0!==ne.replaceStr&&Z.fireEvent('saveScene');W(this,ne);)ae++;ae&&Z.fireEvent('saveScene')}else void 0!==ne.replaceStr&&Z.fireEvent('saveScene'),W(this,ne)&&ae++,ae&&Z.fireEvent('saveScene');return ae},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var o=this;o.setOpt({customstyle:[{tag:'h1',name:'tc',style:'font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;'},{tag:'h1',name:'tl',style:'font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;'},{tag:'span',name:'im',style:'font-size:16px;font-style:italic;font-weight:bold;line-height:18px;'},{tag:'span',name:'hi',style:'font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;'}]}),o.commands.customstyle={execCommand:function($,z){var W=this,Y=z.tag,Z=domUtils.findParent(W.selection.getStart(),function(he){return he.getAttribute('label')},!0),ne={},ee,te;for(var ae in z)void 0!==z[ae]&&(ne[ae]=z[ae]);if(delete ne.tag,Z&&Z.getAttribute('label')==z.label){if(ee=this.selection.getRange(),te=ee.createBookmark(),!ee.collapsed){var re=domUtils.getCommonAncestor(te.start,te.end),le=domUtils.getElementsByTagName(re,Y);new RegExp(Y,'i').test(re.tagName)&&le.push(re);for(var se=0,de;de=le[se++];)if(de.getAttribute('label')==z.label){var ce=domUtils.getPosition(de,te.start),ue=domUtils.getPosition(de,te.end);if((ce&domUtils.POSITION_FOLLOWING||ce&domUtils.POSITION_CONTAINS)&&(ue&domUtils.POSITION_PRECEDING||ue&domUtils.POSITION_CONTAINS)&&dtd.$block[Y]){var oe=W.document.createElement('p');domUtils.moveChild(de,oe),de.parentNode.insertBefore(oe,de)}domUtils.remove(de,!0)}Z=domUtils.findParent(re,function(he){return he.getAttribute('label')==z.label},!0),Z&&domUtils.remove(Z,!0)}else if(dtd.$block[Z.tagName]){var oe=W.document.createElement('p');domUtils.moveChild(Z,oe),Z.parentNode.insertBefore(oe,Z),domUtils.remove(Z)}else domUtils.remove(Z,!0);ee.moveToBookmark(te).select()}else if(!dtd.$block[Y]){if(ee=W.selection.getRange(),ee.collapsed)return Z=W.document.createElement(Y),domUtils.setAttributes(Z,ne),void ee.insertNode(Z).setStart(Z,0).setCursor();te=ee.createBookmark(),ee.applyInlineStyle(Y,ne).moveToBookmark(te).select()}else if(this.execCommand('paragraph',Y,ne,'customstyle'),ee=W.selection.getRange(),!ee.collapsed){ee.collapse(),Z=domUtils.findParent(W.selection.getStart(),function(he){return he.getAttribute('label')==z.label},!0);var ge=W.document.createElement('p');domUtils.insertAfter(Z,ge),domUtils.fillNode(W.document,ge),ee.setStart(ge,0).setCursor()}},queryCommandValue:function(){var $=domUtils.filterNodeList(this.selection.getStartElementPath(),function(z){return z.getAttribute('label')});return $?$.getAttribute('label'):''}},o.addListener('keyup',function($,z){var W=z.keyCode||z.which;if(32==W||13==W){var Y=o.selection.getRange();if(Y.collapsed){var Z=domUtils.findParent(o.selection.getStart(),function(te){return te.getAttribute('label')},!0);if(Z&&dtd.$block[Z.tagName]&&domUtils.isEmptyNode(Z)){var ee=o.document.createElement('p');domUtils.insertAfter(Z,ee),domUtils.fillNode(o.document,ee),domUtils.remove(Z),Y.setStart(ee,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;!1===me.options.catchRemoteImageEnable||(me.setOpt({catchRemoteImageEnable:!1}),me.addListener('afterpaste',function(){me.fireEvent('catchRemoteImage')}),me.addListener('catchRemoteImage',function(){function catchremoteimage(o,$){var z=utils.serializeParam(me.queryCommandValue('serverparam'))||'',W=utils.formatUrl(catcherActionUrl+(-1==catcherActionUrl.indexOf('?')?'?':'&')+z),Y=utils.isCrossDomainUrl(W),Z={method:'POST',dataType:Y?'jsonp':'',timeout:6e4,onsuccess:$.success,onerror:$.error};Z[catcherFieldName]=o,ajax.request(W,Z)}for(var catcherLocalDomain=me.getOpt('catcherLocalDomain'),catcherActionUrl=me.getActionUrl(me.getOpt('catcherActionName')),catcherUrlPrefix=me.getOpt('catcherUrlPrefix'),catcherFieldName=me.getOpt('catcherFieldName'),remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,'img'),test=function(o,$){if(-1!=o.indexOf(location.host)||/(^\.)|(^\/)/.test(o))return!0;if($)for(var z=0,W;W=$[z++];)if(-1!==o.indexOf(W))return!0;return!1},i=0,ci;ci=imgs[i++];)if(!ci.getAttribute('word_img')){var src=ci.getAttribute('_src')||ci.src||'';/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&remoteImages.push(src)}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=r.state===void 0?eval('('+r.responseText+')'):r}catch(o){return}var list=info.list,i,j,ci,cj,oldSrc,newSrc;for(i=0;ci=imgs[i++];)for(oldSrc=ci.getAttribute('_src')||ci.src||'',j=0;cj=list[j++];)if(oldSrc==cj.source&&'SUCCESS'==cj.state){newSrc=catcherUrlPrefix+cj.url,domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}me.fireEvent('catchremotesuccess')},error:function(){me.fireEvent('catchremoteerror')}})}))},UE.plugin.register('snapscreen',function(){function getLocation(o){var z=document.createElement('a'),W=utils.serializeParam(me.queryCommandValue('serverparam'))||'',$;return z.href=o,browser.ie&&(z.href=z.href),$=z.search,W&&($=$+(-1==$.indexOf('?')?'?':'&')+W,$=$.replace(/[&]+/ig,'&')),{port:z.port,hostname:z.hostname,path:z.pathname+$||+z.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{if(rs=eval('('+rs+')'),'SUCCESS'==rs.state){var opt=me.options;me.execCommand('insertimage',{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||'',floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(o){alert(lang.callBackErrorMsg)}}var lang=me.getLang('snapScreen_plugin'),url,local,res;if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement('object');try{snapplugin.type='application/x-pluginbaidusnap'}catch(o){return}snapplugin.style.cssText='position:absolute;left:-9999px;width:0;height:0;',snapplugin.setAttribute('width','0'),snapplugin.setAttribute('height','0'),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt('snapscreenActionName')),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(o){return void me.ui._dialogs.snapscreenDialog.open()}onSuccess(res)},50)},queryCommandState:function(){return-1==navigator.userAgent.indexOf('Windows',0)?-1:0}}}}}),UE.commands.insertparagraph={execCommand:function(o,$){for(var z=this,W=z.selection.getRange(),Y=W.startContainer,Z;Y&&!domUtils.isBody(Y);)Z=Y,Y=Y.parentNode;if(Z){var ee=z.document.createElement('p');$?Z.parentNode.insertBefore(ee,Z):Z.parentNode.insertBefore(ee,Z.nextSibling),domUtils.fillNode(z.document,ee),W.setStart(ee,0).setCursor(!1,!0)}}},UE.plugin.register('webapp',function(){function o(z,W){return W?'<iframe class="edui-faked-webapp" title="'+z.title+'" '+(z.align&&!z.cssfloat?'align="'+z.align+'"':'')+(z.cssfloat?'style="float:'+z.cssfloat+'"':'')+'width="'+z.width+'" height="'+z.height+'"  scrolling="no" frameborder="0" src="'+z.url+'" logo_url = "'+z.logo+'"></iframe>':'<img title="'+z.title+'" width="'+z.width+'" height="'+z.height+'" src="'+$.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+z.logo+'" style="background:url('+z.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+z.url+'" '+(z.align&&!z.cssfloat?'align="'+z.align+'"':'')+(z.cssfloat?'style="float:'+z.cssfloat+'"':'')+'/>'}var $=this;return{outputRule:function(z){utils.each(z.getNodesByTagName('img'),function(W){var Y;if('edui-faked-webapp'==W.getAttr('class')){Y=o({title:W.getAttr('title'),width:W.getAttr('width'),height:W.getAttr('height'),align:W.getAttr('align'),cssfloat:W.getStyle('float'),url:W.getAttr('_url'),logo:W.getAttr('_logo_url')},!0);var Z=UE.uNode.createElement(Y);W.parentNode.replaceChild(Z,W)}})},inputRule:function(z){utils.each(z.getNodesByTagName('iframe'),function(W){if('edui-faked-webapp'==W.getAttr('class')){var Y=UE.uNode.createElement(o({title:W.getAttr('title'),width:W.getAttr('width'),height:W.getAttr('height'),align:W.getAttr('align'),cssfloat:W.getStyle('float'),url:W.getAttr('src'),logo:W.getAttr('logo_url')}));W.parentNode.replaceChild(Y,W)}})},commands:{webapp:{execCommand:function(z,W){var Y=this,Z=o(utils.extend(W,{align:'none'}),!1);Y.execCommand('inserthtml',Z)},queryCommandState:function(){var z=this,W=z.selection.getRange().getClosedNode(),Y=W&&'edui-faked-webapp'==W.className;return Y?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(o,$){$.html&&this.execCommand('inserthtml',$.html)}},this.addListener('click',function(o,$){var z=$.target||$.srcElement,W=this.selection.getRange(),Y=domUtils.findParent(z,function(Z){if(Z.className&&domUtils.hasClass(Z,'ue_t'))return Z},!0);Y&&W.selectNode(Y).shrinkBoundary().select()}),this.addListener('keydown',function(o,$){var z=this.selection.getRange();if(!z.collapsed&&!$.ctrlKey&&!$.metaKey&&!$.shiftKey&&!$.altKey){var W=domUtils.findParent(z.startContainer,function(Y){if(Y.className&&domUtils.hasClass(Y,'ue_t'))return Y},!0);W&&domUtils.removeClasses(W,['ue_t'])}})},UE.plugin.register('music',function(){function o(z,W,Y,Z,ee,te){return te?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+z+'" width="'+W+'" height="'+Y+'" '+(Z&&!ee?'align="'+Z+'"':'')+(ee?'style="float:'+ee+'"':'')+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':'<img '+(Z&&!ee?'align="'+Z+'"':'')+(ee?'style="float:'+ee+'"':'')+' width="'+W+'" height="'+Y+'" _url="'+z+'" class="edui-faked-music" src="'+$.options.langPath+$.options.lang+'/images/music.png" />'}var $=this;return{outputRule:function(z){utils.each(z.getNodesByTagName('img'),function(W){var Y;if('edui-faked-music'==W.getAttr('class')){var Z=W.getStyle('float'),ee=W.getAttr('align');Y=o(W.getAttr('_url'),W.getAttr('width'),W.getAttr('height'),ee,Z,!0);var te=UE.uNode.createElement(Y);W.parentNode.replaceChild(te,W)}})},inputRule:function(z){utils.each(z.getNodesByTagName('embed'),function(W){if('edui-faked-music'==W.getAttr('class')){var Y=W.getStyle('float'),Z=W.getAttr('align');html=o(W.getAttr('src'),W.getAttr('width'),W.getAttr('height'),Z,Y,!1);var ee=UE.uNode.createElement(html);W.parentNode.replaceChild(ee,W)}})},commands:{music:{execCommand:function(z,W){var Y=this,Z=o(W.url,W.width||400,W.height||95,'none',!1);Y.execCommand('inserthtml',Z)},queryCommandState:function(){var z=this,W=z.selection.getRange().getClosedNode(),Y=W&&'edui-faked-music'==W.className;return Y?1:0}}}}}),UE.plugin.register('autoupload',function(){function o(W,Y){var Z=Y,de=/image\/\w+/i.test(W.type)?'image':'file',ce='loading_'+(+new Date).toString(36),ee,te,ne,ae,oe,re,le,se;if(ee=Z.getOpt(de+'FieldName'),te=Z.getOpt(de+'UrlPrefix'),ne=Z.getOpt(de+'MaxSize'),ae=Z.getOpt(de+'AllowFiles'),oe=Z.getActionUrl(Z.getOpt(de+'ActionName')),le=function(be){var Ce=Z.document.getElementById(ce);Ce&&domUtils.remove(Ce),Z.fireEvent('showmessage',{id:ce,content:be,type:'error',timeout:4e3})},'image'==de?(re='<img class="loadingclass" id="'+ce+'" src="'+Z.options.themePath+Z.options.theme+'/images/spacer.gif" title="'+(Z.getLang('autoupload.loading')||'')+'" >',se=function(be){var Ce=te+be.url,xe=Z.document.getElementById(ce);xe&&(xe.setAttribute('src',Ce),xe.setAttribute('_src',Ce),xe.setAttribute('title',be.title||''),xe.setAttribute('alt',be.original||''),xe.removeAttribute('id'),domUtils.removeClasses(xe,'loadingclass'))}):(re='<p><img class="loadingclass" id="'+ce+'" src="'+Z.options.themePath+Z.options.theme+'/images/spacer.gif" title="'+(Z.getLang('autoupload.loading')||'')+'" ></p>',se=function(be){var Ce=te+be.url,xe=Z.document.getElementById(ce),ve=Z.selection.getRange(),Ne=ve.createBookmark();ve.selectNode(xe).select(),Z.execCommand('insertfile',{url:Ce}),ve.moveToBookmark(Ne).select()}),Z.execCommand('inserthtml',re),!Z.getOpt(de+'ActionName'))return void le(Z.getLang('autoupload.errorLoadConfig'));if(W.size>ne)return void le(Z.getLang('autoupload.exceedSizeError'));var ue=W.name?W.name.substr(W.name.lastIndexOf('.')):'';if(ue&&'image'!=de||ae&&-1==(ae.join('')+'.').indexOf(ue.toLowerCase()+'.'))return void le(Z.getLang('autoupload.exceedTypeError'));var ge=new XMLHttpRequest,he=new FormData,fe=utils.serializeParam(Z.queryCommandValue('serverparam'))||'',ye=utils.formatUrl(oe+(-1==oe.indexOf('?')?'?':'&')+fe);he.append(ee,W,W.name||'blob.'+W.type.substr('image/'.length)),he.append('type','ajax'),ge.open('post',ye,!0),ge.setRequestHeader('X-Requested-With','XMLHttpRequest'),ge.addEventListener('load',function(be){try{var Ce=new Function('return '+utils.trim(be.target.response))();'SUCCESS'==Ce.state&&Ce.url?se(Ce):le(Ce.state)}catch(xe){le(Z.getLang('autoupload.loadError'))}}),ge.send(he)}function $(W){return W.clipboardData&&W.clipboardData.items&&1==W.clipboardData.items.length&&/^image\//.test(W.clipboardData.items[0].type)?W.clipboardData.items:null}function z(W){return W.dataTransfer&&W.dataTransfer.files?W.dataTransfer.files:null}return{outputRule:function(W){utils.each(W.getNodesByTagName('img'),function(Y){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(Y.getAttr('class'))&&Y.parentNode.removeChild(Y)}),utils.each(W.getNodesByTagName('p'),function(Y){/\bloadpara\b/.test(Y.getAttr('class'))&&Y.parentNode.removeChild(Y)})},bindEvents:{ready:function(){var Y=this;window.FormData&&window.FileReader&&(domUtils.on(Y.body,'paste drop',function(Z){var ee=!1,te;if(te='paste'==Z.type?$(Z):z(Z),te){for(var ne=te.length,ae;ne--;)ae=te[ne],ae.getAsFile&&(ae=ae.getAsFile()),ae&&0<ae.size&&(o(ae,Y),ee=!0);ee&&Z.preventDefault()}}),domUtils.on(Y.body,'dragover',function(Z){'Files'==Z.dataTransfer.types[0]&&Z.preventDefault()}),utils.cssRule('loading','.loadingclass{display:inline-block;cursor:default;background: url(\''+this.options.themePath+this.options.theme+'/images/loading.gif\') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url(\''+this.options.themePath+this.options.theme+'/images/loaderror.png\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}',this.document))}}}}),UE.plugin.register('autosave',function(){function o(Z){var ee;if(!(new Date-z<W)){if(!Z.hasContents())return void(Y&&$.removePreferences(Y));z=new Date,Z._saveFlag=null,ee=$.body.innerHTML,!1===Z.fireEvent('beforeautosave',{content:ee})||($.setPreferences(Y,ee),Z.fireEvent('afterautosave',{content:ee}))}}var $=this,z=new Date,W=20,Y=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var Z='-drafts-data',ee=null;ee=$.key?$.key+Z:($.container.parentNode.id||'ue-common')+Z,Y=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,'_')+ee},contentchange:function(){Y&&($._saveFlag&&window.clearTimeout($._saveFlag),0<$.options.saveInterval?$._saveFlag=window.setTimeout(function(){o($)},$.options.saveInterval):o($))}},commands:{clearlocaldata:{execCommand:function(){Y&&$.getPreferences(Y)&&$.removePreferences(Y)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(){return Y?$.getPreferences(Y)||'':''},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(){Y&&($.body.innerHTML=$.getPreferences(Y)||'<p>'+domUtils.fillHtml+'</p>',$.focus(!0))},queryCommandState:function(){return Y?null===$.getPreferences(Y)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register('charts',function(){function o(z){var W=null,Y=0;if(2>z.rows.length)return!1;if(2>z.rows[0].cells.length)return!1;W=z.rows[0].cells,Y=W.length;for(var Z=0,ee;ee=W[Z];Z++)if('th'!==ee.tagName.toLowerCase())return!1;for(var Z=1,te;te=z.rows[Z];Z++){if(te.cells.length!=Y)return!1;if('th'!==te.cells[0].tagName.toLowerCase())return!1;for(var ne=1,ee,ae;ee=te.cells[ne];ne++)if(ae=utils.trim(ee.innerText||ee.textContent||''),ae=ae.replace(new RegExp(UE.dom.domUtils.fillChar,'g'),'').replace(/^\s+|\s+$/g,''),!/^\d*\.?\d+$/.test(ae))return!1}return!0}var $=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(z,W){var Y=domUtils.findParentByTagName(this.selection.getRange().startContainer,'table',!0),Z=[],ee={};if(!Y)return!1;if(!o(Y))return $.fireEvent('chartserror'),!1;for(var te in ee.title=W.title||'',ee.subTitle=W.subTitle||'',ee.xTitle=W.xTitle||'',ee.yTitle=W.yTitle||'',ee.suffix=W.suffix||'',ee.tip=W.tip||'',ee.dataFormat=W.tableDataFormat||'',ee.chartType=W.chartType||0,ee)ee.hasOwnProperty(te)&&Z.push(te+':'+ee[te]);Y.setAttribute('data-chart',Z.join(';')),domUtils.addClass(Y,'edui-charts-table')},queryCommandState:function(){var Y=domUtils.findParentByTagName(this.selection.getRange().startContainer,'table',!0);return Y&&o(Y)?0:-1}}},inputRule:function(z){utils.each(z.getNodesByTagName('table'),function(W){W.getAttr('data-chart')!==void 0&&W.setAttr('style')})},outputRule:function(z){utils.each(z.getNodesByTagName('table'),function(W){W.getAttr('data-chart')!==void 0&&W.setAttr('style','display: none;')})}}}),UE.plugin.register('section',function(){function o(){this.tag='',this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]}function $(Y){var Z=new o;return utils.extend(Z,Y)}function z(Y,Z){for(var ee=Z,te=0;te<Y.length;te++){if(!ee.childNodes)return null;ee=ee.childNodes[Y[te]]}return ee}var W=this;return{bindMultiEvents:{type:'aftersetcontent afterscencerestore',handler:function(){W.fireEvent('updateSections')}},bindEvents:{ready:function(){W.fireEvent('updateSections'),domUtils.on(W.body,'drop paste',function(){W.fireEvent('updateSections')})},afterexeccommand:function(Y,Z){'paragraph'==Z&&W.fireEvent('updateSections')},keyup:function(Y,Z){var ee=this,te=ee.selection.getRange();if(!0!=te.collapsed)ee.fireEvent('updateSections');else{var ne=Z.keyCode||Z.which;(13==ne||8==ne||46==ne)&&ee.fireEvent('updateSections')}}},commands:{getsections:{execCommand:function(Y,Z){function ee(se){for(var de=0;de<ne.length;de++)if(ne[de](se))return de;return-1}function te(se,de){for(var ue=null,fe=se.childNodes,ye=0,be=fe.length,ce,ge,he;ye<be;ye++)if(he=fe[ye],ce=ee(he),0<=ce){var Ce=oe.selection.getRange().selectNode(he).createAddress(!0).startAddress,xe=$({tag:he.tagName,title:he.innerText||he.textContent||'',level:ce,dom:he,startAddress:utils.clone(Ce,[]),endAddress:utils.clone(Ce,[]),children:[]});for(le.nextSection=xe,xe.previousSection=le,ge=le;ce<=ge.level;)ge=ge.parentSection;xe.parentSection=ge,ge.children.push(xe),ue=le=xe}else 1===he.nodeType&&te(he,de),ue&&ue.endAddress[ue.endAddress.length-1]++}for(var ne=Z||['h1','h2','h3','h4','h5','h6'],ae=0;ae<ne.length;ae++)'string'==typeof ne[ae]?ne[ae]=function(se){return function(de){return de.tagName==se.toUpperCase()}}(ne[ae]):'function'!=typeof ne[ae]&&(ne[ae]=function(){return null});var oe=this,re=$({level:-1,title:'root'}),le=re;return te(oe.body,re),re},notNeedUndo:!0},movesection:{execCommand:function(Y,Z,ee,te){var ae=this,oe,re;if(Z&&ee&&-1!=ee.level&&(oe=te?ee.endAddress:ee.startAddress,re=z(oe,ae.body),oe&&re&&!function(ue,ge,he){for(var fe=!1,ye=!1,be=0;be<ue.length&&!(be>=he.length);be++)if(he[be]>ue[be]){fe=!0;break}else if(he[be]<ue[be])break;for(var be=0;be<ge.length&&!(be>=he.length);be++)if(he[be]<ue[be]){ye=!0;break}else if(he[be]>ue[be])break;return fe&&ye}(Z.startAddress,Z.endAddress,oe))){var le=z(Z.startAddress,ae.body),se=z(Z.endAddress,ae.body),de,ce;if(te)for(de=se;de&&!(domUtils.getPosition(le,de)&domUtils.POSITION_FOLLOWING)&&(ce=de.previousSibling,domUtils.insertAfter(re,de),de!=le);)de=ce;else for(de=le;de&&!(domUtils.getPosition(de,se)&domUtils.POSITION_FOLLOWING)&&(ce=de.nextSibling,re.parentNode.insertBefore(de,re),de!=se);)de=ce;ae.fireEvent('updateSections')}}},deletesection:{execCommand:function(Y,Z,ee){function te(se){for(var de=ne.body,ce=0;ce<se.length;ce++){if(!de.childNodes)return null;de=de.childNodes[se[ce]]}return de}var ne=this;if(Z){var ae=te(Z.startAddress),oe=te(Z.endAddress),re=ae,le;if(!ee)for(;re&&domUtils.inDoc(oe,ne.document)&&!(domUtils.getPosition(re,oe)&domUtils.POSITION_FOLLOWING);)le=re.nextSibling,domUtils.remove(re),re=le;else domUtils.remove(re);ne.fireEvent('updateSections')}}},selectsection:{execCommand:function(Y,Z){if(!Z&&!Z.dom)return!1;var ee=this,te=ee.selection.getRange(),ne={startAddress:utils.clone(Z.startAddress,[]),endAddress:utils.clone(Z.endAddress,[])};return ne.endAddress[ne.endAddress.length-1]++,te.moveToAddress(ne).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(Y,Z){if(!Z&&!Z.dom)return!1;var ee=this,te=ee.selection.getRange(),ne={startAddress:Z.startAddress,endAddress:Z.endAddress};return ne.endAddress[ne.endAddress.length-1]++,te.moveToAddress(ne).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register('simpleupload',function(){function o(){var Y=W.offsetWidth||20,Z=W.offsetHeight||20,ee=document.createElement('iframe'),te='display:block;width:'+Y+'px;height:'+Z+'px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;';domUtils.on(ee,'load',function(){var ne=(+new Date).toString(36),ae,oe,re;oe=ee.contentDocument||ee.contentWindow.document,re=oe.body,ae=oe.createElement('div'),ae.innerHTML='<form id="edui_form_'+ne+'" target="edui_iframe_'+ne+'" method="POST" enctype="multipart/form-data" action="'+$.getOpt('serverUrl')+'" style="'+te+'"><input id="edui_input_'+ne+'" type="file" accept="image/*" name="'+$.options.imageFieldName+'" style="'+te+'"></form><iframe id="edui_iframe_'+ne+'" name="edui_iframe_'+ne+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',ae.className='edui-'+$.options.theme,ae.id=$.ui.id+'_iframeupload',re.style.cssText=te,re.style.width=Y+'px',re.style.height=Z+'px',re.appendChild(ae),re.parentNode&&(re.parentNode.style.width=Y+'px',re.parentNode.style.height=Y+'px');var le=oe.getElementById('edui_form_'+ne),se=oe.getElementById('edui_input_'+ne),de=oe.getElementById('edui_iframe_'+ne);domUtils.on(se,'change',function(){function ue(){try{var Se=(de.contentDocument||de.contentWindow.document).body,Te=Se.innerText||Se.textContent||'',ve,Ne,we;Ne=new Function('return '+Te)(),ve=$.options.imageUrlPrefix+Ne.url,'SUCCESS'==Ne.state&&Ne.url?(we=$.document.getElementById(he),we.setAttribute('src',ve),we.setAttribute('_src',ve),we.setAttribute('title',Ne.title||''),we.setAttribute('alt',Ne.original||''),we.removeAttribute('id'),domUtils.removeClasses(we,'loadingclass')):ge&&ge(Ne.state)}catch(Ee){ge&&ge($.getLang('simpleupload.loadError'))}le.reset(),domUtils.un(de,'load',ue)}function ge(ve){if(he){var Ne=$.document.getElementById(he);Ne&&domUtils.remove(Ne),$.fireEvent('showmessage',{id:he,content:ve,type:'error',timeout:4e3})}}if(se.value){var he='loading_'+(+new Date).toString(36),fe=utils.serializeParam($.queryCommandValue('serverparam'))||'',ye=$.getActionUrl($.getOpt('imageActionName')),be=$.getOpt('imageAllowFiles');if($.focus(),$.execCommand('inserthtml','<img class="loadingclass" id="'+he+'" src="'+$.options.themePath+$.options.theme+'/images/spacer.gif" title="'+($.getLang('simpleupload.loading')||'')+'" >'),!$.getOpt('imageActionName'))return void errorHandler($.getLang('autoupload.errorLoadConfig'));var Ce=se.value,xe=Ce?Ce.substr(Ce.lastIndexOf('.')):'';return!xe||be&&-1==(be.join('')+'.').indexOf(xe.toLowerCase()+'.')?void ge($.getLang('simpleupload.exceedTypeError')):void(domUtils.on(de,'load',ue),le.action=utils.formatUrl(ye+(-1==ye.indexOf('?')?'?':'&')+fe),le.submit())}});var ce;$.addListener('selectionchange',function(){clearTimeout(ce),ce=setTimeout(function(){var ue=$.queryCommandState('simpleupload');se.disabled=!(-1!=ue)&&'disabled'},400)}),z=!0}),ee.style.cssText=te,W.appendChild(ee)}var $=this,z=!1,W;return{bindEvents:{ready:function(){utils.cssRule('loading','.loadingclass{display:inline-block;cursor:default;background: url(\''+this.options.themePath+this.options.theme+'/images/loading.gif\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url(\''+this.options.themePath+this.options.theme+'/images/loaderror.png\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}',this.document)},simpleuploadbtnready:function(Y,Z){W=Z,$.afterConfigReady(o)}},outputRule:function(Y){utils.each(Y.getNodesByTagName('img'),function(Z){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(Z.getAttr('class'))&&Z.parentNode.removeChild(Z)})},commands:{simpleupload:{queryCommandState:function(){return z?0:-1}}}}}),UE.plugin.register('serverparam',function(){var o=this,$={};return{commands:{serverparam:{execCommand:function(z,W,Y){void 0===W||null===W?$={}:utils.isString(W)?void 0===Y||null===Y?delete $[W]:$[W]=Y:utils.isObject(W)?utils.extend($,W,!0):utils.isFunction(W)&&utils.extend($,W(),!0)},queryCommandValue:function(){return $||{}}}}}}),UE.plugin.register('insertfile',function(){function o(z){var W=z.substr(z.lastIndexOf('.')+1).toLowerCase(),Y={rar:'icon_rar.gif',zip:'icon_rar.gif',tar:'icon_rar.gif',gz:'icon_rar.gif',bz2:'icon_rar.gif',doc:'icon_doc.gif',docx:'icon_doc.gif',pdf:'icon_pdf.gif',mp3:'icon_mp3.gif',xls:'icon_xls.gif',chm:'icon_chm.gif',ppt:'icon_ppt.gif',pptx:'icon_ppt.gif',avi:'icon_mv.gif',rmvb:'icon_mv.gif',wmv:'icon_mv.gif',flv:'icon_mv.gif',swf:'icon_mv.gif',rm:'icon_mv.gif',exe:'icon_exe.gif',psd:'icon_psd.gif',txt:'icon_txt.gif',jpg:'icon_jpg.gif',png:'icon_jpg.gif',jpeg:'icon_jpg.gif',gif:'icon_jpg.gif',ico:'icon_jpg.gif',bmp:'icon_jpg.gif'};return Y[W]?Y[W]:Y.txt}var $=this;return{commands:{insertfile:{execCommand:function(z,W){W=utils.isArray(W)?W:[W];var ne='',ae=$.getOpt('UEDITOR_HOME_URL'),oe=ae+('/'==ae.substr(ae.length-1)?'':'/')+'dialogs/attachment/fileTypeImages/',Y,Z,ee,te;for(Y=0;Y<W.length;Y++)Z=W[Y],ee=oe+o(Z.url),te=Z.title||Z.url.substr(Z.url.lastIndexOf('/')+1),ne+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+ee+'" _src="'+ee+'" /><a style="font-size:12px; color:#0066cc;" href="'+Z.url+'" title="'+te+'">'+te+'</a></p>';$.execCommand('insertHtml',ne)}}}}}),UE.plugins.xssFilter=function(){function o(Y){var Z=Y.tagName,ee=Y.attrs;return z.hasOwnProperty(Z)?void UE.utils.each(ee,function(te,ne){-1===z[Z].indexOf(ne)&&Y.setAttr(ne)}):(Y.parentNode.removeChild(Y),!1)}var $=UEDITOR_CONFIG,z=$.whitList;z&&$.xssFilterRules&&(this.options.filterRules=function(){var Y={};return UE.utils.each(z,function(Z,ee){Y[ee]=function(te){return o(te)}}),Y}());var W=[];UE.utils.each(z,function(Y,Z){W.push(Z)}),z&&$.inputXssFilter&&this.addInputRule(function(Y){Y.traversal(function(Z){return!('element'!==Z.type)&&void o(Z)})}),z&&$.outputXssFilter&&this.addOutputRule(function(Y){Y.traversal(function(Z){return!('element'!==Z.type)&&void o(Z)})})};var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function o(){var ae=document.getElementById('edui_fixedlayer');ne.setViewportOffset(ae,{left:0,top:0})}function $(){W.on(window,'scroll',o),W.on(window,'resize',baidu.editor.utils.defer(o,0,!0))}var z=baidu.editor.browser,W=baidu.editor.dom.domUtils,Y='$EDITORUI',Z=window[Y]={},ee='ID'+Y,te=0,ne=baidu.editor.ui.uiUtils={uid:function(ae){return ae?ae[ee]||(ae[ee]=++te):++te},hook:function(ae,oe){var re;return ae&&ae._callbacks?re=ae:(re=function(){var le;ae&&(le=ae.apply(this,arguments));for(var se=re._callbacks,de=se.length,ce;de--;)ce=se[de].apply(this,arguments),void 0===le&&(le=ce);return le},re._callbacks=[]),re._callbacks.push(oe),re},createElementByHtml:function(ae){var oe=document.createElement('div');return oe.innerHTML=ae,oe=oe.firstChild,oe.parentNode.removeChild(oe),oe},getViewportElement:function(){return z.ie&&z.quirks?document.body:document.documentElement},getClientRect:function(ae){var oe;try{oe=ae.getBoundingClientRect()}catch(se){oe={left:0,top:0,height:0,width:0}}for(var re={left:_Mathround(oe.left),top:_Mathround(oe.top),height:_Mathround(oe.bottom-oe.top),width:_Mathround(oe.right-oe.left)},le;(le=ae.ownerDocument)!==document&&(ae=W.getWindow(le).frameElement);)oe=ae.getBoundingClientRect(),re.left+=oe.left,re.top+=oe.top;return re.bottom=re.top+re.height,re.right=re.left+re.width,re},getViewportRect:function(){var ae=ne.getViewportElement(),oe=0|(window.innerWidth||ae.clientWidth),re=0|(window.innerHeight||ae.clientHeight);return{left:0,top:0,height:re,width:oe,bottom:re,right:oe}},setViewportOffset:function(ae,oe){var le=ne.getFixedLayer();ae.parentNode===le?(ae.style.left=oe.left+'px',ae.style.top=oe.top+'px'):W.setViewportOffset(ae,oe)},getEventOffset:function(ae){var oe=ae.target||ae.srcElement,re=ne.getClientRect(oe),le=ne.getViewportOffsetByEvent(ae);return{left:le.left-re.left,top:le.top-re.top}},getViewportOffsetByEvent:function(ae){var oe=ae.target||ae.srcElement,re=W.getWindow(oe).frameElement,le={left:ae.clientX,top:ae.clientY};if(re&&oe.ownerDocument!==document){var se=ne.getClientRect(re);le.left+=se.left,le.top+=se.top}return le},setGlobal:function(ae,oe){return Z[ae]=oe,Y+'["'+ae+'"]'},unsetGlobal:function(ae){delete Z[ae]},copyAttributes:function(ae,oe){for(var re=oe.attributes,le=re.length,se;le--;)se=re[le],'style'!=se.nodeName&&'class'!=se.nodeName&&(!z.ie||se.specified)&&ae.setAttribute(se.nodeName,se.nodeValue);oe.className&&W.addClass(ae,oe.className),oe.style.cssText&&(ae.style.cssText+=';'+oe.style.cssText)},removeStyle:function(ae,oe){if(ae.style.removeProperty)ae.style.removeProperty(oe);else if(ae.style.removeAttribute)ae.style.removeAttribute(oe);else throw''},contains:function(ae,oe){return ae&&oe&&ae!==oe&&(ae.contains?ae.contains(oe):16&ae.compareDocumentPosition(oe))},startDrag:function(ae,oe,re){function le(ue){var ge=ue.clientX-se,he=ue.clientY-de;oe.ondragmove(ge,he,ue),ue.stopPropagation?ue.stopPropagation():ue.cancelBubble=!0}var re=re||document,se=ae.clientX,de=ae.clientY;if(re.addEventListener){function ue(){re.removeEventListener('mousemove',le,!0),re.removeEventListener('mouseup',ue,!0),window.removeEventListener('mouseup',ue,!0),oe.ondragstop()}re.addEventListener('mousemove',le,!0),re.addEventListener('mouseup',ue,!0),window.addEventListener('mouseup',ue,!0),ae.preventDefault()}else{function ue(){ce.releaseCapture(),ce.detachEvent('onmousemove',le),ce.detachEvent('onmouseup',ue),ce.detachEvent('onlosecaptrue',ue),oe.ondragstop()}var ce=ae.srcElement;ce.setCapture(),ce.attachEvent('onmousemove',le),ce.attachEvent('onmouseup',ue),ce.attachEvent('onlosecaptrue',ue),ae.returnValue=!1}oe.ondragstart()},getFixedLayer:function(){var ae=document.getElementById('edui_fixedlayer');return null==ae&&(ae=document.createElement('div'),ae.id='edui_fixedlayer',document.body.appendChild(ae),z.ie&&8>=z.version?(ae.style.position='absolute',$(),setTimeout(o)):ae.style.position='fixed',ae.style.left='0',ae.style.top='0',ae.style.width='0',ae.style.height='0'),ae},makeUnselectable:function(ae){if(!(z.opera||z.ie&&9>z.version))void 0===ae.style.MozUserSelect?void 0===ae.style.WebkitUserSelect?void 0!==ae.style.KhtmlUserSelect&&(ae.style.KhtmlUserSelect='none'):ae.style.WebkitUserSelect='none':ae.style.MozUserSelect='none';else if(ae.unselectable='on',ae.hasChildNodes())for(var oe=0;oe<ae.childNodes.length;oe++)1==ae.childNodes[oe].nodeType&&ne.makeUnselectable(ae.childNodes[oe])}}}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.EventBase,W=baidu.editor.ui.UIBase=function(){};W.prototype={className:'',uiName:'',initOptions:function(Y){var Z=this;for(var ee in Y)Z[ee]=Y[ee];this.id=this.id||'edui'+$.uid()},initUIBase:function(){this._globalKey=o.unhtml($.setGlobal(this.id,this))},render:function(Y){for(var Z=this.renderHtml(),ee=$.createElementByHtml(Z),te=domUtils.getElementsByTagName(ee,'*'),ne='edui-'+(this.theme||this.editor.options.theme),ae=document.getElementById('edui_fixedlayer'),oe=0,re;re=te[oe++];)domUtils.addClass(re,ne);domUtils.addClass(ee,ne),ae&&(ae.className='',domUtils.addClass(ae,ne));var le=this.getDom();null==le?('string'==typeof Y&&(Y=document.getElementById(Y)),Y=Y||$.getFixedLayer(),domUtils.addClass(Y,ne),Y.appendChild(ee)):(le.parentNode.replaceChild(ee,le),$.copyAttributes(ee,le)),this.postRender()},getDom:function(Y){return Y?document.getElementById(this.id+'_'+Y):document.getElementById(this.id)},postRender:function(){this.fireEvent('postrender')},getHtmlTpl:function(){return''},formatHtml:function(Y){var Z='edui-'+this.uiName;return Y.replace(/##/g,this.id).replace(/%%-/g,this.uiName?Z+'-':'').replace(/%%/g,(this.uiName?Z:'')+' '+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var Y=this.getDom();Y&&baidu.editor.dom.domUtils.remove(Y),$.unsetGlobal(this.id)}},o.inherits(W,z)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.UIBase,z=baidu.editor.ui.Separator=function(W){this.initOptions(W),this.initSeparator()};z.prototype={uiName:'separator',initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},o.inherits(z,$)}(),function(){var o=baidu.editor.utils,$=baidu.editor.dom.domUtils,z=baidu.editor.ui.UIBase,W=baidu.editor.ui.uiUtils,Y=baidu.editor.ui.Mask=function(Z){this.initOptions(Z),this.initUIBase()};Y.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var Z=this;$.on(window,'resize',function(){setTimeout(function(){Z.isHidden()||Z._fill()})})},show:function(Z){this._fill(),this.getDom().style.display='',this.getDom().style.zIndex=Z},hide:function(){this.getDom().style.display='none',this.getDom().style.zIndex=''},isHidden:function(){return'none'==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(Z,ee){this.fireEvent('click',Z,ee)},_fill:function(){var Z=this.getDom(),ee=W.getViewportRect();Z.style.width=ee.width+'px',Z.style.height=ee.height+'px'}},o.inherits(Y,z)}(),function(){function o(ne,ae){for(var oe=0,re;oe<ee.length;oe++)if(re=ee[oe],!re.isHidden()&&!1!==re.queryAutoHide(ae)){if(ne&&/scroll/ig.test(ne.type)&&'edui-wordpastepop'==re.className)return;re.hide()}ee.length&&re.editor.fireEvent('afterhidepop')}var $=baidu.editor.utils,z=baidu.editor.ui.uiUtils,W=baidu.editor.dom.domUtils,Y=baidu.editor.ui.UIBase,Z=baidu.editor.ui.Popup=function(ne){this.initOptions(ne),this.initPopup()},ee=[];Z.postHide=o;var te=['edui-anchor-topleft','edui-anchor-topright','edui-anchor-bottomleft','edui-anchor-bottomright'];Z.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),ee.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+'  </div> </div></div>'},getContentHtmlTpl:function(){return this.content?'string'==typeof this.content?this.content:this.content.renderHtml():''},_UIBase_postRender:Y.prototype.postRender,postRender:function(){if(this.content instanceof Y&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var ne=(document.documentElement.clientHeight||document.body.clientHeight)-80,ae=this.getDom().offsetHeight,oe=z.getClientRect(this.combox.getDom()).top,re=this.getDom('content'),le=this.getDom('body').getElementsByTagName('iframe'),se=this;for(le.length&&(le=le[0]);oe+ae>ne;)ae-=30;re.style.height=ae+'px',le&&(le.style.height=ae+'px'),window.XMLHttpRequest?W.on(re,'onmousewheel'in document.body?'mousewheel':'DOMMouseScroll',function(de){de.preventDefault?de.preventDefault():de.returnValue=!1,re.scrollTop-=de.wheelDelta?60*(de.wheelDelta/120):60*(de.detail/-3)}):W.on(this.getDom(),'mousewheel',function(de){de.returnValue=!1,se.getDom('content').scrollTop-=60*(de.wheelDelta/120)})}this.fireEvent('postRenderAfter'),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var ne=this.getDom('content');return z.getClientRect(ne)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var ne=this.getDom('body');ne.style.width='',ne.style.height='';var ae=this.mesureSize();if(this.captureWheel){ne.style.width=-(-20-ae.width)+'px';var oe=parseInt(this.getDom('content').style.height,10);window.isNaN(oe)||(ae.height=oe)}else ne.style.width=ae.width+'px';return ne.style.height=ae.height+'px',this.__size=ae,this.captureWheel&&(this.getDom('content').style.overflow='auto'),ae},showAnchor:function(ne,ae){this.showAnchorRect(z.getClientRect(ne),ae)},showAnchorRect:function(ne,ae){this._doAutoRender();var re=z.getViewportRect();this.getDom().style.visibility='hidden',this._show();var le=this.fitSize(),se,de,ce,ue;ae?(se=this.canSideLeft&&ne.right+le.width>re.right&&ne.left>le.width,de=this.canSideUp&&ne.top+le.height>re.bottom&&ne.bottom>le.height,ce=se?ne.left-le.width:ne.right,ue=de?ne.bottom-le.height:ne.top):(se=this.canSideLeft&&ne.right+le.width>re.right&&ne.left>le.width,de=this.canSideUp&&ne.top+le.height>re.bottom&&ne.bottom>le.height,ce=se?ne.right-le.width:ne.left,ue=de?ne.top-le.height:ne.bottom);var ge=this.getDom();z.setViewportOffset(ge,{left:ce,top:ue}),W.removeClasses(ge,te),ge.className+=' '+te[2*(de?1:0)+(se?1:0)],this.editor&&(ge.style.zIndex=1*this.editor.container.style.zIndex+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=ge.style.zIndex-1),this.getDom().style.visibility='visible'},showAt:function(ne){var ae=ne.left,oe=ne.top;this.showAnchorRect({left:ae,top:oe,right:ae,bottom:oe,height:0,width:0},!1,!0)},_show:function(){if(this._hidden){var ne=this.getDom();ne.style.display='',this._hidden=!1,this.fireEvent('show')}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(ne){!this._hidden&&this.getDom()&&(this.getDom().style.display='none',this._hidden=!0,!ne&&this.fireEvent('hide'))},queryAutoHide:function(ne){return!ne||!z.contains(this.getDom(),ne)}},$.inherits(Z,Y),W.on(document,'mousedown',function(ne){var ae=ne.target||ne.srcElement;o(ne,ae)}),W.on(window,'scroll',function(ne,ae){o(ne,ae)})}(),function(){function o(Z,ee){for(var te='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+Z+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+ee.getLang('themeColor')+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',ne=0;ne<Y.length;ne++)ne&&0==ne%10&&(te+='</tr>'+(60==ne?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+ee.getLang('standardColor')+'</td></tr>':'')+'<tr'+(60==ne?' class="edui-colorpicker-tablefirstrow"':'')+'>'),te+=70>ne?'<td style="padding: 0 2px;"><a hidefocus title="'+Y[ne]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+Y[ne]+'" style="background-color:#'+Y[ne]+';border:solid #ccc;'+(10>ne||60<=ne?'border-width:1px;':10<=ne&&20>ne?'border-width:1px 1px 0 1px;':'border-width:0 1px 0 1px;')+'"></a></td>':'';return te+='</tr></table></div>',te}var $=baidu.editor.utils,z=baidu.editor.ui.UIBase,W=baidu.editor.ui.ColorPicker=function(Z){this.initOptions(Z),this.noColorText=this.noColorText||this.editor.getLang('clearColor'),this.initUIBase()};W.prototype={getHtmlTpl:function(){return o(this.noColorText,this.editor)},_onTableClick:function(Z){var ee=Z.target||Z.srcElement,te=ee.getAttribute('data-color');te&&this.fireEvent('pickcolor',te)},_onTableOver:function(Z){var ee=Z.target||Z.srcElement,te=ee.getAttribute('data-color');te&&(this.getDom('preview').style.backgroundColor=te)},_onTableOut:function(){this.getDom('preview').style.backgroundColor=''},_onPickNoColor:function(){this.fireEvent('picknocolor')}},$.inherits(W,z);var Y='ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,'.split(',')}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.ui.UIBase,W=baidu.editor.ui.TablePicker=function(Y){this.initOptions(Y),this.initTablePicker()};W.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:z.prototype.render,render:function(Y){this._UIBase_render(Y),this.getDom('label').innerHTML='0'+this.editor.getLang('t_row')+' x 0'+this.editor.getLang('t_col')},_track:function(Y,Z){var ee=this.getDom('overlay').style,te=this.lengthOfCellSide;ee.width=Y*te+'px',ee.height=Z*te+'px';var ne=this.getDom('label');ne.innerHTML=Y+this.editor.getLang('t_col')+' x '+Z+this.editor.getLang('t_row'),this.numCols=Y,this.numRows=Z},_onMouseOver:function(Y,Z){var ee=Y.relatedTarget||Y.fromElement;$.contains(Z,ee)||Z===ee||(this.getDom('label').innerHTML='0'+this.editor.getLang('t_col')+' x 0'+this.editor.getLang('t_row'),this.getDom('overlay').style.visibility='')},_onMouseOut:function(Y,Z){var ee=Y.relatedTarget||Y.toElement;$.contains(Z,ee)||Z===ee||(this.getDom('label').innerHTML='0'+this.editor.getLang('t_col')+' x 0'+this.editor.getLang('t_row'),this.getDom('overlay').style.visibility='hidden')},_onMouseMove:function(Y){var ee=this.getDom('overlay').style,te=$.getEventOffset(Y),ne=this.lengthOfCellSide,ae=_Mathceil(te.left/ne),oe=_Mathceil(te.top/ne);this._track(ae,oe)},_onClick:function(){this.fireEvent('picktable',this.numCols,this.numRows)}},o.inherits(W,z)}(),function(){var o=baidu.editor.browser,$=baidu.editor.dom.domUtils,z=baidu.editor.ui.uiUtils,W='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(o.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var Y=this._Stateful_dGetHtmlTpl();return Y.replace(/stateful/g,function(){return W})},Stateful_onMouseEnter:function(Y,Z){this.target=Z,(!this.isDisabled()||this.alwalysHoverable)&&(this.addState('hover'),this.fireEvent('over'))},Stateful_onMouseLeave:function(){(!this.isDisabled()||this.alwalysHoverable)&&(this.removeState('hover'),this.removeState('active'),this.fireEvent('out'))},Stateful_onMouseOver:function(Y,Z){var ee=Y.relatedTarget;z.contains(Z,ee)||Z===ee||this.Stateful_onMouseEnter(Y,Z)},Stateful_onMouseOut:function(Y,Z){var ee=Y.relatedTarget;z.contains(Z,ee)||Z===ee||this.Stateful_onMouseLeave(Y,Z)},Stateful_onMouseDown:function(){this.isDisabled()||this.addState('active')},Stateful_onMouseUp:function(){this.isDisabled()||this.removeState('active')},Stateful_postRender:function(){this.disabled&&!this.hasState('disabled')&&this.addState('disabled')},hasState:function(Y){return $.hasClass(this.getStateDom(),'edui-state-'+Y)},addState:function(Y){this.hasState(Y)||(this.getStateDom().className+=' edui-state-'+Y)},removeState:function(Y){this.hasState(Y)&&$.removeClasses(this.getStateDom(),['edui-state-'+Y])},getStateDom:function(){return this.getDom('state')},isChecked:function(){return this.hasState('checked')},setChecked:function(Y){!this.isDisabled()&&Y?this.addState('checked'):this.removeState('checked')},isDisabled:function(){return this.hasState('disabled')},setDisabled:function(Y){Y?(this.removeState('hover'),this.removeState('checked'),this.removeState('active'),this.addState('disabled')):this.removeState('disabled')}}}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.UIBase,z=baidu.editor.ui.Stateful,W=baidu.editor.ui.Button=function(Y){if(Y.name){var Z=Y.name,ee=Y.cssRules;Y.className||(Y.className='edui-for-'+Z),Y.cssRules='.edui-default  .edui-for-'+Z+' .edui-icon {'+ee+'}'}this.initOptions(Y),this.initButton()};W.prototype={uiName:'button',label:'',title:'',showIcon:!0,showText:!0,cssRules:'',initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&o.cssRule('edui-customize-'+this.name+'-style',this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':'')+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':'')+(this.showText?'<div class="edui-box edui-label">'+this.label+'</div>':'')+'</div></div></div></div>'},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(Y){var Z=Y.target||Y.srcElement,ee=Z&&Z.tagName&&Z.tagName.toLowerCase();if('input'==ee||'object'==ee||'object'==ee)return!1},_onClick:function(){this.isDisabled()||this.fireEvent('click')},setTitle:function(Y){var Z=this.getDom('label');Z.innerHTML=Y}},o.inherits(W,$),o.extend(W.prototype,z)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.dom.domUtils,W=baidu.editor.ui.UIBase,Y=baidu.editor.ui.Stateful,Z=baidu.editor.ui.SplitButton=function(ee){this.initOptions(ee),this.initSplitButton()};Z.prototype={popup:null,uiName:'splitbutton',title:'',initSplitButton:function(){this.initUIBase(),this.Stateful_init();this;if(null!=this.popup){var te=this.popup;this.popup=null,this.setPopup(te)}},_UIBase_postRender:W.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(ee){this.popup===ee||(null!=this.popup&&this.popup.dispose(),ee.addListener('show',o.bind(this._onPopupShow,this)),ee.addListener('hide',o.bind(this._onPopupHide,this)),ee.addListener('postrender',o.bind(function(){ee.getDom('body').appendChild($.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+($.getClientRect(this.getDom()).width+20)+'px"></div>')),ee.getDom().className+=' '+this.className},this)),this.popup=ee)},_onPopupShow:function(){this.addState('opened')},_onPopupHide:function(){this.removeState('opened')},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':'')+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var ee=$.getClientRect(this.getDom());ee.top-=this.popup.SHADOW_RADIUS,ee.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(ee)},_onArrowClick:function(){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent('buttonclick')}},o.inherits(Z,W),o.extend(Z.prototype,Y,!0)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.ui.ColorPicker,W=baidu.editor.ui.Popup,Y=baidu.editor.ui.SplitButton,Z=baidu.editor.ui.ColorButton=function(ee){this.initOptions(ee),this.initColorButton()};Z.prototype={initColorButton:function(){var ee=this;this.popup=new W({content:new z({noColorText:ee.editor.getLang('clearColor'),editor:ee.editor,onpickcolor:function(te,ne){ee._onPickColor(ne)},onpicknocolor:function(te,ne){ee._onPickNoColor(ne)}}),editor:ee.editor}),this.initSplitButton()},_SplitButton_postRender:Y.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom('button_body').appendChild($.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=' edui-colorbutton'},setColor:function(ee){this.getDom('colorlump').style.backgroundColor=ee,this.color=ee},_onPickColor:function(ee){!1!==this.fireEvent('pickcolor',ee)&&(this.setColor(ee),this.popup.hide())},_onPickNoColor:function(){!1!==this.fireEvent('picknocolor')&&this.popup.hide()}},o.inherits(Z,Y)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.Popup,z=baidu.editor.ui.TablePicker,W=baidu.editor.ui.SplitButton,Y=baidu.editor.ui.TableButton=function(Z){this.initOptions(Z),this.initTableButton()};Y.prototype={initTableButton:function(){var Z=this;this.popup=new $({content:new z({editor:Z.editor,onpicktable:function(ee,te,ne){Z._onPickTable(te,ne)}}),editor:Z.editor}),this.initSplitButton()},_onPickTable:function(Z,ee){!1!==this.fireEvent('picktable',Z,ee)&&this.popup.hide()}},o.inherits(Y,W)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.UIBase,z=baidu.editor.ui.AutoTypeSetPicker=function(W){this.initOptions(W),this.initAutoTypeSetPicker()};z.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var W=this.editor,Y=W.options.autotypeset,Z=W.getLang('autoTypeSet'),ee='textAlignValue'+W.uid,te='imageBlockLineValue'+W.uid,ne='symbolConverValue'+W.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(Y.mergeEmptyline?'checked':'')+'>'+Z.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(Y.removeEmptyline?'checked':'')+'>'+Z.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(Y.removeClass?'checked':'')+'>'+Z.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(Y.indent?'checked':'')+'>'+Z.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(Y.textAlign?'checked':'')+'>'+Z.alignment+'</td><td colspan="2" id="'+ee+'"><input type="radio" name="'+ee+'" value="left" '+(Y.textAlign&&'left'==Y.textAlign?'checked':'')+'>'+W.getLang('justifyleft')+'<input type="radio" name="'+ee+'" value="center" '+(Y.textAlign&&'center'==Y.textAlign?'checked':'')+'>'+W.getLang('justifycenter')+'<input type="radio" name="'+ee+'" value="right" '+(Y.textAlign&&'right'==Y.textAlign?'checked':'')+'>'+W.getLang('justifyright')+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(Y.imageBlockLine?'checked':'')+'>'+Z.imageFloat+'</td><td nowrap id="'+te+'"><input type="radio" name="'+te+'" value="none" '+(Y.imageBlockLine&&'none'==Y.imageBlockLine?'checked':'')+'>'+W.getLang('default')+'<input type="radio" name="'+te+'" value="left" '+(Y.imageBlockLine&&'left'==Y.imageBlockLine?'checked':'')+'>'+W.getLang('justifyleft')+'<input type="radio" name="'+te+'" value="center" '+(Y.imageBlockLine&&'center'==Y.imageBlockLine?'checked':'')+'>'+W.getLang('justifycenter')+'<input type="radio" name="'+te+'" value="right" '+(Y.imageBlockLine&&'right'==Y.imageBlockLine?'checked':'')+'>'+W.getLang('justifyright')+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(Y.clearFontSize?'checked':'')+'>'+Z.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(Y.clearFontFamily?'checked':'')+'>'+Z.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(Y.removeEmptyNode?'checked':'')+'>'+Z.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(Y.pasteFilter?'checked':'')+'>'+Z.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(Y.bdc2sb||Y.tobdc?'checked':'')+'>'+Z.symbol+'</td><td id="'+ne+'"><input type="radio" name="bdc" value="bdc2sb" '+(Y.bdc2sb?'checked':'')+'>'+Z.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(Y.tobdc?'checked':'')+'>'+Z.tobdc+'</td><td nowrap align="right"><button >'+Z.run+'</button></td></tr></table></div></div>'},_UIBase_render:$.prototype.render},o.inherits(z,$)}(),function(){function o(ee){for(var te={},ne=ee.getDom(),ae=ee.editor.uid,oe=null,re=null,le=domUtils.getElementsByTagName(ne,'input'),se=le.length-1,de;de=le[se--];)if(oe=de.getAttribute('type'),'checkbox'!=oe)te[de.getAttribute('value')]=de.checked;else if(re=de.getAttribute('name'),te[re]&&delete te[re],de.checked){var ce=document.getElementById(re+'Value'+ae);if(!ce)te[re]=!0;else if(/input/ig.test(ce.tagName))te[re]=ce.value;else for(var ue=ce.getElementsByTagName('input'),ge=ue.length-1,he;he=ue[ge--];)if(he.checked){te[re]=he.value;break}}else te[re]=!1;for(var fe=domUtils.getElementsByTagName(ne,'select'),se=0,ye,be;ye=fe[se++];)be=ye.getAttribute('name'),te[be]=te[be]?ye.value:'';$.extend(ee.editor.options.autotypeset,te),ee.editor.setPreferences('autotypeset',te)}var $=baidu.editor.utils,z=baidu.editor.ui.Popup,W=baidu.editor.ui.AutoTypeSetPicker,Y=baidu.editor.ui.SplitButton,Z=baidu.editor.ui.AutoTypeSetButton=function(ee){this.initOptions(ee),this.initAutoTypeSetButton()};Z.prototype={initAutoTypeSetButton:function(){var ee=this;this.popup=new z({content:new W({editor:ee.editor}),editor:ee.editor,hide:function(){!this._hidden&&this.getDom()&&(o(this),this.getDom().style.display='none',this._hidden=!0,this.fireEvent('hide'))}});var te=0;this.popup.addListener('postRenderAfter',function(){var ne=this;if(!te){var ae=this.getDom(),oe=ae.getElementsByTagName('button')[0];oe.onclick=function(){o(ne),ee.editor.execCommand('autotypeset'),ne.hide()},domUtils.on(ae,'click',function(re){var le=re.target||re.srcElement,se=ee.editor.uid;if(le&&'INPUT'==le.tagName){if('imageBlockLine'==le.name||'textAlign'==le.name||'symbolConver'==le.name)for(var de=le.checked,ce=document.getElementById(le.name+'Value'+se),ue=ce.getElementsByTagName('input'),ge={imageBlockLine:'none',textAlign:'left',symbolConver:'tobdc'},he=0;he<ue.length;he++)de?ue[he].value==ge[le.name]&&(ue[he].checked='checked'):ue[he].checked=!1;if(le.name=='imageBlockLineValue'+se||le.name=='textAlignValue'+se||'bdc'==le.name){var fe=le.parentNode.previousSibling.getElementsByTagName('input');fe&&(fe[0].checked=!0)}o(ne)}}),te=1}}),this.initSplitButton()}},$.inherits(Z,Y)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.Popup,z=baidu.editor.ui.Stateful,W=baidu.editor.ui.UIBase,Y=baidu.editor.ui.CellAlignPicker=function(Z){this.initOptions(Z),this.initSelected(),this.initCellAlignPicker()};Y.prototype={initSelected:function(){var Z={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3};this.selected&&(this.selectedIndex=Z.valign[this.selected.valign]*Z.count+Z.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var Z=['left','center','right'],te=null,ne=-1,ae=[],oe=0;oe<9;oe++)te=this.selectedIndex===oe?' class="edui-cellalign-selected" ':'',ne=oe%3,0==ne&&ae.push('<tr>'),ae.push('<td index="'+oe+'" '+te+' stateful><div class="edui-icon edui-'+Z[ne]+'"></div></td>'),2==ne&&ae.push('</tr>');return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+ae.join('')+'</table></div></div>'},getStateDom:function(){return this.target},_onClick:function(Z){var ee=Z.target||Z.srcElement;/icon/.test(ee.className)&&(this.items[ee.parentNode.getAttribute('index')].onclick(),$.postHide(Z))},_UIBase_render:W.prototype.render},o.inherits(Y,W),o.extend(Y.prototype,z,!0)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.Stateful,z=baidu.editor.ui.uiUtils,W=baidu.editor.ui.UIBase,Y=baidu.editor.ui.PastePicker=function(Z){this.initOptions(Z),this.initPastePicker()};Y.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang('pasteOpt')+'</div><div class="edui-button"><div title="'+this.editor.getLang('pasteSourceFormat')+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang('tagFormat')+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang('pasteTextFormat')+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(Z){this.editor.ui._isTransfer=!0,this.editor.fireEvent('pasteTransfer',Z)},_onClick:function(Z){var ee=domUtils.getNextDomNode(Z),te=z.getViewportRect().height,ne=z.getClientRect(ee);ee.style.top=ne.top+ne.height>te?-ne.height-Z.offsetHeight+'px':'',/hidden/ig.test(domUtils.getComputedStyle(ee,'visibility'))?(ee.style.visibility='visible',domUtils.addClass(Z,'edui-state-opened')):(ee.style.visibility='hidden',domUtils.removeClasses(Z,'edui-state-opened'))},_UIBase_render:W.prototype.render},o.inherits(Y,W),o.extend(Y.prototype,$,!0)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.ui.UIBase,W=baidu.editor.ui.Toolbar=function(Y){this.initOptions(Y),this.initToolbar()};W.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(Y,Z){Z===void 0?this.items.push(Y):this.items.splice(Z,0,Y)},getHtmlTpl:function(){for(var Y=[],Z=0;Z<this.items.length;Z++)Y[Z]=this.items[Z].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+Y.join('')+'</div>'},postRender:function(){for(var Y=this.getDom(),Z=0;Z<this.items.length;Z++)this.items[Z].postRender();$.makeUnselectable(Y)},_onMouseDown:function(Y){var Z=Y.target||Y.srcElement,ee=Z&&Z.tagName&&Z.tagName.toLowerCase();if('input'==ee||'object'==ee||'object'==ee)return!1}},o.inherits(W,z)}(),function(){var o=baidu.editor.utils,$=baidu.editor.dom.domUtils,z=baidu.editor.ui.uiUtils,W=baidu.editor.ui.UIBase,Y=baidu.editor.ui.Popup,Z=baidu.editor.ui.Stateful,ee=baidu.editor.ui.CellAlignPicker,te=baidu.editor.ui.Menu=function(oe){this.initOptions(oe),this.initMenu()},ne={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};te.prototype={items:null,uiName:'menu',initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var oe=0,re;oe<this.items.length;oe++)re=this.items[oe],'-'==re?this.items[oe]=this.getSeparator():!(re instanceof ae)&&(re.editor=this.editor,re.theme=this.editor.options.theme,this.items[oe]=this.createItem(re))},getSeparator:function(){return ne},createItem:function(oe){return oe.menu=this,new ae(oe)},_Popup_getContentHtmlTpl:Y.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var oe=[],re=0,le;re<this.items.length;re++)le=this.items[re],oe[re]=le.renderHtml();return'<div class="%%-body">'+oe.join('')+'</div>'},_Popup_postRender:Y.prototype.postRender,postRender:function(){for(var oe=this,re=0,le;re<this.items.length;re++)le=this.items[re],le.ownerMenu=this,le.postRender();$.on(this.getDom(),'mouseover',function(se){se=se||event;var de=se.relatedTarget||se.fromElement,ce=oe.getDom();z.contains(ce,de)||ce===de||oe.fireEvent('over')}),this._Popup_postRender()},queryAutoHide:function(oe){if(oe){if(z.contains(this.getDom(),oe))return!1;for(var re=0,le;re<this.items.length;re++)if(le=this.items[re],!1===le.queryAutoHide(oe))return!1}},clearItems:function(){for(var oe=0,re;oe<this.items.length;oe++)re=this.items[oe],clearTimeout(re._showingTimer),clearTimeout(re._closingTimer),re.subMenu&&re.subMenu.destroy();this.items=[]},destroy:function(){this.getDom()&&$.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},o.inherits(te,Y);var ae=baidu.editor.ui.MenuItem=function(oe){if(this.initOptions(oe),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof te))if(oe.className&&-1!=oe.className.indexOf('aligntd')){var re=this;this.subMenu.selected=this.editor.queryCommandValue('cellalignment'),this.subMenu=new Y({content:new ee(this.subMenu),parentMenu:re,editor:re.editor,destroy:function(){this.getDom()&&$.remove(this.getDom())}}),this.subMenu.addListener('postRenderAfter',function(){$.on(this.getDom(),'mouseover',function(){re.addState('opened')})})}else this.subMenu=new te(this.subMenu)};ae.prototype={label:'',subMenu:null,ownerMenu:null,uiName:'menuitem',alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+'</div></div>'},postRender:function(){var oe=this;this.addListener('over',function(){oe.ownerMenu.fireEvent('submenuover',oe),oe.subMenu&&oe.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=' edui-hassubmenu',this.subMenu.render(),this.addListener('out',function(){oe.delayHideSubMenu()}),this.subMenu.addListener('over',function(){clearTimeout(oe._closingTimer),oe._closingTimer=null,oe.addState('opened')}),this.ownerMenu.addListener('hide',function(){oe.hideSubMenu()}),this.ownerMenu.addListener('submenuover',function(re,le){le!==oe&&oe.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(re){return re&&z.contains(oe.getDom(),re)?!1:this._bakQueryAutoHide(re)}),this.getDom().style.tabIndex='-1',z.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var oe=this;oe.isDisabled()||(oe.addState('opened'),clearTimeout(oe._showingTimer),clearTimeout(oe._closingTimer),oe._closingTimer=null,oe._showingTimer=setTimeout(function(){oe.showSubMenu()},250))},delayHideSubMenu:function(){var oe=this;oe.isDisabled()||(oe.removeState('opened'),clearTimeout(oe._showingTimer),!oe._closingTimer&&(oe._closingTimer=setTimeout(function(){oe.hasState('opened')||oe.hideSubMenu(),oe._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||'')+'</div>'},getStateDom:function(){return this.getDom()},queryAutoHide:function(oe){if(this.subMenu&&this.hasState('opened'))return this.subMenu.queryAutoHide(oe)},_onClick:function(oe,re){this.hasState('disabled')||!1!==this.fireEvent('click',oe,re)&&(this.subMenu?this.showSubMenu():Y.postHide(oe))},showSubMenu:function(){var oe=z.getClientRect(this.getDom());oe.right-=5,oe.left+=2,oe.width-=7,oe.top-=4,oe.bottom+=4,oe.height+=8,this.subMenu.showAnchorRect(oe,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},o.inherits(ae,W),o.extend(ae.prototype,Z,!0)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.uiUtils,z=baidu.editor.ui.Menu,W=baidu.editor.ui.SplitButton,Y=baidu.editor.ui.Combox=function(Z){this.initOptions(Z),this.initCombox()};Y.prototype={uiName:'combox',onbuttonclick:function(){this.showPopup()},initCombox:function(){var Z=this;this.items=this.items||[];for(var ee=0,te;ee<this.items.length;ee++)te=this.items[ee],te.uiName='listitem',te.index=ee,te.onclick=function(){Z.selectByIndex(this.index)};this.popup=new z({items:this.items,uiName:'list',editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:W.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||''),this.setValue(this.initValue||'')},showPopup:function(){var Z=$.getClientRect(this.getDom());Z.top+=1,Z.bottom-=1,Z.height-=2,this.popup.showAnchorRect(Z)},getValue:function(){return this.value},setValue:function(Z){var ee=this.indexByValue(Z);-1==ee?(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(Z)),this.value=Z):(this.selectedIndex=ee,this.setLabel(this.items[ee].label),this.value=this.items[ee].value)},setLabel:function(Z){this.getDom('button_body').innerHTML=Z,this.label=Z},getLabelForUnknowValue:function(Z){return Z},indexByValue:function(Z){for(var ee=0;ee<this.items.length;ee++)if(Z==this.items[ee].value)return ee;return-1},getItem:function(Z){return this.items[Z]},selectByIndex:function(Z){Z<this.items.length&&!1!==this.fireEvent('select',Z)&&(this.selectedIndex=Z,this.value=this.items[Z].value,this.setLabel(this.items[Z].label))}},o.inherits(Y,W)}(),function(){var o=baidu.editor.utils,$=baidu.editor.dom.domUtils,z=baidu.editor.ui.uiUtils,W=baidu.editor.ui.Mask,Y=baidu.editor.ui.UIBase,Z=baidu.editor.ui.Button,ee=baidu.editor.ui.Dialog=function(oe){if(oe.name){var re=oe.name,le=oe.cssRules;oe.className||(oe.className='edui-for-'+re),le&&(oe.cssRules='.edui-default .edui-for-'+re+' .edui-dialog-content  {'+le+'}')}this.initOptions(o.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(se,de){return de?this.onok():this.oncancel()},holdScroll:!1},oe)),this.initDialog()},te,ne,ae;ee.prototype={draggable:!1,uiName:'dialog',initDialog:function(){var oe=this,re=this.editor.options.theme;if(this.cssRules&&o.cssRule('edui-customize-'+this.name+'-style',this.cssRules),this.initUIBase(),this.modalMask=te||(te=new W({className:'edui-dialog-modalmask',theme:re,onclick:function(){ae&&ae.close(!1)}})),this.dragMask=ne||(ne=new W({className:'edui-dialog-dragmask',theme:re})),this.closeButton=new Z({className:'edui-dialog-closebutton',title:oe.closeDialog,theme:re,onclick:function(){oe.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(var le=0;le<this.buttons.length;le++)this.buttons[le]instanceof Z||(this.buttons[le]=new Z(o.extend(this.buttons[le],{editor:this.editor},!0)))},initResizeEvent:function(){var oe=this;$.on(window,'resize',function(){oe._hidden||void 0===oe._hidden||(oe.__resizeTimer&&window.clearTimeout(oe.__resizeTimer),oe.__resizeTimer=window.setTimeout(function(){oe.__resizeTimer=null;var re=oe.getDom(),le=oe.getDom('content'),se=UE.ui.uiUtils.getClientRect(re),de=UE.ui.uiUtils.getClientRect(le),ce=z.getViewportRect();le.style.width=ce.width-se.width+de.width+'px',le.style.height=ce.height-se.height+de.height+'px',re.style.width=ce.width+'px',re.style.height=ce.height+'px',oe.fireEvent('resize')},100))})},fitSize:function(){var oe=this.getDom('body'),re=this.mesureSize();return oe.style.width=re.width+'px',oe.style.height=re.height+'px',re},safeSetOffset:function(oe){var re=this,le=re.getDom(),se=z.getViewportRect(),de=z.getClientRect(le),ce=oe.left;ce+de.width>se.right&&(ce=se.right-de.width);var ue=oe.top;ue+de.height>se.bottom&&(ue=se.bottom-de.height),le.style.left=_Mathmax(ce,0)+'px',le.style.top=_Mathmax(ue,0)+'px'},showAtCenter:function(){var oe=z.getViewportRect();if(!this.fullscreen){this.getDom().style.display='';var re=this.fitSize(),le=0|this.getDom('titlebar').offsetHeight,se=oe.width/2-re.width/2,de=oe.height/2-(re.height-le)/2-le,ce=this.getDom();this.safeSetOffset({left:_Mathmax(0|se,0),top:_Mathmax(0|de,0)}),$.hasClass(ce,'edui-state-centered')||(ce.className+=' edui-state-centered')}else{var ue=this.getDom(),ge=this.getDom('content');ue.style.display='block';var he=UE.ui.uiUtils.getClientRect(ue),fe=UE.ui.uiUtils.getClientRect(ge);ue.style.left='-100000px',ge.style.width=oe.width-he.width+fe.width+'px',ge.style.height=oe.height-he.height+fe.height+'px',ue.style.width=oe.width+'px',ue.style.height=oe.height+'px',ue.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX='hidden',document.documentElement.style.overflowY='hidden',document.body.style.overflowX='hidden',document.body.style.overflowY='hidden'}this._show()},getContentHtml:function(){var oe='';return'string'==typeof this.content?oe=this.content:this.iframeUrl&&(oe='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),oe},getHtmlTpl:function(){var oe='';if(this.buttons){for(var re=[],le=0;le<this.buttons.length;le++)re[le]=this.buttons[le].renderHtml();oe='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+re.join('')+'</div></div>'}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||'')+'</span></div>'+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?'':this.getContentHtml())+'</div>'+oe+'</div></div></div>'},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var oe=this;if(this.addListener('show',function(){oe.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener('hide',function(){oe.modalMask.hide()}),this.buttons)for(var re=0;re<this.buttons.length;re++)this.buttons[re].postRender();$.on(window,'resize',function(){setTimeout(function(){oe.isHidden()||oe.safeSetOffset(z.getClientRect(oe.getDom()))})}),this._hide()},mesureSize:function(){var oe=this.getDom('body'),re=z.getClientRect(this.getDom('content')).width,le=oe.style;return le.width=re,z.getClientRect(oe)},_onTitlebarMouseDown:function(oe){if(this.draggable){var se=z.getViewportRect(),de=this,le;z.startDrag(oe,{ondragstart:function(){le=z.getClientRect(de.getDom()),de.getDom('contmask').style.visibility='visible',de.dragMask.show(de.getDom().style.zIndex-1)},ondragmove:function(ce,ue){var ge=le.left+ce,he=le.top+ue;de.safeSetOffset({left:ge,top:he})},ondragstop:function(){de.getDom('contmask').style.visibility='hidden',$.removeClasses(de.getDom(),['edui-state-centered']),de.dragMask.hide()}})}},reset:function(){this.getDom('content').innerHTML=this.getContentHtml(),this.fireEvent('dialogafterreset')},_show:function(){this._hidden&&(this.getDom().style.display='',this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent('show'),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var oe=this.getDom();oe.style.display='none',oe.style.zIndex='',oe.style.width='',oe.style.height='',this._hidden=!0,this.fireEvent('hide')}},open:function(){if(this.autoReset)try{this.reset()}catch(oe){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom('iframe').focus()}catch(oe){}ae=this},_onCloseButtonClick:function(){this.close(!1)},close:function(oe){if(!1!==this.fireEvent('close',oe)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var re=this.getDom('content'),le=this.getDom('iframe');if(re&&le){var se=le.contentDocument||le.contentWindow.document;se&&(se.body.innerHTML=''),$.remove(re)}}}},o.inherits(ee,Y)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.Menu,z=baidu.editor.ui.SplitButton,W=baidu.editor.ui.MenuButton=function(Y){this.initOptions(Y),this.initMenuButton()};W.prototype={initMenuButton:function(){var Y=this;this.uiName='menubutton',this.popup=new $({items:Y.items,className:Y.className,editor:Y.editor}),this.popup.addListener('show',function(){for(var Z=this,ee=0;ee<Z.items.length;ee++)Z.items[ee].removeState('checked'),Z.items[ee].value==Y._value&&(Z.items[ee].addState('checked'),this.value=Y._value)}),this.initSplitButton()},setValue:function(Y){this._value=Y}},o.inherits(W,z)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.Popup,z=baidu.editor.ui.SplitButton,W=baidu.editor.ui.MultiMenuPop=function(Y){this.initOptions(Y),this.initMultiMenu()};W.prototype={initMultiMenu:function(){var Y=this;this.popup=new $({content:'',editor:Y.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom('content').innerHTML='<iframe id="'+Y.id+'_iframe" src="'+Y.iframeUrl+'" frameborder="0"></iframe>',Y.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*Y.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},o.inherits(W,z)}(),function(){function o(oe){var re=oe.target||oe.srcElement,le=Z.findParent(re,function(ce){return Z.hasClass(ce,'edui-shortcutmenu')||Z.hasClass(ce,'edui-popup')},!0);if(!le)for(var se=0,de;de=ee[se++];)de.hide()}var $=baidu.editor.ui,z=$.UIBase,W=$.uiUtils,Y=baidu.editor.utils,Z=baidu.editor.dom.domUtils,ee=[],ne=!1,ae=$.ShortCutMenu=function(oe){this.initOptions(oe),this.initShortCutMenu()},te;ae.postHide=o,ae.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),ee.push(this)},initEvent:function(){var oe=this,re=oe.editor.document;Z.on(re,'mousemove',function(le){if(!1===oe.isHidden){if(oe.getSubMenuMark()||'contextmenu'==oe.eventType)return;var se=!0,de=oe.getDom(),ce=de.offsetWidth,ue=de.offsetHeight,ge=ce/2+oe.SPACE,he=ue/2,fe=_Mathabs(le.screenX-oe.left),ye=_Mathabs(le.screenY-oe.top);clearTimeout(te),te=setTimeout(function(){0<ye&&ye<he?oe.setOpacity(de,'1'):ye>he&&ye<he+70?(oe.setOpacity(de,'0.5'),se=!1):ye>he+70&&ye<he+140&&oe.hide(),se&&0<fe&&fe<ge?oe.setOpacity(de,'1'):fe>ge&&fe<ge+70?oe.setOpacity(de,'0.5'):fe>ge+70&&fe<ge+140&&oe.hide()})}}),browser.chrome&&Z.on(re,'mouseout',function(le){var se=le.relatedTarget||le.toElement;(null==se||'HTML'==se.tagName)&&oe.hide()}),oe.editor.addListener('afterhidepop',function(){oe.isHidden||(ne=!0)})},initItems:function(){if(Y.isArray(this.items))for(var oe=0,re=this.items.length,le;oe<re;oe++)le=this.items[oe].toLowerCase(),$[le]&&(this.items[oe]=new $[le](this.editor),this.items[oe].className+=' edui-shortcutsubmenu ')},setOpacity:function(oe,re){browser.ie&&9>browser.version?oe.style.filter='alpha(opacity = '+100*parseFloat(re)+');':oe.style.opacity=re},getSubMenuMark:function(){ne=!1;for(var oe=W.getFixedLayer(),re=Z.getElementsByTagName(oe,'div',function(de){return Z.hasClass(de,'edui-shortcutsubmenu edui-popup')}),le=0,se;se=re[le++];)'none'!=se.style.display&&(ne=!0);return ne},show:function(oe,re){function le(fe){0>fe.left&&(fe.left=0),0>fe.top&&(fe.top=0),ue.style.cssText='position:absolute;left:'+fe.left+'px;top:'+fe.top+'px;'}function se(fe){fe.tagName||(fe=fe.getDom()),ce.left=parseInt(fe.style.left),ce.top=parseInt(fe.style.top),ce.top-=ue.offsetHeight+15,le(ce)}var de=this,ce={},ue=this.getDom(),ge=W.getFixedLayer();if(de.eventType=oe.type,ue.style.cssText='display:block;left:-9999px','contextmenu'==oe.type&&re){var he=Z.getElementsByTagName(ge,'div','edui-contextmenu')[0];he?se(he):de.editor.addListener('aftershowcontextmenu',function(fe,ye){se(ye)})}else ce=W.getViewportOffsetByEvent(oe),ce.top-=ue.offsetHeight+de.SPACE,ce.left+=de.SPACE+20,le(ce),de.setOpacity(ue,0.2);de.isHidden=!1,de.left=oe.screenX+ue.offsetWidth/2-de.SPACE,de.top=oe.screenY-ue.offsetHeight/2-de.SPACE,de.editor&&(ue.style.zIndex=1*de.editor.container.style.zIndex+10,ge.style.zIndex=ue.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display='none'),this.isHidden=!0},postRender:function(){if(Y.isArray(this.items))for(var oe=0,re;re=this.items[oe++];)re.postRender()},getHtmlTpl:function(){var oe;if(Y.isArray(this.items)){oe=[];for(var re=0;re<this.items.length;re++)oe[re]=this.items[re].renderHtml();oe=oe.join('')}else oe=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+oe+'</div>'}},Y.inherits(ae,z),Z.on(document,'mousedown',function(oe){o(oe)}),Z.on(window,'scroll',function(oe){o(oe)})}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui.UIBase,z=baidu.editor.ui.Breakline=function(W){this.initOptions(W),this.initSeparator()};z.prototype={uiName:'Breakline',initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<br/>'}},o.inherits(z,$)}(),function(){var o=baidu.editor.utils,$=baidu.editor.dom.domUtils,z=baidu.editor.ui.UIBase,W=baidu.editor.ui.Message=function(Y){this.initOptions(Y),this.initMessage()};W.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">\\xD7</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(Y){var Z=this;Y.keepshow||(clearTimeout(this.timer),Z.timer=setTimeout(function(){Z.hide()},Y.timeout||4e3)),Y.content!==void 0&&Z.setContent(Y.content),Y.type!==void 0&&Z.setType(Y.type),Z.show()},postRender:function(){var Y=this,Z=this.getDom('closer');Z&&$.on(Z,'click',function(){Y.hide()})},setContent:function(Y){this.getDom('content').innerHTML=Y},setType:function(Y){Y=Y||'info';var Z=this.getDom('body');Z.className=Z.className.replace(/edui-message-type-[\w-]+/,'edui-message-type-'+Y)},getContent:function(){return this.getDom('content').innerHTML},getType:function(){var Y=this.getDom('body').match(/edui-message-type-([\w-]+)/);return Y?Y[1]:''},show:function(){this.getDom().style.display='block'},hide:function(){var Y=this.getDom();Y&&(Y.style.display='none',Y.parentNode&&Y.parentNode.removeChild(Y))}},o.inherits(W,z)}(),function(){var o=baidu.editor.utils,$=baidu.editor.ui,z=$.Dialog;$.buttons={},$.Dialog=function(ue){var ge=new z(ue);return ge.addListener('hide',function(){if(ge.editor){var he=ge.editor;try{if(browser.gecko){var fe=he.window.scrollY,ye=he.window.scrollX;he.body.focus(),he.window.scrollTo(ye,fe)}else he.focus()}catch(be){}}}),ge};for(var W={anchor:'~/dialogs/anchor/anchor.html',insertimage:'~/dialogs/image/image.html',link:'~/dialogs/link/link.html',spechars:'~/dialogs/spechars/spechars.html',searchreplace:'~/dialogs/searchreplace/searchreplace.html',map:'~/dialogs/map/map.html',gmap:'~/dialogs/gmap/gmap.html',insertvideo:'~/dialogs/video/video.html',help:'~/dialogs/help/help.html',preview:'~/dialogs/preview/preview.html',emotion:'~/dialogs/emotion/emotion.html',wordimage:'~/dialogs/wordimage/wordimage.html',attachment:'~/dialogs/attachment/attachment.html',insertframe:'~/dialogs/insertframe/insertframe.html',edittip:'~/dialogs/table/edittip.html',edittable:'~/dialogs/table/edittable.html',edittd:'~/dialogs/table/edittd.html',webapp:'~/dialogs/webapp/webapp.html',snapscreen:'~/dialogs/snapscreen/snapscreen.html',scrawl:'~/dialogs/scrawl/scrawl.html',music:'~/dialogs/music/music.html',template:'~/dialogs/template/template.html',background:'~/dialogs/background/background.html',charts:'~/dialogs/charts/charts.html'},Y=['undo','redo','formatmatch','bold','italic','underline','fontborder','touppercase','tolowercase','strikethrough','subscript','superscript','source','indent','outdent','blockquote','pasteplain','pagebreak','selectall','print','horizontal','removeformat','time','date','unlink','insertparagraphbeforetable','insertrow','insertcol','mergeright','mergedown','deleterow','deletecol','splittorows','splittocols','splittocells','mergecells','deletetable','drafts'],Z=0,ee;ee=Y[Z++];)ee=ee.toLowerCase(),$[ee]=function(ue){return function(ge){var he=new $.Button({className:'edui-for-'+ue,title:ge.options.labelMap[ue]||ge.getLang('labelMap.'+ue)||'',onclick:function(){ge.execCommand(ue)},theme:ge.options.theme,showText:!1});return $.buttons[ue]=he,ge.addListener('selectionchange',function(fe,ye,be){var Ce=ge.queryCommandState(ue);-1==Ce?(he.setDisabled(!0),he.setChecked(!1)):!be&&(he.setDisabled(!1),he.setChecked(Ce))}),he}}(ee);$.cleardoc=function(ue){var ge=new $.Button({className:'edui-for-cleardoc',title:ue.options.labelMap.cleardoc||ue.getLang('labelMap.cleardoc')||'',theme:ue.options.theme,onclick:function(){confirm(ue.getLang('confirmClear'))&&ue.execCommand('cleardoc')}});return $.buttons.cleardoc=ge,ue.addListener('selectionchange',function(){ge.setDisabled(-1==ue.queryCommandState('cleardoc'))}),ge};var te={justify:['left','right','center','justify'],imagefloat:['none','left','center','right'],directionality:['ltr','rtl']};for(var ne in te)(function(ue,ge){for(var he=0,fe;fe=ge[he++];)(function(ye){$[ue.replace('float','')+ye]=function(be){var Ce=new $.Button({className:'edui-for-'+ue.replace('float','')+ye,title:be.options.labelMap[ue.replace('float','')+ye]||be.getLang('labelMap.'+ue.replace('float','')+ye)||'',theme:be.options.theme,onclick:function(){be.execCommand(ue,ye)}});return $.buttons[ue]=Ce,be.addListener('selectionchange',function(xe,ve,Ne){Ce.setDisabled(-1==be.queryCommandState(ue)),Ce.setChecked(be.queryCommandValue(ue)==ye&&!Ne)}),Ce}})(fe)})(ne,te[ne]);for(var Z=0,ee;ee=['backcolor','forecolor'][Z++];)$[ee]=function(ue){return function(ge){var he=new $.ColorButton({className:'edui-for-'+ue,color:'default',title:ge.options.labelMap[ue]||ge.getLang('labelMap.'+ue)||'',editor:ge,onpickcolor:function(fe,ye){ge.execCommand(ue,ye)},onpicknocolor:function(){ge.execCommand(ue,'default'),this.setColor('transparent'),this.color='default'},onbuttonclick:function(){ge.execCommand(ue,this.color)}});return $.buttons[ue]=he,ge.addListener('selectionchange',function(){he.setDisabled(-1==ge.queryCommandState(ue))}),he}}(ee);var ae={noOk:['searchreplace','help','spechars','webapp','preview'],ok:['attachment','anchor','link','insertimage','map','gmap','insertframe','wordimage','insertvideo','insertframe','edittip','edittable','edittd','scrawl','template','music','background','charts']};for(var ne in ae)(function(ue,ge){for(var he=0,fe;fe=ge[he++];)browser.opera&&'searchreplace'===fe||function(ye){$[ye]=function(be,Ce,xe){Ce=Ce||(be.options.iframeUrlMap||{})[ye]||W[ye],xe=be.options.labelMap[ye]||be.getLang('labelMap.'+ye)||'';var ve;Ce&&(ve=new $.Dialog(o.extend({iframeUrl:be.ui.mapUrl(Ce),editor:be,className:'edui-for-'+ye,title:xe,holdScroll:'insertimage'===ye,fullscreen:/charts|preview/.test(ye),closeDialog:be.getLang('closeDialog')},'ok'==ue?{buttons:[{className:'edui-okbutton',label:be.getLang('ok'),editor:be,onclick:function(){ve.close(!0)}},{className:'edui-cancelbutton',label:be.getLang('cancel'),editor:be,onclick:function(){ve.close(!1)}}]}:{})),be.ui._dialogs[ye+'Dialog']=ve);var Ne=new $.Button({className:'edui-for-'+ye,title:xe,onclick:function(){if(ve)switch(ye){case'wordimage':var we=be.execCommand('wordimage');we&&we.length&&(ve.render(),ve.open());break;case'scrawl':-1!=be.queryCommandState('scrawl')&&(ve.render(),ve.open());break;default:ve.render(),ve.open();}},theme:be.options.theme,disabled:'scrawl'==ye&&-1==be.queryCommandState('scrawl')||'charts'==ye});return $.buttons[ye]=Ne,be.addListener('selectionchange',function(){if(!(ye in{edittable:1})){var Se=be.queryCommandState(ye);Ne.getDom()&&(Ne.setDisabled(-1==Se),Ne.setChecked(Se))}}),Ne}}(fe.toLowerCase())})(ne,ae[ne]);$.snapscreen=function(ue,ge,he){he=ue.options.labelMap.snapscreen||ue.getLang('labelMap.snapscreen')||'';var fe=new $.Button({className:'edui-for-snapscreen',title:he,onclick:function(){ue.execCommand('snapscreen')},theme:ue.options.theme});if($.buttons.snapscreen=fe,ge=ge||(ue.options.iframeUrlMap||{}).snapscreen||W.snapscreen,ge){var ye=new $.Dialog({iframeUrl:ue.ui.mapUrl(ge),editor:ue,className:'edui-for-snapscreen',title:he,buttons:[{className:'edui-okbutton',label:ue.getLang('ok'),editor:ue,onclick:function(){ye.close(!0)}},{className:'edui-cancelbutton',label:ue.getLang('cancel'),editor:ue,onclick:function(){ye.close(!1)}}]});ye.render(),ue.ui._dialogs.snapscreenDialog=ye}return ue.addListener('selectionchange',function(){fe.setDisabled(-1==ue.queryCommandState('snapscreen'))}),fe},$.insertcode=function(ue,ge,he){ge=ue.options.insertcode||[],he=ue.options.labelMap.insertcode||ue.getLang('labelMap.insertcode')||'';var fe=[];o.each(ge,function(be,Ce){fe.push({label:be,value:Ce,theme:ue.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||'')+'</div>'}})});var ye=new $.Combox({editor:ue,items:fe,onselect:function(be,Ce){ue.execCommand('insertcode',this.items[Ce].value)},onbuttonclick:function(){this.showPopup()},title:he,initValue:he,className:'edui-for-insertcode',indexByValue:function(be){if(be)for(var Ce=0,xe;xe=this.items[Ce];Ce++)if(-1!=xe.value.indexOf(be))return Ce;return-1}});return $.buttons.insertcode=ye,ue.addListener('selectionchange',function(be,Ce,xe){if(!xe){var ve=ue.queryCommandState('insertcode');if(-1==ve)ye.setDisabled(!0);else{ye.setDisabled(!1);var Ne=ue.queryCommandValue('insertcode');if(!Ne)return void ye.setValue(he);Ne&&(Ne=Ne.replace(/['"]/g,'').split(',')[0]),ye.setValue(Ne)}}}),ye},$.fontfamily=function(ue,ge,he){if(ge=ue.options.fontfamily||[],he=ue.options.labelMap.fontfamily||ue.getLang('labelMap.fontfamily')||'',!!ge.length){for(var fe=0,be=[],ye,Ce;ye=ge[fe];fe++)Ce=ue.getLang('fontfamily')[ye.name]||'',function(ve,Ne){be.push({label:ve,value:Ne,theme:ue.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+o.unhtml(this.value)+'">'+(this.label||'')+'</div>'}})}(ye.label||Ce,ye.val);var xe=new $.Combox({editor:ue,items:be,onselect:function(ve,Ne){ue.execCommand('FontFamily',this.items[Ne].value)},onbuttonclick:function(){this.showPopup()},title:he,initValue:he,className:'edui-for-fontfamily',indexByValue:function(ve){if(ve)for(var Ne=0,we;we=this.items[Ne];Ne++)if(-1!=we.value.indexOf(ve))return Ne;return-1}});return $.buttons.fontfamily=xe,ue.addListener('selectionchange',function(ve,Ne,we){if(!we){var Se=ue.queryCommandState('FontFamily');if(-1==Se)xe.setDisabled(!0);else{xe.setDisabled(!1);var Te=ue.queryCommandValue('FontFamily');Te&&(Te=Te.replace(/['"]/g,'').split(',')[0]),xe.setValue(Te)}}}),xe}},$.fontsize=function(ue,ge,he){if(he=ue.options.labelMap.fontsize||ue.getLang('labelMap.fontsize')||'',ge=ge||ue.options.fontsize||[],!!ge.length){for(var fe=[],ye=0,be;ye<ge.length;ye++)be=ge[ye]+'px',fe.push({label:be,value:be,theme:ue.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||'')+'</div>'}});var Ce=new $.Combox({editor:ue,items:fe,title:he,initValue:he,onselect:function(xe,ve){ue.execCommand('FontSize',this.items[ve].value)},onbuttonclick:function(){this.showPopup()},className:'edui-for-fontsize'});return $.buttons.fontsize=Ce,ue.addListener('selectionchange',function(xe,ve,Ne){if(!Ne){var we=ue.queryCommandState('FontSize');-1==we?Ce.setDisabled(!0):(Ce.setDisabled(!1),Ce.setValue(ue.queryCommandValue('FontSize')))}}),Ce}},$.paragraph=function(ue,ge,he){if(he=ue.options.labelMap.paragraph||ue.getLang('labelMap.paragraph')||'',ge=ue.options.paragraph||[],!o.isEmptyObject(ge)){var fe=[];for(var ye in ge)fe.push({value:ye,label:ge[ye]||ue.getLang('paragraph')[ye],theme:ue.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||'')+'</span></div>'}});var be=new $.Combox({editor:ue,items:fe,title:he,initValue:he,className:'edui-for-paragraph',onselect:function(Ce,xe){ue.execCommand('Paragraph',this.items[xe].value)},onbuttonclick:function(){this.showPopup()}});return $.buttons.paragraph=be,ue.addListener('selectionchange',function(Ce,xe,ve){if(!ve){var Ne=ue.queryCommandState('Paragraph');if(-1==Ne)be.setDisabled(!0);else{be.setDisabled(!1);var we=ue.queryCommandValue('Paragraph'),Se=be.indexByValue(we);-1==Se?be.setValue(be.initValue):be.setValue(we)}}}),be}},$.customstyle=function(ue){var ge=ue.options.customstyle||[],he=ue.options.labelMap.customstyle||ue.getLang('labelMap.customstyle')||'';if(ge.length){for(var fe=ue.getLang('customstyle'),ye=0,be=[],Ce;Ce=ge[ye++];)(function(ve){var Ne={};Ne.label=ve.label?ve.label:fe[ve.name],Ne.style=ve.style,Ne.className=ve.className,Ne.tag=ve.tag,be.push({label:Ne.label,value:Ne,theme:ue.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+Ne.tag+' '+(Ne.className?' class="'+Ne.className+'"':'')+(Ne.style?' style="'+Ne.style+'"':'')+'>'+Ne.label+'</'+Ne.tag+'></div>'}})})(Ce);var xe=new $.Combox({editor:ue,items:be,title:he,initValue:he,className:'edui-for-customstyle',onselect:function(ve,Ne){ue.execCommand('customstyle',this.items[Ne].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(ve){for(var Ne=0,we;we=this.items[Ne++];)if(we.label==ve)return Ne-1;return-1}});return $.buttons.customstyle=xe,ue.addListener('selectionchange',function(ve,Ne,we){if(!we){var Se=ue.queryCommandState('customstyle');if(-1==Se)xe.setDisabled(!0);else{xe.setDisabled(!1);var Te=ue.queryCommandValue('customstyle'),Ee=xe.indexByValue(Te);-1==Ee?xe.setValue(xe.initValue):xe.setValue(Te)}}}),xe}},$.inserttable=function(ue,ge,he){he=ue.options.labelMap.inserttable||ue.getLang('labelMap.inserttable')||'';var fe=new $.TableButton({editor:ue,title:he,className:'edui-for-inserttable',onpicktable:function(ye,be,Ce){ue.execCommand('InsertTable',{numRows:Ce,numCols:be,border:1})},onbuttonclick:function(){this.showPopup()}});return $.buttons.inserttable=fe,ue.addListener('selectionchange',function(){fe.setDisabled(-1==ue.queryCommandState('inserttable'))}),fe},$.lineheight=function(ue){var ge=ue.options.lineheight||[];if(ge.length){for(var he=0,ye=[],fe;fe=ge[he++];)ye.push({label:fe,value:fe,theme:ue.options.theme,onclick:function(){ue.execCommand('lineheight',this.value)}});var be=new $.MenuButton({editor:ue,className:'edui-for-lineheight',title:ue.options.labelMap.lineheight||ue.getLang('labelMap.lineheight')||'',items:ye,onbuttonclick:function(){var Ce=ue.queryCommandValue('LineHeight')||this.value;ue.execCommand('LineHeight',Ce)}});return $.buttons.lineheight=be,ue.addListener('selectionchange',function(){var Ce=ue.queryCommandState('LineHeight');if(-1==Ce)be.setDisabled(!0);else{be.setDisabled(!1);var xe=ue.queryCommandValue('LineHeight');xe&&be.setValue((xe+'').replace(/cm/,'')),be.setChecked(Ce)}}),be}};for(var oe=['top','bottom'],re=0,le;le=oe[re++];)(function(ue){$['rowspacing'+ue]=function(ge){var he=ge.options['rowspacing'+ue]||[];if(!he.length)return null;for(var fe=0,be=[],ye;ye=he[fe++];)be.push({label:ye,value:ye,theme:ge.options.theme,onclick:function(){ge.execCommand('rowspacing',this.value,ue)}});var Ce=new $.MenuButton({editor:ge,className:'edui-for-rowspacing'+ue,title:ge.options.labelMap['rowspacing'+ue]||ge.getLang('labelMap.rowspacing'+ue)||'',items:be,onbuttonclick:function(){var xe=ge.queryCommandValue('rowspacing',ue)||this.value;ge.execCommand('rowspacing',xe,ue)}});return $.buttons[ue]=Ce,ge.addListener('selectionchange',function(){var xe=ge.queryCommandState('rowspacing',ue);if(-1==xe)Ce.setDisabled(!0);else{Ce.setDisabled(!1);var ve=ge.queryCommandValue('rowspacing',ue);ve&&Ce.setValue((ve+'').replace(/%/,'')),Ce.setChecked(xe)}}),Ce}})(le);for(var se=['insertorderedlist','insertunorderedlist'],de=0,ce;ce=se[de++];)(function(ue){$[ue]=function(ge){var he=ge.options[ue],fe=function(){ge.execCommand(ue,this.value)},ye=[];for(var be in he)ye.push({label:he[be]||ge.getLang()[ue][be]||'',value:be,theme:ge.options.theme,onclick:fe});var Ce=new $.MenuButton({editor:ge,className:'edui-for-'+ue,title:ge.getLang('labelMap.'+ue)||'',items:ye,onbuttonclick:function(){var xe=ge.queryCommandValue(ue)||this.value;ge.execCommand(ue,xe)}});return $.buttons[ue]=Ce,ge.addListener('selectionchange',function(){var xe=ge.queryCommandState(ue);if(-1==xe)Ce.setDisabled(!0);else{Ce.setDisabled(!1);var ve=ge.queryCommandValue(ue);Ce.setValue(ve),Ce.setChecked(xe)}}),Ce}})(ce);$.fullscreen=function(ue,ge){ge=ue.options.labelMap.fullscreen||ue.getLang('labelMap.fullscreen')||'';var he=new $.Button({className:'edui-for-fullscreen',title:ge,theme:ue.options.theme,onclick:function(){ue.ui&&ue.ui.setFullScreen(!ue.ui.isFullScreen()),this.setChecked(ue.ui.isFullScreen())}});return $.buttons.fullscreen=he,ue.addListener('selectionchange',function(){var fe=ue.queryCommandState('fullscreen');he.setDisabled(-1==fe),he.setChecked(ue.ui.isFullScreen())}),he},$.emotion=function(ue,ge){var he='emotion',fe=new $.MultiMenuPop({title:ue.options.labelMap[he]||ue.getLang('labelMap.'+he+'')||'',editor:ue,className:'edui-for-'+he,iframeUrl:ue.ui.mapUrl(ge||(ue.options.iframeUrlMap||{})[he]||W[he])});return $.buttons[he]=fe,ue.addListener('selectionchange',function(){fe.setDisabled(-1==ue.queryCommandState(he))}),fe},$.autotypeset=function(ue){var ge=new $.AutoTypeSetButton({editor:ue,title:ue.options.labelMap.autotypeset||ue.getLang('labelMap.autotypeset')||'',className:'edui-for-autotypeset',onbuttonclick:function(){ue.execCommand('autotypeset')}});return $.buttons.autotypeset=ge,ue.addListener('selectionchange',function(){ge.setDisabled(-1==ue.queryCommandState('autotypeset'))}),ge},$.simpleupload=function(ue){var ge='simpleupload',he=new $.Button({className:'edui-for-'+ge,title:ue.options.labelMap[ge]||ue.getLang('labelMap.'+ge)||'',onclick:function(){},theme:ue.options.theme,showText:!1});return $.buttons[ge]=he,ue.addListener('ready',function(){var fe=he.getDom('body'),ye=fe.children[0];ue.fireEvent('simpleuploadbtnready',ye)}),ue.addListener('selectionchange',function(fe,ye,be){var Ce=ue.queryCommandState(ge);-1==Ce?(he.setDisabled(!0),he.setChecked(!1)):!be&&(he.setDisabled(!1),he.setChecked(Ce))}),he}}(),function(){function o(te){this.initOptions(te),this.initEditorUI()}var $=baidu.editor.utils,z=baidu.editor.ui.uiUtils,W=baidu.editor.ui.UIBase,Y=baidu.editor.dom.domUtils,Z=[];o.prototype={uiName:'editor',initEditorUI:function(){function te(de,ce){de.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:de.options.wordCountMsg||de.getLang('wordCountMsg'),wordOverFlowMsg:de.options.wordOverFlowMsg||de.getLang('wordOverFlowMsg')});var ue=de.options,ge=ue.maximumWords,he=ue.wordCountMsg,fe=ue.wordOverFlowMsg,ye=ce.getDom('wordcount');if(ue.wordCount){var be=de.getContentLength(!0);be>ge?(ye.innerHTML=fe,de.fireEvent('wordcountoverflow')):ye.innerHTML=he.replace('{#leave}',ge-be).replace('{#count}',be)}}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var ne=this.editor,ae=this;ne.addListener('ready',function(){if(ne.getDialog=function(de){return ne.ui._dialogs[de+'Dialog']},Y.on(ne.window,'scroll',function(de){baidu.editor.ui.Popup.postHide(de)}),ne.ui._actualFrameWidth=ne.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&ne.container.ownerDocument.execCommand('BackgroundImageCache',!1,!0),ne.options.elementPathEnabled&&(ne.ui.getDom('elementpath').innerHTML='<div class="edui-editor-breadcrumb">'+ne.getLang('elementPathTip')+':</div>'),ne.options.wordCount){Y.on(ne.document,'click',function(){te(ne,ae),Y.un(ne.document,'click',arguments.callee)}),ne.ui.getDom('wordcount').innerHTML=ne.getLang('wordCountTip')}ne.ui._scale(),ne.options.scaleEnabled?(ne.autoHeightEnabled&&ne.disableAutoHeight(),ae.enableScale()):ae.disableScale(),ne.options.elementPathEnabled||ne.options.wordCount||ne.options.scaleEnabled||(ne.ui.getDom('elementpath').style.display='none',ne.ui.getDom('wordcount').style.display='none',ne.ui.getDom('scale').style.display='none'),ne.selection.isFocus()&&ne.fireEvent('selectionchange',!1,!0)}),ne.addListener('mousedown',function(de,ce){var ue=ce.target||ce.srcElement;baidu.editor.ui.Popup.postHide(ce,ue),baidu.editor.ui.ShortCutMenu.postHide(ce)}),ne.addListener('delcells',function(){UE.ui.edittip&&new UE.ui.edittip(ne),ne.getDialog('edittip').open()});var re=!1,oe,le;ne.addListener('afterpaste',function(){ne.queryCommandState('pasteplain')||(baidu.editor.ui.PastePicker&&(oe=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:ne}),editor:ne,className:'edui-wordpastepop'}),oe.render()),re=!0)}),ne.addListener('afterinserthtml',function(){clearTimeout(le),le=setTimeout(function(){if(oe&&(re||ne.ui._isTransfer)){if(oe.isHidden()){var de=Y.createElement(ne.document,'span',{style:'line-height:0px;',innerHTML:'\uFEFF'}),ce=ne.selection.getRange();ce.insertNode(de);var ue=getDomNode(de,'firstChild','previousSibling');ue&&oe.showAnchor(3==ue.nodeType?ue.parentNode:ue),Y.remove(de)}else oe.show();delete ne.ui._isTransfer,re=!1}},200)}),ne.addListener('contextmenu',function(de,ce){baidu.editor.ui.Popup.postHide(ce)}),ne.addListener('keydown',function(de,ce){oe&&oe.dispose(ce);var ue=ce.keyCode||ce.which;ce.altKey&&90==ue&&UE.ui.buttons.fullscreen.onclick()}),ne.addListener('wordcount',function(){te(this,ae)}),ne.addListener('selectionchange',function(){ne.options.elementPathEnabled&&ae[(-1==ne.queryCommandState('elementpath')?'dis':'en')+'ableElementPath'](),ne.options.scaleEnabled&&ae[(-1==ne.queryCommandState('scale')?'dis':'en')+'ableScale']()});var se=new baidu.editor.ui.Popup({editor:ne,content:'',className:'edui-bubble',_onEditButtonClick:function(){this.hide(),ne.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(de){this.hide(),ne.ui._dialogs[de]&&ne.ui._dialogs[de].open()},_onImgSetFloat:function(de){this.hide(),ne.execCommand('imagefloat',de)},_setIframeAlign:function(de){var ce=se.anchorEl,ue=ce.cloneNode(!0);-2===de?ue.setAttribute('align',''):-1===de?ue.setAttribute('align','left'):1===de?ue.setAttribute('align','right'):void 0;ce.parentNode.insertBefore(ue,ce),Y.remove(ce),se.anchorEl=ue,se.showAnchor(se.anchorEl)},_updateIframe:function(){var de=ne._iframe=se.anchorEl;Y.hasClass(de,'ueditor_baidumap')?(ne.selection.getRange().selectNode(de).select(),ne.ui._dialogs.mapDialog.open(),se.hide()):(ne.ui._dialogs.insertframeDialog.open(),se.hide())},_onRemoveButtonClick:function(de){ne.execCommand(de),this.hide()},queryAutoHide:function(de){return de&&de.ownerDocument==ne.document&&('img'==de.tagName.toLowerCase()||Y.findParentByTagName(de,'a',!0))?de!==se.anchorEl:baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,de)}});se.render(),ne.options.imagePopup&&(ne.addListener('mouseover',function(de,ce){ce=ce||window.event;var ue=ce.target||ce.srcElement;if(ne.ui._dialogs.insertframeDialog&&/iframe/ig.test(ue.tagName)){var ge=se.formatHtml('<nobr>'+ne.getLang('property')+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+ne.getLang('default')+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+ne.getLang('justifyleft')+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+ne.getLang('justifyright')+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+ne.getLang('modify')+'</span></nobr>');ge?(se.getDom('content').innerHTML=ge,se.anchorEl=ue,se.showAnchor(se.anchorEl)):se.hide()}}),ne.addListener('selectionchange',function(de,ce){if(ce){var ue='',ge='',he=ne.selection.getRange().getClosedNode(),fe=ne.ui._dialogs;if(he&&'IMG'==he.tagName){var ye='insertimageDialog';if((-1!=he.className.indexOf('edui-faked-video')||-1!=he.className.indexOf('edui-upload-video'))&&(ye='insertvideoDialog'),-1!=he.className.indexOf('edui-faked-webapp')&&(ye='webappDialog'),-1!=he.src.indexOf('http://api.map.baidu.com')&&(ye='mapDialog'),-1!=he.className.indexOf('edui-faked-music')&&(ye='musicDialog'),-1!=he.src.indexOf('http://maps.google.com/maps/api/staticmap')&&(ye='gmapDialog'),he.getAttribute('anchorname')&&(ye='anchorDialog',ue=se.formatHtml('<nobr>'+ne.getLang('property')+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+ne.getLang('modify')+'</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick(\'anchor\') class="edui-clickable">'+ne.getLang('delete')+'</span></nobr>')),he.getAttribute('word_img')&&(ne.word_img=[he.getAttribute('word_img')],ye='wordimageDialog'),(Y.hasClass(he,'loadingclass')||Y.hasClass(he,'loaderrorclass'))&&(ye=''),!fe[ye])return;ge='<nobr>'+ne.getLang('property')+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+ne.getLang('default')+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+ne.getLang('justifyleft')+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+ne.getLang('justifyright')+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+ne.getLang('justifycenter')+'</span>&nbsp;&nbsp;<span onclick="$$._onImgEditButtonClick(\''+ye+'\');" class="edui-clickable">'+ne.getLang('modify')+'</span></nobr>',ue||(ue=se.formatHtml(ge))}if(ne.ui._dialogs.linkDialog){var be=ne.queryCommandValue('link'),Ce;if(be&&(Ce=be.getAttribute('_href')||be.getAttribute('href',2))){var xe=Ce;30<Ce.length&&(xe=Ce.substring(0,20)+'...'),ue&&(ue+='<div style="height:5px;"></div>'),ue+=se.formatHtml('<nobr>'+ne.getLang('anthorMsg')+': <a target="_blank" href="'+Ce+'" title="'+Ce+'" >'+xe+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+ne.getLang('modify')+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+ne.getLang('clear')+'</span></nobr>'),se.showAnchor(be)}}ue?(se.getDom('content').innerHTML=ue,se.anchorEl=he||be,se.showAnchor(se.anchorEl)):se.hide()}}))},_initToolbars:function(){for(var te=this.editor,ne=this.toolbars||[],ae=[],oe=0;oe<ne.length;oe++){for(var re=ne[oe],le=new baidu.editor.ui.Toolbar({theme:te.options.theme}),se=0;se<re.length;se++){var de=re[se],ce=null;if('string'!=typeof de)ce=de;else if(de=de.toLowerCase(),'|'==de&&(de='Separator'),'||'==de&&(de='Breakline'),baidu.editor.ui[de]&&(ce=new baidu.editor.ui[de](te)),'fullscreen'==de){ae[0]?ae[0].items.splice(0,0,ce):ce&&le.items.splice(0,0,ce);continue}ce&&ce.id&&le.add(ce)}ae[oe]=le}$.each(UE._customizeUI,function(ue,ge){var he,fe;return ue.id&&ue.id!=te.key?!1:void(he=ue.execFn.call(te,te,ge),he&&(fe=ue.index,fe===void 0&&(fe=le.items.length),le.add(he,fe)))}),this.toolbars=ae},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+'</div></div>':'')+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang('clickToUpload')+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var te=[],ne=0;ne<this.toolbars.length;ne++)te.push(this.toolbars[ne].renderHtml());return te.join('')},setFullScreen:function(te){var ne=this.editor,ae=ne.container.parentNode.parentNode;if(this._fullscreen!=te){if(this._fullscreen=te,this.editor.fireEvent('beforefullscreenchange',te),baidu.editor.browser.gecko)var oe=ne.selection.getRange().createBookmark();if(te){for(;'BODY'!=ae.tagName;){var re=baidu.editor.dom.domUtils.getComputedStyle(ae,'position');Z.push(re),ae.style.position='static',ae=ae.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=_Mathmax(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=ne.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(ne.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow='hidden',window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom('iframeholder').style.cssText,ne.iframe.parentNode.style.width='',this._updateFullScreen()}else{for(;'BODY'!=ae.tagName;)ae.style.position=Z.shift(),ae=ae.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom('iframeholder').style.cssText=this._bakCssText1,this._bakAutoHeight&&(ne.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,ne.iframe.parentNode.style.width=this._bakEditorContaninerWidth+'px',window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&'true'===ne.body.contentEditable){var le=document.createElement('input');document.body.appendChild(le),ne.body.contentEditable=!1,setTimeout(function(){le.focus(),setTimeout(function(){ne.body.contentEditable=!0,ne.fireEvent('fullscreenchanged',te),ne.selection.getRange().moveToBookmark(oe).select(!0),baidu.editor.dom.domUtils.remove(le),te&&window.scroll(0,0)},0)},0)}'true'===ne.body.contentEditable&&(this.editor.fireEvent('fullscreenchanged',te),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var te=z.getViewportRect();if(this.getDom().style.cssText='border:0;position:absolute;left:0;top:'+(this.editor.options.topOffset||0)+'px;width:'+te.width+'px;height:'+te.height+'px;z-index:'+(1*this.getDom().style.zIndex+100),z.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(te.height-this.getDom('toolbarbox').offsetHeight-this.getDom('bottombar').offsetHeight-(this.editor.options.topOffset||0),!0),browser.gecko)try{window.onresize()}catch(ne){}}},_updateElementPath:function(){var te=this.getDom('elementpath'),ne;if(this.elementPathEnabled&&(ne=this.editor.queryCommandValue('elementpath'))){for(var ae=[],oe=0,re;re=ne[oe];oe++)ae[oe]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+oe+'&quot;);">'+re+'</span>');te.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang('elementPathTip')+': '+ae.join(' &gt; ')+'</div>'}else te.style.display='none'},disableElementPath:function(){var te=this.getDom('elementpath');te.innerHTML='',te.style.display='none',this.elementPathEnabled=!1},enableElementPath:function(){var te=this.getDom('elementpath');te.style.display='',this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function te(){ye=Y.getXY(se),be||(be=le.options.minFrameHeight+ce.offsetHeight+ue.offsetHeight),he.style.cssText='position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:'+se.offsetWidth+'px;height:'+se.offsetHeight+'px;z-index:'+(le.options.zIndex+1),Y.on(re,'mousemove',ne),Y.on(de,'mouseup',ae),Y.on(re,'mouseup',ae)}function ne(Te){oe();var Ee=Te||window.event;xe=Ee.pageX||re.documentElement.scrollLeft+Ee.clientX,ve=Ee.pageY||re.documentElement.scrollTop+Ee.clientY,Ne=xe-ye.x,we=ve-ye.y,Ne>=Ce&&(fe=!0,he.style.width=Ne+'px'),we>=be&&(fe=!0,he.style.height=we+'px')}function ae(){fe&&(fe=!1,le.ui._actualFrameWidth=he.offsetWidth-2,se.style.width=le.ui._actualFrameWidth+'px',le.setHeight(he.offsetHeight-ue.offsetHeight-ce.offsetHeight-2,!0)),he&&(he.style.display='none'),oe(),Y.un(re,'mousemove',ne),Y.un(de,'mouseup',ae),Y.un(re,'mouseup',ae)}function oe(){browser.ie?re.selection.clear():window.getSelection().removeAllRanges()}var re=document,le=this.editor,se=le.container,de=le.document,ce=this.getDom('toolbarbox'),ue=this.getDom('bottombar'),ge=this.getDom('scale'),he=this.getDom('scalelayer'),fe=!1,ye=null,be=0,Ce=le.options.minFrameWidth,xe=0,ve=0,Ne=0,we=0,Se=this;this.editor.addListener('fullscreenchanged',function(Te,Ee){if(Ee)Se.disableScale();else if(Se.editor.options.scaleEnabled){Se.enableScale();var ke=Se.editor.document.createElement('span');Se.editor.body.appendChild(ke),Se.editor.body.style.height=_Mathmax(Y.getXY(ke).y,Se.editor.iframe.offsetHeight-20)+'px',Y.remove(ke)}}),this.enableScale=function(){1==le.queryCommandState('source')||(ge.style.display='',this.scaleEnabled=!0,Y.on(ge,'mousedown',te))},this.disableScale=function(){ge.style.display='none',this.scaleEnabled=!1,Y.un(ge,'mousedown',te)}},isFullScreen:function(){return this._fullscreen},postRender:function(){W.prototype.postRender.call(this);for(var te=0;te<this.toolbars.length;te++)this.toolbars[te].postRender();var ne=this,oe=baidu.editor.dom.domUtils,re=function(){clearTimeout(ae),ae=setTimeout(function(){ne._updateFullScreen()})},ae;oe.on(window,'resize',re),ne.addListener('destroy',function(){oe.un(window,'resize',re),clearTimeout(ae)})},showToolbarMsg:function(te,ne){if(this.getDom('toolbarmsg_label').innerHTML=te,this.getDom('toolbarmsg').style.display='',!ne){var ae=this.getDom('upload_dialog');ae.style.display='none'}},hideToolbarMsg:function(){this.getDom('toolbarmsg').style.display='none'},mapUrl:function(te){return te?te.replace('~/',this.editor.options.UEDITOR_HOME_URL||''):''},triggerLayout:function(){var te=this.getDom();te.style.zoom='1'==te.style.zoom?'100%':'1'}},$.inherits(o,baidu.editor.ui.UIBase);var ee={};UE.ui.Editor=function(te){var ne=new UE.Editor(te);ne.options.editor=ne,$.loadFile(document,{href:ne.options.themePath+ne.options.theme+'/css/ueditor.css',tag:'link',type:'text/css',rel:'stylesheet'});var ae=ne.render;return ne.render=function(oe){oe.constructor===String&&(ne.key=oe,ee[oe]=ne),$.domReady(function(){function re(){if(ne.setOpt({labelMap:ne.options.labelMap||ne.getLang('labelMap')}),new o(ne.options),oe&&(oe.constructor===String&&(oe=document.getElementById(oe)),oe&&oe.getAttribute('name')&&(ne.options.textarea=oe.getAttribute('name')),oe&&/script|textarea/ig.test(oe.tagName))){var le=document.createElement('div');oe.parentNode.insertBefore(le,oe);var se=oe.value||oe.innerHTML;ne.options.initialContent=/^[\t\r\n ]*$/.test(se)?ne.options.initialContent:se.replace(/>[\n\r\t]+([ ]{4})+/g,'>').replace(/[\n\r\t]+([ ]{4})+</g,'<').replace(/>[\n\r\t]+</g,'><'),oe.className&&(le.className=oe.className),oe.style.cssText&&(le.style.cssText=oe.style.cssText),/textarea/i.test(oe.tagName)?(ne.textarea=oe,ne.textarea.style.display='none'):oe.parentNode.removeChild(oe),oe.id&&(le.id=oe.id,Y.removeAttributes(oe,'id')),oe=le,oe.innerHTML=''}Y.addClass(oe,'edui-'+ne.options.theme),ne.ui.render(oe);var de=ne.options;ne.container=ne.ui.getDom();for(var ce=Y.findParents(oe,!0),ue=[],ge=0,he;he=ce[ge];ge++)ue[ge]=he.style.display,he.style.display='block';if(de.initialFrameWidth)de.minFrameWidth=de.initialFrameWidth;else{de.minFrameWidth=de.initialFrameWidth=oe.offsetWidth;var fe=oe.style.width;/%$/.test(fe)&&(de.initialFrameWidth=fe)}de.initialFrameHeight?de.minFrameHeight=de.initialFrameHeight:de.initialFrameHeight=de.minFrameHeight=oe.offsetHeight;for(var ge=0,he;he=ce[ge];ge++)he.style.display=ue[ge];oe.style.height&&(oe.style.height=''),ne.container.style.width=de.initialFrameWidth+(/%$/.test(de.initialFrameWidth)?'':'px'),ne.container.style.zIndex=de.zIndex,ae.call(ne,ne.ui.getDom('iframeholder')),ne.fireEvent('afteruiready')}ne.langIsReady?re():ne.addListener('langReady',re)})},ne},UE.getEditor=function(te,ne){var ae=ee[te];return ae||(ae=ee[te]=new UE.ui.Editor(ne),ae.render(te)),ae},UE.delEditor=function(te){var ne;(ne=ee[te])&&(ne.key&&ne.destroy(),delete ee[te])},UE.registerUI=function(te,ne,ae,oe){$.each(te.split(/\s+/),function(re){UE._customizeUI[re]={id:oe,execFn:ne,index:ae}})}}(),UE.registerUI('message',function(o){function $(){var te=ee.ui.getDom('toolbarbox');te&&(Y.style.top=te.offsetHeight+3+'px'),Y.style.zIndex=_Mathmax(ee.options.zIndex,ee.iframe.style.zIndex)+1}var z=baidu.editor.ui,W=z.Message,Z=[],ee=o,Y;ee.addListener('ready',function(){Y=document.getElementById(ee.ui.id+'_message_holder'),$(),setTimeout(function(){$()},500)}),ee.addListener('showmessage',function(te,ne){ne=utils.isString(ne)?{content:ne}:ne;var ae=new W({timeout:ne.timeout,type:ne.type,content:ne.content,keepshow:ne.keepshow,editor:ee}),oe=ne.id||'msg_'+(+new Date).toString(36);return ae.render(Y),Z[oe]=ae,ae.reset(ne),$(),oe}),ee.addListener('updatemessage',function(te,ne,ae){ae=utils.isString(ae)?{content:ae}:ae;var oe=Z[ne];oe.render(Y),oe&&oe.reset(ae)}),ee.addListener('hidemessage',function(te,ne){var ae=Z[ne];ae&&ae.hide()})}),UE.registerUI('autosave',function(o){var $=null,z=null;o.on('afterautosave',function(){clearTimeout($),$=setTimeout(function(){z&&o.trigger('hidemessage',z),z=o.trigger('showmessage',{content:o.getLang('autosave.success'),timeout:2e3})},2e3)})})})()},371:function(){'use strict';(function(){function W(ne,ae){return Z(ne||self.document.URL||self.location.href,ae||Y())}function Y(){var ne=document.getElementsByTagName('script');return ne[ne.length-1].src}function Z(ne,ae){var oe=ae;return /^(\/|\\\\)/.test(ae)?oe=/^.+?\w(\/|\\\\)/.exec(ne)[0]+ae.replace(/^(\/|\\\\)/,''):!/^[a-z]+:/i.test(ae)&&(ne=ne.split('#')[0].split('?')[0].replace(/[^\\\/]+$/,''),oe=ne+''+ae),ee(oe)}function ee(ne){var ae=/^[a-z]+:\/\//.exec(ne)[0],oe=null,re=[];for(ne=ne.replace(ae,'').split('?')[0].split('#')[0],ne=ne.replace(/\\/g,'/').split(/\//),ne[ne.length-1]='';ne.length;)'..'===(oe=ne.shift())?re.pop():'.'!==oe&&re.push(oe);return ae+re.join('/')}window.UEDITOR_HOME_URL='/lib/ueditor/';var te=window.UEDITOR_HOME_URL||W();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:te,serverUrl:'/ueditor/ue',toolbars:[['fullscreen','source','|','undo','redo','|','bold','italic','underline','fontborder','strikethrough','superscript','subscript','removeformat','formatmatch','autotypeset','blockquote','pasteplain','|','forecolor','backcolor','insertorderedlist','insertunorderedlist','selectall','cleardoc','|','rowspacingtop','rowspacingbottom','lineheight','|','customstyle','paragraph','fontfamily','fontsize','|','directionalityltr','directionalityrtl','indent','|','justifyleft','justifycenter','justifyright','justifyjustify','|','touppercase','tolowercase','|','link','unlink','anchor','|','imagenone','imageleft','imageright','imagecenter','|','simpleupload','insertimage','emotion','scrawl','insertvideo','music','attachment','map','gmap','insertframe','insertcode','webapp','pagebreak','template','background','|','horizontal','date','time','spechars','snapscreen','wordimage','|','inserttable','deletetable','insertparagraphbeforetable','insertrow','deleterow','insertcol','deletecol','mergecells','mergeright','mergedown','splittocells','splittorows','splittocols','charts','|','print','preview','searchreplace','drafts','help']],xssFilterRules:!0,inputXssFilter:!0,outputXssFilter:!0,whitList:{a:['target','href','title','class','style'],abbr:['title','class','style'],address:['class','style'],area:['shape','coords','href','alt'],article:[],aside:[],audio:['autoplay','controls','loop','preload','src','class','style'],b:['class','style'],bdi:['dir'],bdo:['dir'],big:[],blockquote:['cite','class','style'],br:[],caption:['class','style'],center:[],cite:[],code:['class','style'],col:['align','valign','span','width','class','style'],colgroup:['align','valign','span','width','class','style'],dd:['class','style'],del:['datetime'],details:['open'],div:['class','style'],dl:['class','style'],dt:['class','style'],em:['class','style'],font:['color','size','face'],footer:[],h1:['class','style'],h2:['class','style'],h3:['class','style'],h4:['class','style'],h5:['class','style'],h6:['class','style'],header:[],hr:[],i:['class','style'],img:['src','alt','title','width','height','id','_src','loadingclass','class','data-latex'],ins:['datetime'],li:['class','style'],mark:[],nav:[],ol:['class','style'],p:['class','style'],pre:['class','style'],s:[],section:[],small:[],span:['class','style'],sub:['class','style'],sup:['class','style'],strong:['class','style'],table:['width','border','align','valign','class','style'],tbody:['align','valign','class','style'],td:['width','rowspan','colspan','align','valign','class','style'],tfoot:['align','valign','class','style'],th:['width','rowspan','colspan','align','valign','class','style'],thead:['align','valign','class','style'],tr:['rowspan','align','valign','class','style'],tt:[],u:[],ul:['class','style'],video:['autoplay','controls','loop','preload','src','height','width','class','style']}},window.UE={getUEBasePath:W}})()},372:function(o,$,z){$=o.exports=z(77)(void 0),$.push([o.i,'body[data-v-50b81766]{margin:0}.clearfix[data-v-50b81766]:after,.clearfix[data-v-50b81766]:before{clear:both;content:" ";display:table}.fl[data-v-50b81766]{float:left}.fr[data-v-50b81766]{float:right}.pr[data-v-50b81766]{position:relative}.pa[data-v-50b81766]{position:absolute}.mt5[data-v-50b81766]{margin-top:5px}.font-wr[data-v-50b81766]{font-family:\u5FAE\u8F6F\u96C5\u9ED1,serif}.font-st[data-v-50b81766]{font-family:\u5B8B\u4F53,serif}.overhide-dot[data-v-50b81766]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.display-ib[data-v-50b81766]{display:inline-block;vertical-align:middle}.text-align-center[data-v-50b81766]{text-align:center}.no-border-textarea[data-v-50b81766]{outline:none;border:none;resize:none}.no-border[data-v-50b81766]{border:none}ul[data-v-50b81766]{margin:0;padding:0}h1[data-v-50b81766],h2[data-v-50b81766],h3[data-v-50b81766]{color:#303133}a[data-v-50b81766]{color:#96b97d;text-decoration:none}[data-v-50b81766]::-webkit-scrollbar-track{background-color:#f8f8f8}[data-v-50b81766]::-webkit-scrollbar-thumb{background:#d1d1d1;border-radius:3px;-webkit-box-shadow:inset006pxrgba(0,0,0,.5)}[data-v-50b81766]::-webkit-scrollbar{width:6px;height:6px}.sign-list-table[data-v-50b81766]::-webkit-scrollbar{height:12px}.main[data-v-50b81766]{overflow:hidden}.main-inner[data-v-50b81766]{height:100%;overflow:auto;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box}.editor[data-v-50b81766]{margin-left:100px}.cms-submit[data-v-50b81766]{text-align:right;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box}.cms-submit button[data-v-50b81766]{margin-left:20px}',''])},376:function(o){(function(){var W={getSession(Y){if('undefined'!=typeof Storage||'string'!=typeof Y){var Z=sessionStorage.getItem(Y);try{Z=JSON.parse(Z)}catch(ee){}return Z}return!1},setSession(Y,Z){return('undefined'!=typeof Storage||'string'!=typeof Y)&&('string'!=typeof Z&&(Z=JSON.stringify(Z)),sessionStorage.setItem(Y,Z),!0)},removeSession(Y){return('undefined'!=typeof Storage||'string'!=typeof Y)&&(sessionStorage.removeItem(Y),!0)},clearSession(){return'undefined'!=typeof Storage&&(sessionStorage.clear(),!0)},getLocalStorage(Y){if('undefined'!=typeof Storage||'string'!=typeof Y){var Z=localStorage.getItem(Y);try{Z=JSON.parse(Z)}catch(ee){}return Z}return!1},setLocalStorage(Y,Z){return('undefined'!=typeof Storage||'string'!=typeof Y)&&('string'!=typeof Z&&(Z=JSON.stringify(Z)),localStorage.setItem(Y,Z),!0)},removeLocalStorage(Y){return('undefined'!=typeof Storage||'string'!=typeof Y)&&(localStorage.removeItem(Y),!0)},clearLocalStorage(){return'undefined'!=typeof Storage&&(localStorage.clear(),!0)}};o.exports=W,'undefined'!=typeof window&&(window.storageUtil=W)})()},378:function(o){o.exports={render:function(){var z=this,W=z.$createElement,Y=z._self._c||W;return Y('div',[Y('cms-left'),z._v(' '),Y('div',{staticClass:'main',style:{height:z.height+'px'}},[Y('div',{staticClass:'main-inner clearfix'},[Y('el-form',{ref:'cms',staticClass:'demo-cms',attrs:{model:z.cms,rules:z.rules,"label-width":'100px'}},[Y('el-form-item',{attrs:{label:'\u6807\u9898',prop:'title'}},[Y('el-input',{model:{value:z.cms.title,callback:function(Z){z.$set(z.cms,'title',Z)},expression:'cms.title'}})],1),z._v(' '),Y('el-form-item',{attrs:{label:'\u5173\u952E\u5B57',prop:'keyword'}},[Y('el-input',{model:{value:z.cms.keyword,callback:function(Z){z.$set(z.cms,'keyword',Z)},expression:'cms.keyword'}})],1),z._v(' '),Y('el-form-item',{attrs:{label:'\u63CF\u8FF0',prop:'description'}},[Y('el-input',{model:{value:z.cms.description,callback:function(Z){z.$set(z.cms,'description',Z)},expression:'cms.description'}})],1),z._v(' '),Y('el-form-item',{attrs:{label:'\u83DC\u5355',prop:'menu'}},[Y('el-select',{attrs:{placeholder:'\u83DC\u5355'},model:{value:z.cms.menu,callback:function(Z){z.$set(z.cms,'menu',Z)},expression:'cms.menu'}},z._l(z.menus,function(Z){return Y('el-option',{key:Z.id,attrs:{label:Z.title,value:Z.id}})}))],1),z._v(' '),Y('el-form-item',{attrs:{label:'\u662F\u5426\u9996\u9875'}},[Y('el-switch',{attrs:{"active-value":'1',"inactive-value":'0'},model:{value:z.cms.isindex,callback:function(Z){z.$set(z.cms,'isindex',Z)},expression:'cms.isindex'}})],1)],1),z._v(' '),z._m(0),z._v(' '),Y('div',{staticClass:'cms-submit clearfix'},[Y('el-button',{attrs:{type:'primary'},on:{click:z.submitCms}},[z._v('\u63D0\u4EA4')])],1)],1)])],1)},staticRenderFns:[function(){var z=this,W=z.$createElement,Y=z._self._c||W;return Y('div',[Y('label',{staticClass:'el-form-item__label',staticStyle:{width:'100px'}},[z._v('\u5185\u5BB9')]),z._v(' '),Y('div',{staticClass:'editor'},[Y('div',{staticStyle:{height:'400px'},attrs:{id:'editor',type:'text/plain'}})])])}]}},382:function(o,$,z){var W=z(372);'string'==typeof W&&(W=[[o.i,W,'']]),W.locals&&(o.exports=W.locals);z(79)('5f44aee0',W,!0)},75:function(o,$,z){'use strict';(function(W){function Y(re,le){!ee.isUndefined(re)&&ee.isUndefined(re['Content-Type'])&&(re['Content-Type']=le)}var ee=z(17),te=z(315),ne=/^\)\]\}',?\n/,ae={"Content-Type":'application/x-www-form-urlencoded'},oe={adapter:function(){var re;return'undefined'==typeof XMLHttpRequest?'undefined'!=typeof W&&(re=z(161)):re=z(161),re}(),transformRequest:[function(le,se){return te(se,'Content-Type'),ee.isFormData(le)||ee.isArrayBuffer(le)||ee.isStream(le)||ee.isFile(le)||ee.isBlob(le)?le:ee.isArrayBufferView(le)?le.buffer:ee.isURLSearchParams(le)?(Y(se,'application/x-www-form-urlencoded;charset=utf-8'),le.toString()):ee.isObject(le)?(Y(se,'application/json;charset=utf-8'),JSON.stringify(le)):le}],transformResponse:[function(le){if('string'==typeof le){le=le.replace(ne,'');try{le=JSON.parse(le)}catch(se){}}return le}],timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,validateStatus:function(le){return 200<=le&&300>le}};oe.headers={common:{Accept:'application/json, text/plain, */*'}},ee.forEach(['delete','get','head'],function(le){oe.headers[le]={}}),ee.forEach(['post','put','patch'],function(le){oe.headers[le]=ee.merge(ae)}),o.exports=oe}).call($,z(171))},76:function(o,$,z){'use strict';function W(Z){var ee,te;this.promise=new Z(function(ne,ae){if(ee!=void 0||te!=void 0)throw TypeError('Bad Promise constructor');ee=ne,te=ae}),this.resolve=Y(ee),this.reject=Y(te)}var Y=z(48);o.exports.f=function(Z){return new W(Z)}}});